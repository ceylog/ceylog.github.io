<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[JSON-SCHEMA]]></title>
      <url>%2F2017%2F12%2F07%2FJSON-SCHEMA%2F</url>
      <content type="text"><![CDATA[JSON Schema ç®€å•ä½¿ç”¨åœ¨webserviceæ—¶ä»£å¼€å‘åŸºäºŽSOAPåè®®çš„webserviceåº”ç”¨ç»å¸¸ä¼šä½¿ç”¨åˆ°xmlï¼Œxml schemaã€DTDçš„ä½œç”¨éžå¸¸å¤§ï¼Œå¯ä»¥ç”¨æ¥çº¦æŸåè®®ä¸­æŠ¥æ–‡æ ¼å¼åˆæ³•æ€§ï¼›ç›¸åº”çš„åœ¨RESTæœåŠ¡ç››è¡Œçš„æ—¶ä»£ä¹ŸJSONä¹Ÿæ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œä¹Ÿå‡ºçŽ°äº†json schemaè¿™æ ·çš„ç¥žå™¨ï¼Œå¯ä»¥å®šä¹‰jsonå†…å®¹çš„æ ¼å¼ç±»åž‹ï¼ŒåºŸè¯å°‘è¯´ä¸Šä»£ç  json schema1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&#123; &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;, &quot;title&quot;: &quot;User&quot;, &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123; &quot;firstName&quot;: &#123; &quot;type&quot;: &quot;string&quot; &#125;, &quot;lastName&quot;: &#123; &quot;type&quot;: &quot;string&quot; &#125;, &quot;email&quot;: &#123; &quot;type&quot;: &quot;string&quot;, &quot;pattern&quot;: &quot;^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$&quot; &#125;, &quot;age&quot;: &#123; &quot;type&quot;: &quot;integer&quot;, &quot;minimum&quot;: 0 &#125;, &quot;sex&quot;: &#123; &quot;type&quot;: &quot;string&quot;, &quot;enum&quot;: [ &quot;ç”·&quot;, &quot;å¥³&quot; ] &#125;, &quot;roles&quot;: &#123; &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123; &quot;name&quot;: &#123; &quot;type&quot;: &quot;string&quot; &#125;, &quot;code&quot;: &#123; &quot;type&quot;: [ &quot;string&quot;, &quot;integer&quot; ] &#125; &#125;, &quot;required&quot;: [ &quot;code&quot; ] &#125;, &quot;permissions&quot;: &#123; &quot;type&quot;: &quot;array&quot;, &quot;minItems&quot;: 1, &quot;items&quot;: &#123; &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123; &quot;name&quot;: &#123; &quot;type&quot;: &quot;string&quot; &#125;, &quot;code&quot;: &#123; &quot;type&quot;: [ &quot;integer&quot;, &quot;string&quot; ] &#125; &#125;, &quot;required&quot;: [ &quot;code&quot; ] &#125; &#125; &#125;, &quot;required&quot;: [ &quot;firstName&quot;, &quot;age&quot;, &quot;permissions&quot; ]&#125; json 123456789101112131415161718&#123; &quot;firstName&quot;: &quot;abcd&quot;, &quot;lastName&quot;: &quot;adfads&quot;, &quot;sex&quot;: &quot;ç”·&quot;, &quot;email&quot;: &quot;fafaa@dfadfasdf.dddd&quot;, &quot;roles&quot;: &#123; &quot;name&quot;: &quot;ddd&quot; &#125;, &quot;permissions&quot;: [ &#123; &quot;name&quot;: &quot;dddd&quot; &#125;, &#123; &quot;name&quot;: &quot;aaaa&quot;, &quot;code&quot;: &quot;dddf&quot; &#125; ]&#125; pom.xml 12345&lt;dependency&gt; &lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt; &lt;artifactId&gt;json-schema-validator&lt;/artifactId&gt; &lt;version&gt;2.2.8&lt;/version&gt;&lt;/dependency&gt; java ä»£ç 123456789101112131415161718192021222324252627282930313233import com.fasterxml.jackson.databind.JsonNode;import com.github.fge.jackson.JsonNodeReader;import com.github.fge.jsonschema.core.report.ProcessingMessage;import com.github.fge.jsonschema.core.report.ProcessingReport;import com.github.fge.jsonschema.main.JsonSchema;import com.github.fge.jsonschema.main.JsonSchemaFactory;import org.junit.Assert;import org.junit.Test;import java.io.InputStream;import java.util.Iterator;public class JsonSchemaTest &#123; @Test public void test() throws Exception&#123; InputStream resourceAsStream = this.getClass().getResourceAsStream(&quot;/JsonSchema.json&quot;); JsonNode schema = new JsonNodeReader().fromInputStream(resourceAsStream); JsonNode json = new JsonNodeReader().fromInputStream(this.getClass().getResourceAsStream(&quot;/User.json&quot;)); JsonSchemaFactory jsonSchemaFactory = JsonSchemaFactory.byDefault(); JsonSchema jsonSchema = jsonSchemaFactory.getJsonSchema(schema); ProcessingReport report = jsonSchema.validate(json, true); Iterator&lt;ProcessingMessage&gt; iterator = report.iterator(); while (iterator.hasNext())&#123; ProcessingMessage pm = iterator.next(); JsonNode jsonNode = pm.asJson(); System.out.println(jsonNode); &#125; Assert.assertTrue(report.isSuccess()); &#125;&#125; è¾“å‡ºç»“æžœ123&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;age\&quot;])&quot;,&quot;required&quot;:[&quot;age&quot;,&quot;firstName&quot;,&quot;permissions&quot;],&quot;missing&quot;:[&quot;age&quot;]&#125;&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;/properties/permissions/items&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;/permissions/0&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;code\&quot;])&quot;,&quot;required&quot;:[&quot;code&quot;],&quot;missing&quot;:[&quot;code&quot;]&#125;&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;/properties/roles&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;/roles&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;code\&quot;])&quot;,&quot;required&quot;:[&quot;code&quot;],&quot;missing&quot;:[&quot;code&quot;]&#125; å°±è¿™æ ·ï¼Œso easy ###å‚è€ƒjson-schema-validatorå®žçŽ°json schema]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[idea-spring-boot-devtools-not-work]]></title>
      <url>%2F2017%2F03%2F02%2Fidea-spring-boot-devtools-not-work%2F</url>
      <content type="text"><![CDATA[javaå¼€å‘ä¸­æ€»æ˜¯ä¼šé¢‘ç¹é‡å¯åº”ç”¨ï¼Œéžå¸¸éº»çƒ¦ï¼ŒSpring Bootå¯ä»¥åˆ©ç”¨devtoolsé…ç½®å½“ä¿®æ”¹ä»£ç æ—¶è‡ªåŠ¨é‡å¯åº”ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çƒ­éƒ¨ç½²å·¥å…·jrebelï¼Œä½†æ˜¯åœ¨ideaä¸‹é»˜è®¤ä¸ç”Ÿæ•ˆï¼ŒgoogleåŽå¾—åˆ°ç­”æ¡ˆï¼Œideaä¸ä¼šè‡ªåŠ¨ç¼–è¯‘ç¨‹åºï¼Œå¼€å¯è‡ªåŠ¨ç¼–è¯‘åŽå‘çŽ°ï¼Œåœ¨åº”ç”¨è¿è¡Œä¸­ä¹Ÿä¸ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œæ‰¾åˆ°é—®é¢˜åŽŸå› äº†ï¼Œä¸‹é¢æ¥è§£å†³å®ƒ è®¾ç½®idea è‡ªåŠ¨ç¼–è¯‘Settings.. è®¾ç½®idea åœ¨ç¨‹åºè¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘å¿«æ·é”® ctrl + alt + shift + / é€‰æ‹©Registryå‹¾é€‰compiler.automake.allow.when.app.running Spring Boot é…ç½®pom.xml1234567891011121314151617181920&lt;dependencies&gt; ... &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; ... &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; é‡å¯åº”ç”¨ï¼Œå°±å¯ä»¥äº†]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[msys2-here-context-menu-items]]></title>
      <url>%2F2017%2F02%2F28%2Fmsys2-here-context-menu-items%2F</url>
      <content type="text"><![CDATA[register.reg12345678910Windows Registry Editor Version 5.00[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MSYS here\command]@=&quot;C:\\msys64\\msys2.exe bash&quot;[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW64 here\command]@=&quot;C:\\msys64\\mingw64.exe bash&quot;[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW32 here\command]@=&quot;C:\\msys64\\mingw32.exe bash&quot; unregister.reg12345Windows Registry Editor Version 5.00[-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MSYS here][-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW64 here][-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW32 here]]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[nginx upgrade & add module]]></title>
      <url>%2F2016%2F12%2F22%2Fnginx-upgrade%2F</url>
      <content type="text"><![CDATA[nginx upgrade &amp; add moduleç›®æ ‡ å‡çº§nginxç‰ˆæœ¬ 1.10.1 â€“&gt; 1.10.2 æ·»åŠ ç¼“å­˜æ¨¡å— æ·»åŠ æ–‡ä»¶ä¸Šä¼ æ¨¡å—å’Œä¸Šä¼ è¿›åº¦æ¨¡å— å‡†å¤‡å·¥ä½œæŸ¥çœ‹ nginx å·²å®‰è£…æ¨¡å—12$nginx -V--prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic&apos; å¤‡ä»½åŽŸnginxä¸‹è½½æ–°ç‰ˆæœ¬çš„nginxå’Œéœ€è¦æ·»åŠ çš„æ¨¡å—å¹¶è§£åŽ‹ä¸‹è½½nginx 1.10.21$wget http://nginx.org/download/nginx-1.10.2.tar.gz ä¸‹è½½ nginx-upload-module1$wget https://codeload.github.com/vkholodkov/nginx-upload-module/tar.gz/2.2.0 ä¸‹è½½ nginx-upload-progress-module1$wget https://github.com/masterzen/nginx-upload-progress-module/archive/v0.9.2.tar.gz ä¸‹è½½ ngx_cache_purge1$wget https://codeload.github.com/FRiCKLE/ngx_cache_purge/tar.gz/2.3 è§£åŽ‹1234$ tar zxf nginx-1.10.2.tar.gz$ tar zxf nginx-upload-module-2.2.0.tar.gz$ tar zxf nginx-upload-progress-module.tar.gz$ tar zxf ngx_cache_purge-2.3.tar.gz å‡çº§å¹¶æ·»åŠ æ–°æ¨¡å—1./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --add-module=/root/nginxinstall/nginx-upload-module-2.0.12 --add-module=/root/nginxinstall/nginx-upload-progress-module-82b35fc --add-module=/root/nginxinstall/ngx_cache_purge-2.3 --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic&apos;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[osx å¸¸ç”¨å¼€å‘å·¥å…·]]></title>
      <url>%2F2016%2F09%2F10%2Fosx-dev-tools%2F</url>
      <content type="text"><![CDATA[ZSHinstallsh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; homebrewinstall/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; iterm2installbrew cask install iterm2 dev toolmysqlinstallbrew install mysql startmysql.server start redisinstallbrew install redis ==&gt; Downloading https://homebrew.bintray.com/bottles/redis-3.2.3.el_capitan.bottle.tar.gz curl: (7) Failed to connect to akamai.bintray.com port 443: Operation timed out Error: Failed to download resource &quot;redis&quot; Download failed: https://homebrew.bintray.com/bottles/redis-3.2.3.el_capitan.bottle.tar.gz Warning: Bottle installation failed: building from source. ==&gt; Using the sandbox ==&gt; Downloading http://download.redis.io/releases/redis-3.2.3.tar.gz ==&gt; Downloading from http://101.44.1.117/files/B22400000598F419/download.redis.io/releases/redis-3.2.3.tar.gz ######################################################################## 100.0% ==&gt; make install PREFIX=/usr/local/Cellar/redis/3.2.3 CC=clang ==&gt; Caveats To have launchd start redis now and restart at login: brew services start redis Or, if you don&apos;t want/need a background service you can just run: redis-server /usr/local/etc/redis.conf ==&gt; Summary ðŸº /usr/local/Cellar/redis/3.2.3: 10 files, 1.7M, built in 13 seconds startbrew services start redis JDKinstallbrew cask install java java -version java version &quot;1.8.0_102&quot; Java(TM) SE Runtime Environment (build 1.8.0_102-b14) Java HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode) maveninstallbrew cask install maven mvn -v Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T00:41:47+08:00) Maven home: /usr/local/Cellar/maven/3.3.9/libexec Java version: 1.8.0_102, vendor: Oracle Corporation Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_102.jdk/Contents/Home/jre Default locale: en_US, platform encoding: UTF-8 OS name: &quot;mac os x&quot;, version: &quot;10.11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot; gradleinstallbrew cask install gradle gradle -v ------------------------------------------------------------ Gradle 3.0 ------------------------------------------------------------ Build time: 2016-08-15 13:15:01 UTC Revision: ad76ba00f59ecb287bd3c037bd25fc3df13ca558 Groovy: 2.4.7 Ant: Apache Ant(TM) version 1.9.6 compiled on June 29 2015 JVM: 1.8.0_102 (Oracle Corporation 25.102-b14) OS: Mac OS X 10.11.6 x86_64 groovyinstallbrew cask install groovy caskcask å¯ä»¥å®‰è£…å¾ˆå¤šè½¯ä»¶ã€ä¾‹å¦‚jdkï¼Œmavenï¼Œ groovyï¼Œ macDownï¼Œ idea ç­‰ç­‰ä¸€ç³»åˆ—è½¯ä»¶éƒ½å¯ä»¥é€šè¿‡caskå®‰è£…]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æœåŠ¡å™¨å°è„šæœ¬å°è¯•]]></title>
      <url>%2F2016%2F03%2F30%2Fserver-bash%2F</url>
      <content type="text"><![CDATA[###å¤‡ä»½MySQLæ•°æ®åº“ 123#!/bin/bashmysqldump -uroot -proot cswebsite &gt; /root/cswebsite_`date +%Y%m%d%H%M%S`.sql ###å¤‡ä»½tomcat åº”ç”¨ 12345678910111213141516#!/bin/bashecho &quot;shutdown tomcat..&quot;/root/tomcat8/bin/shutdown.shecho &quot;begin backup stillone...&quot;tar -zcvf /root/backup/stillone_`date +%Y%m%d%H%M%S`.tar.gz /root/tomcat8/webapps/ROOT --exclude=Files --exclude=uploadFilesecho &quot;&quot;echo &quot;&quot;echo &quot;&quot;echo -e &quot;\033[32;49;1m backup stillone done! have fun!! \033[39;49;0m&quot;echo &quot;&quot;echo &quot;&quot; ç­›é€‰nginxæ—¥å¿—è®¿é—®é‡IPæŽ’åtop1000(http çŠ¶æ€ç 403 è¯·æ±‚è·¯å¾„/v2/sms/send)awk &apos;{if($9==&quot;403&quot; &amp;&amp; $7==&quot;/v2/sms/send&quot;) print $1}&apos; /usr/local/tomcat/nginx-log/api.credan.com.log | sort | uniq -c | sort -nr -k1|head -n 1000]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆå…­ï¼‰ZSet ç±»åž‹]]></title>
      <url>%2F2015%2F03%2F04%2Fredis-datatype-zset%2F</url>
      <content type="text"><![CDATA[zset ç±»åž‹ç®€ä»‹zsetå…¨ç§°ä¸ºsorted-setsç±»åž‹,å’Œsetæ•°æ®ç±»åž‹æœ‰æžä¸ºç›¸ä¼¼,éƒ½æ˜¯å­—ç¬¦ä¸²çš„é›†åˆ,éƒ½ä¸å…è®¸é‡å¤çš„æˆå‘˜å‡ºçŽ°åœ¨ä¸€ä¸ªsetä¸­.ä¸¤è€…çš„ä¸»è¦åŒºåˆ«æ˜¯zsetçš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½ä¼šæœ‰ä¸€ä¸ªåˆ†æ•°(score)ä¸Žä¹‹å…³è”.redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»Žå°åˆ°å¤§çš„æŽ’åº.zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤.åœ¨zsetä¸­æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ–°ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯éžå¸¸å¿«é€Ÿçš„æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºé›†åˆä¸­æˆå‘˜æ•°é‡çš„å¯¹æ•°. Sorted-Setsä¸­çš„æˆå‘˜åœ¨é›†åˆä¸­çš„ä½ç½®æ˜¯æœ‰åºçš„. zset æ“ä½œ1. zaddå‘½ä»¤æ ¼å¼: zadd key score member [[score] [member] â€¦] æè¿°ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ª member å…ƒç´ åŠå…¶ score å€¼åŠ å…¥åˆ°æœ‰åºé›† key å½“ä¸­.å¦‚æžœæŸä¸ª member å·²ç»æ˜¯æœ‰åºé›†çš„æˆå‘˜ï¼Œé‚£ä¹ˆæ›´æ–°è¿™ä¸ª member çš„ score å€¼ï¼Œå¹¶é€šè¿‡é‡æ–°æ’å…¥è¿™ä¸ª member å…ƒç´ ï¼Œæ¥ä¿è¯è¯¥ member åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šã€‚score å€¼å¯ä»¥æ˜¯æ•´æ•°å€¼æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚å¦‚æžœ key ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„æœ‰åºé›†å¹¶æ‰§è¡Œ ZADD æ“ä½œã€‚å½“ key å­˜åœ¨ä½†ä¸æ˜¯æœ‰åºé›†ç±»åž‹æ—¶ï¼Œè¿”å›žä¸€ä¸ªé”™è¯¯ã€‚ æ—¶é—´å¤æ‚åº¦: O(M*log(N))ï¼Œ N æ˜¯æœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºæˆåŠŸæ·»åŠ çš„æ–°æˆå‘˜çš„æ•°é‡ è¿”å›žå€¼:è¢«æˆåŠŸæ·»åŠ çš„æ–°æˆå‘˜çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬é‚£äº›è¢«æ›´æ–°çš„ã€å·²ç»å­˜åœ¨çš„æˆå‘˜ã€‚ æ·»åŠ ä¸€ä¸ªå…ƒç´  127.0.0.1:6379[1]&gt; zadd zset_list 11 test1 (integer) 1 æ·»åŠ å¤šä¸ªå…ƒç´  127.0.0.1:6379[1]&gt; zadd zset_list 1 test2 2 test3 (integer) 2 æŸ¥çœ‹å…ƒç´  127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 1) &quot;test2&quot; 2) &quot;test3&quot; 3) &quot;test1&quot; æŸ¥çœ‹å…ƒç´ å¸¦scoreå€¼ 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; 5) &quot;test1&quot; 6) &quot;11&quot; æ·»åŠ å·²å­˜åœ¨å…ƒç´ ï¼Œä¸” score å€¼ä¸å˜ æ“ä½œä¸æˆåŠŸè¿”å›ž0 127.0.0.1:6379[1]&gt; zadd zset_list 11 test1 (integer) 0 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; 5) &quot;test1&quot; 6) &quot;11&quot; æ·»åŠ å·²å­˜åœ¨å…ƒç´ ï¼Œä½†æ˜¯æ”¹å˜ score å€¼ 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; 5) &quot;test1&quot; 6) &quot;3&quot; zremå‘½ä»¤æ ¼å¼: ZREM key member [member â€¦] æè¿°:ç§»é™¤æœ‰åºé›† key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œä¸å­˜åœ¨çš„æˆå‘˜å°†è¢«å¿½ç•¥ã€‚å½“ key å­˜åœ¨ä½†ä¸æ˜¯æœ‰åºé›†ç±»åž‹æ—¶ï¼Œè¿”å›žä¸€ä¸ªé”™è¯¯ã€‚ æ—¶é—´å¤æ‚åº¦:O(M*log(N))ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºè¢«æˆåŠŸç§»é™¤çš„æˆå‘˜çš„æ•°é‡ã€‚ è¿”å›žå€¼:è¢«æˆåŠŸç§»é™¤çš„æˆå‘˜çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬è¢«å¿½ç•¥çš„æˆå‘˜ã€‚ ç§»é™¤å•ä¸ªå…ƒç´  127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; 5) &quot;test1&quot; 6) &quot;3&quot; 127.0.0.1:6379[1]&gt; zrem zset_list test1 (integer) 1 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; ç§»é™¤å¤šä¸ª 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrem zset_list test2 test3 (integer) 2 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores (empty list or set) ç§»é™¤ä¸å­˜åœ¨å…ƒç´  127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores (empty list or set) 127.0.0.1:6379[1]&gt; zrem zset_list test2 (integer) 0 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores (empty list or set) zcardæè¿°ï¼šè¿”å›žzseté›†åˆçš„æˆå‘˜æ•° æ—¶é—´å¤æ‚åº¦ï¼šO(1) è¿”å›žå€¼ï¼šå½“ key å­˜åœ¨ä¸”æ˜¯æœ‰åºé›†(zset)ç±»åž‹æ—¶ï¼Œè¿”å›žé›†åˆå†…çš„æˆå‘˜æ•°ã€‚ä¸å­˜åœ¨è¿”å›ž0ã€‚ 127.0.0.1:6379[1]&gt; zcard zset_list (integer) 0 127.0.0.1:6379[1]&gt; zadd zset_list 0 test1 (integer) 1 127.0.0.1:6379[1]&gt; zcard zset_list (integer) 1 127.0.0.1:6379[1]&gt; zadd zset_list 1 test2 2 test3 (integer) 2 127.0.0.1:6379[1]&gt; zcard zset_list (integer) 3 zcountå‘½ä»¤æ ¼å¼:ZCOUNT key min max æè¿°ï¼šè¿”å›žæœ‰åºé›† key ä¸­ï¼Œ score å€¼åœ¨ min å’Œ max ä¹‹é—´(é»˜è®¤åŒ…æ‹¬ score å€¼ç­‰äºŽ min æˆ– max )çš„æˆå‘˜çš„æ•°é‡ã€‚ æ—¶é—´å¤æ‚åº¦: O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºå€¼åœ¨ min å’Œ max ä¹‹é—´çš„å…ƒç´ çš„æ•°é‡ã€‚ è¿”å›žå€¼ï¼šscore å€¼åœ¨ min å’Œ max ä¹‹é—´çš„æˆå‘˜çš„æ•°é‡ã€‚ 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zcount zset_list 1 2 (integer) 2 127.0.0.1:6379[1]&gt; zcount zset_list 0 2 (integer) 3 127.0.0.1:6379[1]&gt; zcount zset_list 2 2 (integer) 1 zscoreå‘½ä»¤æ ¼å¼:ZSCORE key member æè¿°:è¿”å›žæœ‰åºé›† key ä¸­ï¼Œæˆå‘˜ member çš„ score å€¼ã€‚å¦‚æžœ member å…ƒç´ ä¸æ˜¯æœ‰åºé›† key çš„æˆå‘˜ï¼Œæˆ– key ä¸å­˜åœ¨ï¼Œè¿”å›ž nil ã€‚ æ—¶é—´å¤æ‚åº¦:O(1) 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zscore zset_list test2 &quot;1&quot; 127.0.0.1:6379[1]&gt; zscore zset_list test5 (nil) zincrbyå‘½ä»¤æ ¼å¼ï¼šZINCRBY key increment member æè¿°ï¼šä¸ºæœ‰åºé›† key çš„æˆå‘˜ member çš„ score å€¼åŠ ä¸Šå¢žé‡ increment ã€‚ æ—¶é—´å¤æ‚åº¦ï¼šO(log(N)) è¿”å›žå€¼ï¼š è¿”å›žmember æˆå‘˜çš„æ–° score å€¼ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºã€‚ 127.0.0.1:6379[1]&gt; zscore zset_list test2 &quot;1&quot; 127.0.0.1:6379[1]&gt; zincrby zset_list 2 test2 &quot;3&quot; 127.0.0.1:6379[1]&gt; zincrby zset_list -2 test2 &quot;1&quot; zrangeå‘½ä»¤æ ¼å¼: ZRANGE key start stop [WITHSCORES] æè¿°ï¼šè¿”å›žæŒ‡å®šåŒºé—´çš„æˆå‘˜ã€‚å…¶ä¸­æˆå‘˜ä½ç½®æŒ‰ score å€¼é€’å¢ž(ä»Žå°åˆ°å¤§)æ¥æŽ’åºã€‚ WITHSCORESé€‰é¡¹æ˜¯ç”¨æ¥è®©æˆå‘˜å’Œå®ƒçš„scoreå€¼ä¸€å¹¶è¿”å›ž.(åœ¨å‰é¢æˆ‘ä»¬å·²ç»ç”¨åˆ°è¿‡) æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºç»“æžœé›†çš„åŸºæ•°ã€‚ è¿”å›žå€¼ï¼šè¿”å›žæŒ‡å®šåŒºé—´çš„æˆå‘˜åˆ—è¡¨. 127.0.0.1:6379[1]&gt; zrange zset_list 1 2 1) &quot;test2&quot; 2) &quot;test3&quot; 127.0.0.1:6379[1]&gt; zrange zset_list 0 2 1) &quot;test1&quot; 2) &quot;test2&quot; 3) &quot;test3&quot; 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 1) &quot;test1&quot; 2) &quot;test2&quot; 3) &quot;test3&quot; 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; å½“ç»™å®šåŒºé—´ä¸å­˜åœ¨äºŽæœ‰åºé›†æ—¶çš„æƒ…å†µ 127.0.0.1:6379[1]&gt; zrange zset_list 10 20 (empty list or set) zrevrangeå‘½ä»¤æ ¼å¼ï¼šZREVRANGE key start stop [WITHSCORES] æè¿°ï¼šå’Œzrangeä¸€æ ·ä½¿ç”¨ï¼Œå”¯ä¸€ä¸åŒæ˜¯å…¶æˆå‘˜ä½ç½®æŒ‰ score å€¼é€’å‡(ä»Žå¤§åˆ°å°)æ¥æŽ’åˆ—ã€‚ 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrevrange zset_list 0 -1 withscores 1) &quot;test3&quot; 2) &quot;2&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test1&quot; 6) &quot;0&quot; zrangebyscoreå‘½ä»¤æ ¼å¼ï¼šZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count] æè¿°ï¼šè¿”å›žæœ‰åºé›†keyä¸­æ‰€æœ‰scoreå€¼ä»‹äºŽminä¸Žmaxä¹‹é—´(åŒ…æ‹¬ç­‰äºŽ)çš„æˆå‘˜.æˆå‘˜æŒ‰scoreå€¼é€’å¢ž(ä»Žå°åˆ°å¤§)æŽ’åˆ— ã€‚min å’Œ max å¯ä»¥æ˜¯ -inf å’Œ +infå¯é€‰limitå‚æ•°æŒ‡å®šè¿”å›žç»“æžœçš„æ•°é‡åŠåŒºé—´ã€‚ æ—¶é—´å¤æ‚åº¦ï¼šO(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºè¢«ç»“æžœé›†çš„åŸºæ•°ã€‚ è¿”å›žå€¼ï¼šæŒ‡å®šåŒºé—´å†…ï¼Œå¸¦æœ‰ score å€¼(å¯é€‰)çš„æœ‰åºé›†æˆå‘˜çš„åˆ—è¡¨ã€‚ 127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf 1) &quot;test1&quot; 2) &quot;test2&quot; 3) &quot;test3&quot; 127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrangebyscore zset_list 1 +inf withscores 1) &quot;test2&quot; 2) &quot;1&quot; 3) &quot;test3&quot; 4) &quot;2&quot; æ˜¾ç¤ºå¤§äºŽ2 å°äºŽç­‰äºŽ10çš„æˆå‘˜ 127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrangebyscore zset_list (1 10 1) &quot;test3 æ˜¾ç¤ºæ¡ä»¶ 1 &lt; score &lt; 10 çš„æˆå‘˜ 127.0.0.1:6379[1]&gt; zrangebyscore zset_list (1 (10 1) &quot;test3&quot; zrevrangebyscoreå‘½ä»¤æ ¼å¼: zrevrangebyscore key max min [WITHSCORES] [LIMIT offset count] æè¿°ï¼šå’Œzrangebyscoreä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯æˆå‘˜æŒ‰ score å€¼é€’å‡(ä»Žå¤§åˆ°å°)çš„æ¬¡åºæŽ’åˆ—ã€‚ 127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrevrangebyscore zset_list +inf -inf withscores 1) &quot;test3&quot; 2) &quot;2&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test1&quot; 6) &quot;0&quot; zrankå‘½ä»¤æ ¼å¼ï¼š zrank key member æè¿°ï¼šè¿”å›žæœ‰åºé›†keyä¸­æˆå‘˜memberçš„æŽ’åã€‚æˆå‘˜æŒ‰ score å€¼é€’å¢ž(ä»Žå°åˆ°å¤§)é¡ºåºæŽ’åˆ—ã€‚æŽ’åä»¥0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´score å€¼æœ€å°çš„ä¸º0. æ—¶é—´å¤æ‚åº¦:O(log(N)) è¿”å›žå€¼ï¼šè¿”å›žæˆå‘˜æŽ’åï¼Œmemberä¸å­˜åœ¨è¿”å›žnil. 127.0.0.1:6379[1]&gt; zrank zset_list test1 (integer) 0 zrevrankå‘½ä»¤æ ¼å¼ï¼š zrevrank key member æè¿°ï¼šè¿”å›žæœ‰åºé›†keyä¸­æˆå‘˜memberçš„æŽ’åã€‚æˆå‘˜æŒ‰ score å€¼é€’å¢ž(ä»Žå¤§åˆ°å°)é¡ºåºæŽ’åˆ—ã€‚æŽ’åä»¥0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´score å€¼æœ€å¤§çš„ä¸º0. æ—¶é—´å¤æ‚åº¦:O(log(N)) è¿”å›žå€¼ï¼šè¿”å›žæˆå‘˜æŽ’åï¼Œmemberä¸å­˜åœ¨è¿”å›žnil. 127.0.0.1:6379[1]&gt; zrevrank zset_list test3 (integer) 0 zremrangebyrankå‘½ä»¤æ ¼å¼: ZREMRANGEBYRANK key start stop æè¿°ï¼šç§»é™¤æœ‰åºé›† key ä¸­ï¼ŒæŒ‡å®šæŽ’å(rank)åŒºé—´å†…çš„æ‰€æœ‰æˆå‘˜ã€‚åŒºé—´åˆ†åˆ«ä»¥ä¸‹æ ‡å‚æ•° start å’Œ stop æŒ‡å‡ºï¼ŒåŒ…å« start å’Œ stop åœ¨å†…ã€‚ä¸‹æ ‡å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºæœ‰åºé›†ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œä»¥ 1 è¡¨ç¤ºæœ‰åºé›†ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºæœ€åŽä¸€ä¸ªæˆå‘˜ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºè¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚ è¿”å›žå€¼:è¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚ 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;2&quot; 127.0.0.1:6379[1]&gt; zremrangebyrank zset_list 1 2 (integer) 2 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; zremrangebyscoreå‘½ä»¤æ ¼å¼ï¼šzremrangebyscore key min max æè¿°ï¼šç§»é™¤scoreå€¼ä»‹äºŽminå’Œmaxä¹‹é—´ï¼ˆç­‰äºŽï¼‰çš„æˆå‘˜ æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºè¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚ è¿”å›žå€¼:è¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚ ç§»é™¤æ‰€æœ‰scoreåœ¨ 100 åˆ° 110 å†…çš„æ•°æ® 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test11&quot; 4) &quot;100&quot; 5) &quot;test22&quot; 6) &quot;101&quot; 127.0.0.1:6379[1]&gt; zremrangebyscore zset_list 100 110 (integer) 2 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; zunionstoreå‘½ä»¤æ ¼å¼ï¼šZUNIONSTORE destination numkeys key [key â€¦] [WEIGHTS weight [weight â€¦]] [AGGREGATE SUM|MIN|MAX] æè¿°ï¼šè®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå…¶ä¸­ç»™å®š key çš„æ•°é‡å¿…é¡»ä»¥ numkeys å‚æ•°æŒ‡å®šï¼Œå¹¶å°†è¯¥å¹¶é›†(ç»“æžœé›†)å‚¨å­˜åˆ° destination ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æžœé›†ä¸­æŸä¸ªæˆå‘˜çš„ score å€¼æ˜¯æ‰€æœ‰ç»™å®šé›†ä¸‹è¯¥æˆå‘˜ score å€¼ä¹‹ å’Œ ã€‚ 127.0.0.1:6379[1]&gt; zadd zset1 1 test1 2 test2 (integer) 2 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 127.0.0.1:6379[1]&gt; zadd zset_list 1 test2 (integer) 1 127.0.0.1:6379[1]&gt; zunionstore dis_set 2 zset_list zset1 (integer) 2 127.0.0.1:6379[1]&gt; zrange dis_set 0 -1 withscores 1) &quot;test1&quot; 2) &quot;1&quot; 3) &quot;test2&quot; 4) &quot;3&quot; 127.0.0.1:6379[1]&gt; zrange zset1 0 -1 withscores 1) &quot;test1&quot; 2) &quot;1&quot; 3) &quot;test2&quot; 4) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 127.0.0.1:6379[1]&gt; zadd zset_list 3 test3 (integer) 1 127.0.0.1:6379[1]&gt; zunionstore dis_set1 2 zset_list zset1 (integer) 3 127.0.0.1:6379[1]&gt; zrange dis_set1 0 -1 withscores 1) &quot;test1&quot; 2) &quot;1&quot; 3) &quot;test2&quot; 4) &quot;3&quot; 5) &quot;test3&quot; 6) &quot;3&quot; zinterstoreå‘½ä»¤æ ¼å¼ï¼šZINTERSTORE destination numkeys key [key â€¦] [WEIGHTS weight [weight â€¦]] [AGGREGATE SUM|MIN|MAX] æè¿°ï¼šè®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†ã€‚å…¶ä¸­ç»™å®š key çš„æ•°é‡å¿…é¡»ä»¥ numkeys å‚æ•°æŒ‡å®šï¼Œå¹¶å°†è¯¥äº¤é›†(ç»“æžœé›†)å‚¨å­˜åˆ° destination ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æžœé›†ä¸­æŸä¸ªæˆå‘˜çš„ score å€¼æ˜¯æ‰€æœ‰ç»™å®šé›†ä¸‹è¯¥æˆå‘˜ score å€¼ä¹‹ å’Œ ã€‚ æ—¶é—´å¤æ‚åº¦ï¼šO(NK)+O(Mlog(M))ï¼Œ N ä¸ºç»™å®š key ä¸­åŸºæ•°æœ€å°çš„æœ‰åºé›†ï¼Œ K ä¸ºç»™å®šæœ‰åºé›†çš„æ•°é‡ï¼Œ M ä¸ºç»“æžœé›†çš„åŸºæ•°ã€‚ è¿”å›žå€¼ï¼šä¿å­˜åˆ° destination çš„ç»“æžœé›†æˆå‘˜æ•°ã€‚ 127.0.0.1:6379[1]&gt; zrange zset1 0 -1 withscores 1) &quot;test1&quot; 2) &quot;1&quot; 3) &quot;test2&quot; 4) &quot;2&quot; 127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores 1) &quot;test1&quot; 2) &quot;0&quot; 3) &quot;test2&quot; 4) &quot;1&quot; 5) &quot;test3&quot; 6) &quot;3&quot; 127.0.0.1:6379[1]&gt; zinterstore dis_set2 2 zset1 zset_list (integer) 2 127.0.0.1:6379[1]&gt; zrange dis_set2 0 -1 withscores 1) &quot;test1&quot; 2) &quot;1&quot; 3) &quot;test2&quot; 4) &quot;3&quot;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆä¸ƒï¼‰keyï¼ˆé”®ï¼‰çš„ç›¸å…³æ“ä½œ]]></title>
      <url>%2F2015%2F03%2F04%2Fredis-key-operation%2F</url>
      <content type="text"><![CDATA[delæ—¶é—´å¤æ‚åº¦: Stringç±»åž‹å…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚ å…¶ä½™O(N) Nè¡¨åˆ é™¤keyæ•°é‡. æè¿°ï¼šåˆ é™¤ è¿”å›žå€¼: å®žé™…è¢«åˆ é™¤çš„KEYæ•°é‡ æ“ä½œå‘½ä»¤å¦‚ä¸‹: redis 127.0.0.1:6379&gt; del my_set_diff my_set (integer) 2 keyså‘½ä»¤æ ¼å¼: keys pattern æè¿°: èŽ·å–æ‰€æœ‰åŒ¹é…PATTERNå‚æ•°çš„keys. æ—¶é—´å¤æ‚åº¦: O(N) è¡¨KEYçš„æ•°é‡. è¿”å›žå€¼:åŒ¹é…æ¨¡å¼çš„é”®åˆ—è¡¨ã€‚ æ“ä½œå‘½ä»¤å¦‚ä¸‹: redis 127.0.0.1:6379&gt; keys my* 1) â€œmy_set_2â€³ 2) â€œmyset2â€³ 3) â€œmyset5â€³ 4) â€œmysetâ€ existsæè¿°: åˆ¤æ–­æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨ã€‚1å­˜åœ¨,0ä¸å­˜åœ¨. æ—¶é—´å¤æ‚åº¦:O(1) æ“ä½œå‘½ä»¤å¦‚ä¸‹: redis 127.0.0.1:6379&gt; exists myset (integer) 1 redis 127.0.0.1:6379&gt; exists myset9 (integer) 0 moveå‘½ä»¤æ ¼å¼: move key db æ—¶é—´å¤æ‚åº¦:O(1) æè¿°: å°†å½“å‰æ•°æ®åº“ä¸­æŒ‡å®šçš„é”®Keyç§»åŠ¨åˆ°å‚æ•°ä¸­æŒ‡å®šçš„æ•°æ®åº“ä¸­ã€‚å¦‚æžœè¯¥Keyåœ¨ç›®æ ‡æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ï¼Œæˆ–è€…åœ¨å½“å‰æ•°æ®åº“ä¸­å¹¶ä¸å­˜åœ¨ï¼Œè¯¥å‘½ä»¤å°†ä¸åšä»»ä½•æ“ä½œå¹¶è¿”å›ž0ã€‚redisä¸­é»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé»˜è®¤ä»Ž0å¼€å§‹åˆ°15ã€‚ è¿”å›žå€¼:æˆåŠŸ1 å¦åˆ™0 renameå‘½ä»¤æ ¼å¼: rename key newkey æ—¶é—´å¤æ‚åº¦:O(1) æè¿°: é‡å‘½åkey,keyä¸å­˜åœ¨å°†æŠ¥é”™,å¦‚æžœnewKeyå­˜åœ¨åˆ™ç›´æŽ¥è¦†ç›– renamenxå‘½ä»¤æ ¼å¼: renamenx key newkey æ—¶é—´å¤æ‚åº¦:O(1) æè¿°:å½“newkeyä¸å­˜åœ¨æ—¶æ‰é‡å‘½å. è¿”å›žå€¼: æˆåŠŸè¿”å›ž1,å¦‚é‡Œnewkeyå·²ç»å­˜åœ¨,è¿”å›ž0. persistå‘½ä»¤æ ¼å¼:persist key æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:ç§»é™¤ç»™å®škeyçš„ç”Ÿå­˜æ—¶é—´ã€‚ è¿”å›žå€¼:1è¡¨ç¤ºKeyçš„è¿‡æœŸæ—¶é—´è¢«ç§»å‡ºï¼Œ0è¡¨ç¤ºè¯¥Keyä¸å­˜åœ¨æˆ–æ²¡æœ‰è¿‡æœŸæ—¶é—´ã€‚ expireå‘½ä»¤æ ¼å¼:EXPIRE key seconds æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:ä¸ºç»™å®škeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ã€‚å½“keyè¿‡æœŸæ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ è¿”å›žå€¼:è®¾ç½®æˆåŠŸè¿”å›ž1ã€‚å½“keyä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œè¿”å›ž0ã€‚ expireatå‘½ä»¤æ ¼å¼:expireat key timetamp æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:EXPIREATçš„ä½œç”¨å’ŒEXPIREä¸€æ ·ï¼Œéƒ½ç”¨äºŽä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ã€‚ä¸åŒåœ¨äºŽEXPIREATå‘½ä»¤æŽ¥å—çš„æ—¶é—´å‚æ•°æ˜¯UNIXæ—¶é—´æˆ³(unix timestamp)ã€‚ è¿”å›žå€¼:è®¾ç½®æˆåŠŸè¿”å›ž1ã€‚å½“keyä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œè¿”å›ž0ã€‚ ttlå‘½ä»¤æ ¼å¼:ttl key æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:è¿”å›žç»™å®škeyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(time to live)(ä»¥ç§’ä¸ºå•ä½)ã€‚ è¿”å›žå€¼:keyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)ã€‚å½“keyä¸å­˜åœ¨æˆ–æ²¡æœ‰è®¾ç½®ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›ž-1 ã€‚ randomkeyæ—¶é—´å¤æ‚åº¦: O(1) æè¿°:éšæœºçš„è¿”å›žä¸€ä¸ªKeyã€‚ è¿”å›žå€¼:è¿”å›žçš„éšæœºé”®ï¼Œå¦‚æžœè¯¥æ•°æ®åº“æ˜¯ç©ºçš„åˆ™è¿”å›žnilã€‚ typeå‘½ä»¤æ ¼å¼:type key æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:èŽ·å–keyçš„ç±»åž‹ è¿”å›žå€¼: è¿”å›žçš„å­—ç¬¦ä¸²ä¸ºstringã€listã€setã€hashå’Œzsetï¼Œå¦‚æžœkeyä¸å­˜åœ¨è¿”å›žnoneã€‚ dumpå‘½ä»¤æ ¼å¼:dump key å¯ç”¨ç‰ˆæœ¬:reidis&gt;=2.6.0 æ—¶é—´å¤æ‚åº¦: O(1) æè¿°:åºåˆ—åŒ–ç»™å®škey,å¹¶è¿”å›žè¢«åºåˆ—åŒ–çš„å€¼,ä½¿ç”¨ RESTORE å‘½ä»¤å¯ä»¥å°†è¿™ä¸ªå€¼ååºåˆ—åŒ–ä¸º Redis é”®ã€‚ è¿”å›žå€¼: å¦‚keyä¸å­˜åœ¨è¿”å›žnli,å¦åˆ™è¿”å›žè¢«åºåˆ—åŒ–çš„å€¼.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Java é‡è½½ä¸Žé‡å†™çš„åŒºåˆ«]]></title>
      <url>%2F2014%2F08%2F15%2Fjava-overloading-Overriding%2F</url>
      <content type="text"><![CDATA[é‡è½½(Overloading)ï¼ˆ1ï¼‰ æ–¹æ³•é‡è½½æ˜¯è®©ç±»ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»åž‹æ•°æ®çš„ä¸€ç§æ‰‹æ®µã€‚å¤šä¸ªåŒåå‡½æ•°åŒæ—¶å­˜åœ¨ï¼Œå…·æœ‰ä¸åŒçš„å‚æ•°ä¸ªæ•°/ç±»åž‹ã€‚ é‡è½½Overloadingæ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨çŽ°ã€‚ ï¼ˆ2ï¼‰Javaçš„æ–¹æ³•é‡è½½ï¼Œå°±æ˜¯åœ¨ç±»ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªæ–¹æ³•ï¼Œå®ƒä»¬å…·æœ‰ç›¸åŒçš„åå­—ï¼Œä½†å…·æœ‰ä¸åŒçš„å‚æ•°å’Œä¸åŒçš„å®šä¹‰ã€‚ è°ƒç”¨æ–¹æ³•æ—¶é€šè¿‡ä¼ é€’ç»™å®ƒä»¬çš„ä¸åŒå‚æ•°ä¸ªæ•°å’Œå‚æ•°ç±»åž‹æ¥å†³å®šå…·ä½“ä½¿ç”¨å“ªä¸ªæ–¹æ³•, è¿™å°±æ˜¯å¤šæ€æ€§ã€‚ ï¼ˆ3ï¼‰ é‡è½½çš„æ—¶å€™ï¼Œæ–¹æ³•åè¦ä¸€æ ·ï¼Œä½†æ˜¯å‚æ•°ç±»åž‹å’Œä¸ªæ•°ä¸ä¸€æ ·ï¼Œè¿”å›žå€¼ç±»åž‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ç›¸åŒã€‚æ— æ³•ä»¥è¿”å›žåž‹åˆ«ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†ã€‚ ä¸‹é¢æ˜¯é‡è½½çš„ä¾‹å­ï¼špackage c04.answer;//è¿™æ˜¯åŒ…å//è¿™æ˜¯è¿™ä¸ªç¨‹åºçš„ç¬¬ä¸€ç§ç¼–ç¨‹æ–¹æ³•ï¼Œåœ¨mainæ–¹æ³•ä¸­å…ˆåˆ›å»ºä¸€ä¸ªDogç±»å®žä¾‹ï¼Œç„¶åŽåœ¨Dogç±»çš„æž„é€ æ–¹æ³•ä¸­åˆ©ç”¨thiså…³é”®å­—è°ƒç”¨ä¸åŒçš„barkæ–¹æ³•ã€‚ ä¸åŒçš„é‡è½½æ–¹æ³•barkæ˜¯æ ¹æ®å…¶å‚æ•°ç±»åž‹çš„ä¸åŒè€ŒåŒºåˆ†çš„ã€‚ //æ³¨æ„ï¼šé™¤æž„é€ å™¨ä»¥å¤–ï¼Œç¼–è¯‘å™¨ç¦æ­¢åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹ä¸­è°ƒç”¨æž„é€ å™¨ã€‚ package c04.answer; public class Dog { Dog(){ this.bark(); } //bark()æ–¹æ³•æ˜¯é‡è½½æ–¹æ³• void bark(){ System.out.println(&quot;no barking!&quot;); this.bark(&quot;female&quot;, 3.4); } //æ³¨æ„ï¼šé‡è½½çš„æ–¹æ³•çš„è¿”å›žå€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ void bark(String m,double l) { System.out.println(&quot;a barking dog!&quot;); this.bark(5, &quot;China&quot;); } //ä¸èƒ½ä»¥è¿”å›žå€¼åŒºåˆ†é‡è½½æ–¹æ³•ï¼Œè€Œåªèƒ½ä»¥â€œå‚æ•°ç±»åž‹â€å’Œâ€œç±»åâ€æ¥åŒºåˆ† void bark(int a,String n) { System.out.println(&quot;a howling dog&quot;); } public static void main(String[] args) { Dog dog = new Dog(); //dog.bark(); [Page] //dog.bark(&quot;male&quot;, &quot;yellow&quot;); //dog.bark(5, &quot;China&quot;); } } é‡å†™ï¼ˆOverridingï¼‰ï¼ˆ1ï¼‰ çˆ¶ç±»ä¸Žå­ç±»ä¹‹é—´çš„å¤šæ€æ€§ï¼Œå¯¹çˆ¶ç±»çš„å‡½æ•°è¿›è¡Œé‡æ–°å®šä¹‰ã€‚å¦‚æžœåœ¨å­ç±»ä¸­å®šä¹‰æŸæ–¹æ³•ä¸Žå…¶çˆ¶ç±»æœ‰ç›¸åŒçš„åç§°å’Œå‚æ•°ï¼Œæˆ‘ä»¬è¯´è¯¥æ–¹æ³•è¢«é‡å†™ (Overriding)ã€‚åœ¨Javaä¸­ï¼Œå­ç±»å¯ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–å†™ç›¸åŒçš„æ–¹æ³•ã€‚ ä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŽŸå°ä¸åŠ¨åœ°ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³ä½œä¸€å®šçš„ä¿®æ”¹ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨æ–¹æ³•çš„é‡å†™ã€‚ æ–¹æ³•é‡å†™åˆç§°æ–¹æ³•è¦†ç›–ã€‚ ï¼ˆ2ï¼‰è‹¥å­ç±»ä¸­çš„æ–¹æ³•ä¸Žçˆ¶ç±»ä¸­çš„æŸä¸€æ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•åã€è¿”å›žç±»åž‹å’Œå‚æ•°è¡¨ï¼Œåˆ™æ–°æ–¹æ³•å°†è¦†ç›–åŽŸæœ‰çš„æ–¹æ³•ã€‚ å¦‚éœ€çˆ¶ç±»ä¸­åŽŸæœ‰çš„æ–¹æ³•ï¼Œå¯ä½¿ç”¨superå…³é”®å­—ï¼Œè¯¥å…³é”®å­—å¼•ç”¨äº†å½“å‰ç±»çš„çˆ¶ç±»ã€‚ ï¼ˆ3ï¼‰å­ç±»å‡½æ•°çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºŽçˆ¶ç±»çš„ï¼›ä¸‹é¢æ˜¯é‡å†™çš„ä¾‹å­ï¼š æ¦‚å¿µï¼šå³è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æœºåˆ¶ã€‚ åŠ¨æ€ç»‘å®šçš„å†…å¹•ï¼š 1ã€ç¼–è¯‘å™¨æ£€æŸ¥å¯¹è±¡å£°æ˜Žçš„ç±»åž‹å’Œæ–¹æ³•åï¼Œä»Žè€ŒèŽ·å–æ‰€æœ‰å€™é€‰æ–¹æ³•ã€‚è¯•ç€æŠŠä¸Šä¾‹Baseç±»çš„testæ³¨é‡ŠæŽ‰ï¼Œè¿™æ—¶å†ç¼–è¯‘å°±æ— æ³•é€šè¿‡ã€‚ 2ã€é‡è½½å†³ç­–ï¼šç¼–è¯‘å™¨æ£€æŸ¥æ–¹æ³•è°ƒç”¨çš„å‚æ•°ç±»åž‹ï¼Œä»Žä¸Šè¿°å€™é€‰æ–¹æ³•é€‰å‡ºå”¯ä¸€çš„é‚£ä¸€ä¸ªï¼ˆå…¶é—´ä¼šæœ‰éšå«ç±»åž‹è½¬åŒ–ï¼‰ã€‚ å¦‚æžœç¼–è¯‘å™¨æ‰¾åˆ°å¤šäºŽä¸€ä¸ªæˆ–è€…æ²¡æ‰¾åˆ°ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚è¯•ç€æŠŠä¸Šä¾‹Baseç±»çš„test(byte b)æ³¨é‡ŠæŽ‰ï¼Œè¿™æ—¶è¿è¡Œç»“æžœæ˜¯1 1ã€‚ 3ã€è‹¥æ–¹æ³•ç±»åž‹ä¸ºpriavte static final ï¼Œjavaé‡‡ç”¨é™æ€ç¼–è¯‘ï¼Œç¼–è¯‘å™¨ä¼šå‡†ç¡®çŸ¥é“è¯¥è°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚ 4ã€å½“ç¨‹åºè¿è¡Œå¹¶ä¸”ä½¿ç”¨åŠ¨æ€ç»‘å®šæ¥è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå¿…é¡»è°ƒç”¨å¯¹è±¡çš„å®žé™…ç±»åž‹ç›¸åŒ¹é…çš„æ–¹æ³•ç‰ˆæœ¬ã€‚ åœ¨ä¾‹å­ä¸­ï¼Œbæ‰€æŒ‡å‘çš„å®žé™…ç±»åž‹æ˜¯TestOverridingï¼Œæ‰€ä»¥b.test(0)è°ƒç”¨å­ç±»çš„testã€‚ ä½†æ˜¯ï¼Œå­ç±»å¹¶æ²¡æœ‰é‡å†™test(byte b)ï¼Œæ‰€ä»¥b.test((byte)0)è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„test(byte b)ã€‚ å¦‚æžœæŠŠçˆ¶ç±»çš„(byte b)æ³¨é‡ŠæŽ‰ï¼Œåˆ™é€šè¿‡ç¬¬äºŒæ­¥éšå«ç±»åž‹è½¬åŒ–ä¸ºint,æœ€ç»ˆè°ƒç”¨çš„æ˜¯å­ç±»çš„test(int i)ã€‚ å­¦ä¹ æ€»ç»“ï¼š å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§ç‰¹æ€§ï¼Œå’Œæ–¹æ³•æ— å…³ï¼Œç®€å•è¯´ï¼Œå°±æ˜¯åŒæ ·çš„ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ•°æ®çš„ä¸åŒï¼Œåšå‡ºä¸åŒçš„å¤„ç†ï¼Œå³æ–¹æ³•çš„é‡è½½â€”â€”æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆé™æ€å¤šæ€æ€§ï¼‰ è€Œå½“å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ï¼Œè¾“å…¥æ•°æ®ä¸€æ ·ï¼Œä½†è¦åšå‡ºæœ‰åˆ«äºŽçˆ¶ç±»çš„å“åº”æ—¶ï¼Œä½ å°±è¦è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼Œ å³åœ¨å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•â€”â€”ç›¸åŒå‚æ•°ï¼Œä¸åŒå®žçŽ°ï¼ˆåŠ¨æ€å¤šæ€æ€§ï¼‰ OOPä¸‰å¤§ç‰¹æ€§ï¼šç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…ã€‚ public class Base { void test(int i) { System.out.print(i); } void test(byte b){ System.out.print(b); } } public class TestOverriding extends Base { void test(int i) { i++; System.out.println(i); } public static void main(String[]agrs) { Base b=new TestOverriding(); b.test(0) b.test((byte)0) } } è¿™æ—¶çš„è¾“å‡ºç»“æžœæ˜¯1 0ï¼Œè¿™æ˜¯è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šçš„ç»“æžœã€‚ é‡å†™çš„ä¸»è¦ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿå®šä¹‰æŸä¸ªå­ç±»ç‰¹æœ‰çš„ç‰¹å¾ï¼š public class Father{ public void speak(){ System.out.println(Father); } } public class SonextendsFather{ public void speak(){ System.out.println(&quot;son&quot;); } } è¿™ä¹Ÿå«åšå¤šæ€æ€§ï¼Œé‡å†™æ–¹æ³•åªèƒ½å­˜åœ¨äºŽå…·æœ‰ç»§æ‰¿å…³ç³»ä¸­ï¼Œé‡å†™æ–¹æ³•åªèƒ½é‡å†™çˆ¶ç±»éžç§æœ‰çš„æ–¹æ³•ã€‚ å½“ä¸Šä¾‹ä¸­Fatherç±»speak()æ–¹æ³•è¢«privateæ—¶ï¼ŒSonç±»ä¸èƒ½é‡å†™å‡ºFatherç±»speak()æ–¹æ³•ï¼Œæ­¤æ—¶Sonç±»speak()æ–¹æ³•ç›¸å½“ä¸Žåœ¨Sonç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªspeak()æ–¹æ³•ã€‚ Fatherç±»speak()æ–¹æ³•ä¸€ä½†è¢«finalæ—¶ï¼Œæ— è®ºè¯¥æ–¹æ³•è¢«public,protectedåŠé»˜è®¤æ‰€ä¿®é¥°æ—¶ï¼ŒSonç±»æ ¹æœ¬ä¸èƒ½é‡å†™Fatherç±»speak()æ–¹æ³•ï¼Œ è¯•å›¾ç¼–è¯‘ä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ä¾‹ï¼š public class Father{ final public void speak(){ System.out.println(&quot;Father&quot;); } } public class SonextendsFather{ public void speak(){ System.out.println(&quot;son&quot;); } }//ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼› Fatherç±»speak()æ–¹æ³•è¢«é»˜è®¤ä¿®é¥°æ—¶ï¼Œåªèƒ½åœ¨åŒä¸€åŒ…ä¸­ï¼Œè¢«å…¶å­ç±»è¢«é‡å†™ï¼Œå¦‚æžœä¸åœ¨åŒä¸€åŒ…åˆ™ä¸èƒ½é‡å†™ã€‚ Fatherç±»speak()æ–¹æ³•è¢«protoetedæ—¶ï¼Œä¸ä»…åœ¨åŒä¸€åŒ…ä¸­ï¼Œè¢«å…¶å­ç±»è¢«é‡å†™ï¼Œè¿˜å¯ä»¥ä¸åŒåŒ…çš„å­ç±»é‡å†™ã€‚ é‡å†™æ–¹æ³•çš„è§„åˆ™ï¼š 1ã€å‚æ•°åˆ—è¡¨å¿…é¡»å®Œå…¨ä¸Žè¢«é‡å†™çš„æ–¹æ³•ç›¸åŒï¼Œå¦åˆ™ä¸èƒ½ç§°å…¶ä¸ºé‡å†™è€Œæ˜¯é‡è½½ã€‚ 2ã€è¿”å›žçš„ç±»åž‹å¿…é¡»ä¸€ç›´ä¸Žè¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›žç±»åž‹ç›¸åŒï¼Œå¦åˆ™ä¸èƒ½ç§°å…¶ä¸ºé‡å†™è€Œæ˜¯é‡è½½ã€‚ 3ã€è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶ä¸€å®šè¦å¤§äºŽè¢«é‡å†™æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic&gt;protected&gt;default&gt;privateï¼‰ 4ã€é‡å†™æ–¹æ³•ä¸€å®šä¸èƒ½æŠ›å‡ºæ–°çš„æ£€æŸ¥å¼‚å¸¸æˆ–è€…æ¯”è¢«é‡å†™æ–¹æ³•ç”³æ˜Žæ›´åŠ å®½æ³›çš„æ£€æŸ¥åž‹å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š çˆ¶ç±»çš„ä¸€ä¸ªæ–¹æ³•ç”³æ˜Žäº†ä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸IOExceptionï¼Œåœ¨é‡å†™è¿™ä¸ªæ–¹æ³•æ˜¯å°±ä¸èƒ½æŠ›å‡ºException,åªèƒ½æŠ›å‡ºIOExceptionçš„å­ç±»å¼‚å¸¸ï¼Œå¯ä»¥æŠ›å‡ºéžæ£€æŸ¥å¼‚å¸¸ã€‚ è€Œé‡è½½çš„è§„åˆ™ï¼š 1ã€å¿…é¡»å…·æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼› 2ã€å¯ä»¥æœ‰ä¸è´£éª‚çš„è¿”å›žç±»åž‹ï¼Œåªè¦å‚æ•°åˆ—è¡¨ä¸åŒå°±å¯ä»¥äº†ï¼› 3ã€å¯ä»¥æœ‰ä¸åŒçš„è®¿é—®ä¿®é¥°ç¬¦ï¼› 4ã€å¯ä»¥æŠ›å‡ºä¸åŒçš„å¼‚å¸¸ï¼› é‡å†™ä¸Žé‡è½½çš„åŒºåˆ«åœ¨äºŽï¼š é‡å†™å¤šæ€æ€§èµ·ä½œç”¨ï¼Œå¯¹è°ƒç”¨è¢«é‡è½½è¿‡çš„æ–¹æ³•å¯ä»¥å¤§å¤§å‡å°‘ä»£ç çš„è¾“å…¥é‡ï¼ŒåŒä¸€ä¸ªæ–¹æ³•ååªè¦å¾€é‡Œé¢ä¼ é€’ä¸åŒçš„å‚æ•°å°±å¯ä»¥æ‹¥æœ‰ä¸åŒçš„åŠŸèƒ½æˆ–è¿”å›žå€¼ã€‚ ç”¨å¥½é‡å†™å’Œé‡è½½å¯ä»¥è®¾è®¡ä¸€ä¸ªç»“æž„æ¸…æ™°è€Œç®€æ´çš„ç±»ï¼Œå¯ä»¥è¯´é‡å†™å’Œé‡è½½åœ¨ç¼–å†™ä»£ç è¿‡ç¨‹ä¸­çš„ä½œç”¨éžåŒä¸€èˆ¬. ï¼ˆæ¥æºï¼šåšå®¢å›­ï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javaä¸­å…³äºŽMapçš„ä¹å¤§é—®é¢˜]]></title>
      <url>%2F2014%2F08%2F14%2Fjava-map-9-problems%2F</url>
      <content type="text"><![CDATA[é€šå¸¸æ¥è¯´ï¼ŒMapæ˜¯ä¸€ä¸ªç”±é”®å€¼å¯¹ç»„æˆçš„æ•°æ®ç»“æž„ï¼Œä¸”åœ¨é›†åˆä¸­æ¯ä¸ªé”®æ˜¯å”¯ä¸€çš„ã€‚ä¸‹é¢å°±ä»¥Kå’ŒVæ¥ä»£è¡¨é”®å’Œå€¼ï¼Œæ¥è¯´æ˜Žä¸€ä¸‹javaä¸­å…³äºŽMapçš„ä¹å¤§é—®é¢˜ã€‚ 1ã€å°†Mapè½¬æ¢ä¸ºListç±»åž‹åœ¨javaä¸­MapæŽ¥å£æä¾›äº†ä¸‰ç§é›†åˆèŽ·å–æ–¹å¼ï¼šKey set,ï¼Œvalue setï¼Œ and key-value set.ã€‚å®ƒä»¬éƒ½å¯ä»¥é€šè¿‡æž„é€ æ–¹æ³•æˆ–è€…addAll()æ–¹æ³•æ¥è½¬æ¢ä¸ºListç±»åž‹ã€‚ä¸‹é¢ä»£ç å°±è¯´æ˜Žäº†å¦‚ä½•ä»ŽMapä¸­æž„é€ ArrayListï¼š // key list List keyList = new ArrayList(map.keySet()); // value list List valueList = new ArrayList(map.valueSet()); // key-value list List entryList = new ArrayList(map.entrySet()); 2ã€é€šè¿‡Entry éåŽ†Mapjavaä¸­è¿™ç§ä»¥é”®å€¼å¯¹å­˜åœ¨çš„æ–¹å¼è¢«ç§°ä¸ºMap.Entryã€‚Map.entrySet()è¿”å›žçš„æ˜¯ä¸€ä¸ªkey-value é›†åˆï¼Œè¿™æ˜¯ä¸€ç§éžå¸¸é«˜æ•ˆçš„éåŽ†æ–¹å¼ã€‚ for(Entry entry: map.entrySet()) { // get key K key = entry.getKey(); // get value V value = entry.getValue(); } Iterator æˆ‘ä»¬ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯åœ¨JDK1.5ä»¥å‰ Iterator itr = map.entrySet().iterator(); while(itr.hasNext()) { Entry entry = itr.next(); // get key K key = entry.getKey(); // get value V value = entry.getValue(); } 3ã€é€šè¿‡Keyæ¥å¯¹MapæŽ’åºæŽ’åºéœ€è¦å¯¹Mapçš„keè¿›è¡Œé¢‘ç¹çš„æ“ä½œï¼Œä¸€ç§æ–¹å¼å°±æ˜¯é€šè¿‡æ¯”è¾ƒå™¨(comparator )æ¥å®žçŽ°ï¼š List list = new ArrayList(map.entrySet()); Collections.sort(list, new Comparator() { @Override public int compare(Entry e1, Entry e2) { return e1.getKey().compareTo(e2.getKey()); } }); å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯é€šè¿‡SortedMapï¼Œä½†å¿…é¡»è¦å®žçŽ°ComparableæŽ¥å£ã€‚ SortedMap sortedMap = new TreeMap(new Comparator() { @Override public int compare(K k1, K k2) { return k1.compareTo(k2); } }); sortedMap.putAll(map); 4ã€å¯¹valueå¯¹Mapè¿›è¡ŒæŽ’åºè¿™ä¸Žä¸Šä¸€ç‚¹æœ‰äº›ç±»ä¼¼ï¼Œä»£ç å¦‚ä¸‹ï¼š List list = new ArrayList(map.entrySet()); Collections.sort(list, new Comparator() { @Override public int compare(Entry e1, Entry e2) { return e1.getValue().compareTo(e2.getValue()); } }); 5ã€åˆå§‹åŒ–ä¸€ä¸ªstatic çš„å¸¸é‡Mapå½“ä½ å¸Œæœ›åˆ›å»ºä¸€ä¸ªå…¨å±€é™æ€Mapçš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼Œè€Œä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è€Œåœ¨Test1ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶å£°æ˜Žäº†mapæ˜¯é™æ€çš„ï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æ”¹å˜å®ƒçš„å€¼ï¼Œå°±åƒTest1.map.put(3,â€threeâ€);åœ¨Test2ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå°†å…¶è®¾ç½®ä¸ºä¸å¯ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬è¿è¡ŒTest2.map.put(3,â€threeâ€)çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªUnsupportedOperationException å¼‚å¸¸æ¥ç¦æ­¢ä½ ä¿®æ”¹ã€‚ public class Test1 { private static final Map map; static { map = new HashMap(); map.put(1, â€œoneâ€); map.put(2, â€œtwoâ€); } } public class Test2 { private static final Map map; static { Map aMap = new HashMap(); aMap.put(1, â€œoneâ€); aMap.put(2, â€œtwoâ€); map = Collections.unmodifiableMap(aMap); } } 6ã€HashMap, TreeMap, and Hashtableä¹‹é—´çš„ä¸åŒåœ¨MapæŽ¥å£ä¸­ï¼Œå…±æœ‰ä¸‰ç§å®žçŽ°ï¼šHashMapï¼ŒTreeMapï¼ŒHashtableã€‚ å®ƒä»¬ä¹‹é—´å„æœ‰ä¸åŒï¼Œè¯¦ç»†å†…å®¹è¯·å‚è€ƒã€Š HashMap vs. TreeMap vs. Hashtable vs. LinkedHashMapã€‹ä¸€æ–‡ã€‚ 6ã€Mapä¸­çš„åå‘æŸ¥è¯¢æˆ‘ä»¬åœ¨Mapæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹åŽï¼Œæ„å‘³ç€è¿™åœ¨Mapä¸­é”®å’Œå€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªé”®å°±æ˜¯å¯¹åº”ä¸€ä¸ªå€¼ã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åå‘æŸ¥è¯¢ï¼Œæ¯”å¦‚é€šè¿‡æŸä¸€ä¸ªå€¼æ¥æŸ¥æ‰¾å®ƒçš„é”®ï¼Œè¿™ç§æ•°æ®ç»“æž„è¢«ç§°ä¸ºbidirectional mapï¼Œé—æ†¾çš„æ˜¯JDKå¹¶æ²¡æœ‰å¯¹å…¶æ”¯æŒã€‚ Apacheå’ŒGuava å…±åŒæä¾›äº†è¿™ç§bidirectional mapå®žçŽ°ï¼Œå®ƒåœ¨å®žçŽ°ä¸­å®ƒè§„å®šäº†é”®å’Œå€¼éƒ½æ˜¯å¿…é¡»æ˜¯1:1çš„å…³ç³»ã€‚ 7ã€å¯¹Mapçš„å¤åˆ¶javaä¸­æä¾›äº†å¾ˆå¤šæ–¹æ³•éƒ½å¯ä»¥å®žçŽ°å¯¹ä¸€ä¸ªMapçš„å¤åˆ¶ï¼Œä½†æ˜¯é‚£äº›æ–¹æ³•ä¸è§å¾—ä¼šæ—¶æ—¶åŒæ­¥ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªMapå‘ç”Ÿçš„å˜åŒ–ï¼Œè€Œå¤åˆ¶çš„é‚£ä¸ªä¾ç„¶ä¿æŒåŽŸæ ·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒé«˜æ•ˆçš„å®žçŽ°æ–¹æ³•ï¼š Map copiedMap = Collections.synchronizedMap(map); å½“ç„¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£å°±æ˜¯å…‹éš†ã€‚ä½†æ˜¯æˆ‘ä»¬çš„javaé¼»ç¥–Josh Blochå´ä¸æŽ¨èè¿™ç§æ–¹å¼ï¼Œä»–æ›¾ç»åœ¨ä¸€æ¬¡è®¿è°ˆä¸­è¯´è¿‡å…³äºŽMapå…‹éš†çš„é—®é¢˜ï¼šåœ¨å¾ˆå¤šç±»ä¸­éƒ½æä¾›äº†å…‹éš†çš„æ–¹æ³•ï¼Œå› ä¸ºäººä»¬ç¡®å®žéœ€è¦ã€‚ä½†æ˜¯å…‹éš†éžå¸¸æœ‰å±€é™æ€§ï¼Œè€Œä¸”åœ¨å¾ˆå¤šæ—¶å€™é€ æˆäº†ä¸å¿…è¦çš„å½±å“ã€‚ï¼ˆåŽŸæ–‡ã€ŠCopy constructor versus cloningã€‹ï¼‰ 8ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Mapå¦‚æžœè¿™ä¸ªmapè¢«ç½®ä¸ºä¸å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å®žçŽ° map = Collections.emptyMap(); ç›¸åï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æŽ¥ map = new HashMap(); æ–‡ç« æºè‡ªï¼šITå­¦ä¹ è€…]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆäº”ï¼‰set ç±»åž‹]]></title>
      <url>%2F2014%2F08%2F10%2Fredis-datatype-set%2F</url>
      <content type="text"><![CDATA[set ç±»åž‹ç®€ä»‹åœ¨Redisä¸­ï¼Œsetæ˜¯é›†åˆï¼Œå’Œæˆ‘ä»¬æ•°å­¦ä¸­çš„é›†åˆæ¦‚å¿µç›¸ä¼¼ï¼Œå¯¹é›†åˆçš„æ“ä½œæœ‰æ·»åŠ åˆ é™¤å…ƒç´ ï¼Œæœ‰å¯¹å¤šä¸ªå‡ ä¸ªæ±‚äº¤å¹¶å·®ç­‰æ“ä½œï¼Œæ“ä½œä¸­keyç†è§£ä¸ºé›†åˆçš„åå­—ã€‚Redisçš„setæ˜¯stringç±»åž‹çš„æ— åºé›†åˆã€‚setå…ƒç´ æœ€å¤§å¯ä»¥åŒ…å«(2çš„32æ¬¡æ–¹)ä¸ªå…ƒç´ ã€‚setçš„åé€šè¿‡hash tableå®žçŽ°çš„ï¼Œæ‰€ä»¥æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯0ï¼ˆ1ï¼‰ã€‚hash tableä¼šéšç€æ·»åŠ æˆ–è€…åˆ é™¤è‡ªåŠ¨çš„è°ƒæ•´å¤§å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è°ƒæ•´hash tableå¤§å°æ—¶å€™éœ€è¦åŒæ­¥ï¼ˆèŽ·å–å†™é”ï¼‰ä¼šé˜»å¡žå…¶ä»–è¯»å†™æ“ä½œï¼Œå¯èƒ½ä¸ä¹…åŽå°±ä¼šæ”¹ç”¨è·³è¡¨æ¥å®žçŽ°ã€‚å…³äºŽseté›†åˆç±»åž‹é™¤äº†åŸºæœ¬çš„æ·»åŠ åˆ é™¤æ“ä½œï¼Œå…¶ä»–æœ‰ç”¨çš„æ“ä½œè¿˜åŒ…æ‹¬é›†åˆçš„å–å¹¶é›†ï¼ˆunionï¼‰ï¼Œäº¤é›†ï¼ˆintersectionï¼‰ï¼Œå·®é›†ï¼ˆdifferenceï¼‰ã€‚é€šè¿‡è¿™äº›æ“ä½œå¯ä»¥å¾ˆå®¹æ˜“çš„å®žçŽ°snsä¸­çš„å¥½å‹æŽ¨èå’Œblogçš„tagåŠŸèƒ½ã€‚ set æ“ä½œ1. saddå‘åç§°ä¸ºkeyçš„setä¸­æ·»åŠ å…ƒç´  redis 127.0.0.1:6379&gt; sadd myset &quot;hello&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset &quot;world&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset &quot;world&quot; (integer) 0 redis 127.0.0.1:6379&gt; smembers myset 1) &quot;world&quot; 2) &quot;hello&quot; redis 127.0.0.1:6379&gt; æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘mysetä¸­æ·»åŠ äº†ä¸‰ä¸ªå…ƒç´ ï¼Œä½†ç”±äºŽç¬¬ä¸‰ä¸ªå…ƒç´ è·Ÿç¬¬äºŒä¸ªå…ƒç´ åç›¸åŒçš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå…ƒç´ æ²¡æœ‰æ·»åŠ æˆåŠŸï¼Œæœ€åŽæˆ‘ä»¬ç”¨smembersæ¥æŸ¥çœ‹mysetä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ 2. sremåˆ é™¤åç§°ä¸ºkeyçš„setä¸­çš„å…ƒç´ member redis 127.0.0.1:6379&gt; sadd myset2 &quot;one&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset2 &quot;two&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset2 &quot;three&quot; (integer) 1 redis 127.0.0.1:6379&gt; srem myset2 &quot;one&quot; (integer) 1 redis 127.0.0.1:6379&gt; srem myset2 &quot;four&quot; (integer) 0 redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘myset2ä¸­æ·»åŠ äº†ä¸‰ä¸ªå…ƒç´ åŽï¼Œå†è°ƒç”¨sremæ¥åˆ é™¤oneå’Œfourï¼Œä½†ç”±äºŽå…ƒç´ ä¸­æ²¡æœ‰fourï¼Œæ‰€ä»¥ï¼Œè¯æ¡sremå‘½ä»¤æ‰§è¡Œå¤±è´¥ã€‚ 3. spopéšå³è¿”å›žå¹¶åˆ é™¤åç§°ä¸ºkeyçš„setä¸­ä¸€ä¸ªå…ƒç´  redis 127.0.0.1:6379&gt; sadd myset3 &quot;one&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset3 &quot;two&quot; (integer) 1 redis 127.0.0.1:6379&gt; sadd myset3 &quot;three&quot; (integer) 1 redis 127.0.0.1:6379&gt; spop myset3 &quot;three&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘myset3ä¸­æ·»åŠ ä¸‰ä¸ªå…ƒç´ åŽï¼Œåœ¨è°ƒç”¨spopæ¥éšå³åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°threeå…ƒç´ è¢«åˆ é™¤äº†ã€‚ 4. sdiffè¿”å›žæ‰€æœ‰ç»™å®škeyä¸Žç¬¬ä¸€ä¸ªkeyçš„å·®é›† redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sdiff myset2 myset3 1) &quot;three&quot; redis 127.0.0.1:6379&gt; æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°myset2ä¸­çš„å…ƒç´ ä¸Žmyset3ä¸­ä¸åŒçš„åªæ˜¯threeï¼Œæ‰€ä»¥åªæœ‰threeè¢«æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œä¸æ˜¯threeå’Œoneï¼Œå› ä¸ºoneæ˜¯myset3çš„å…ƒç´ ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†myset2å’Œmyset3æ¢ä¸ªé¡ºåºæ¥çœ‹ä¸€ä¸‹ç»“æžœï¼š redis 127.0.0.1:6379&gt; sdiff myset3 myset2 1) &quot;one&quot; redis 127.0.0.1:6379&gt; è¿™ä¸ªç»“æžœä¸­åªæ˜¾ç¤ºäº†ï¼Œmyset3ä¸­çš„å…ƒç´ ä¸Žmyset2ä¸­çš„ä¸åŒçš„å…ƒç´ ã€‚ 5. sdiffstoreè¿”å›žæ‰€æœ‰ç»™å®škeyä¸Žç¬¬ä¸€ä¸ªkeyçš„å·®é›†ï¼Œå¹¶å°†ç»“æžœå­˜ä¸ºå¦ä¸€ä¸ªkey redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sdiffstore myset4 myset2 myset3 (integer) 1 redis 127.0.0.1:6379&gt; smembers myset4 1) &quot;three&quot; redis 127.0.0.1:6379&gt; 6. sinterè¿”å›žæ‰€æœ‰ç»™å®škeyçš„äº¤é›† redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sinter myset2 myset3 1) &quot;two&quot; redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹çš„ç»“æžœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„äº¤é›†twoè¢«æŸ¥å‡ºæ¥äº† 7. sinterstoreè¿”å›žæ‰€æœ‰ç»™å®škeyçš„äº¤é›†ï¼Œå¹¶å°†ç»“æžœå­˜ä¸ºå¦ä¸€ä¸ªkey redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sinterstore myset5 myset2 myset3 (integer) 1 redis 127.0.0.1:6379&gt;smembers myset5 1) &quot;two&quot; redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹çš„ç»“æžœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„äº¤é›†è¢«ä¿å­˜åˆ°myset5ä¸­äº†ã€‚ 8. sunionè¿”å›žæ‰€æœ‰ç»™å®škeyçš„å¹¶é›† redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sunion myset2 myset3 1) &quot;three&quot; 2) &quot;one&quot; 3) &quot;two&quot; redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹çš„ç»“æžœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„å¹¶é›†è¢«æŸ¥å‡ºæ¥äº† 9. sunionstoreè¿”å›žæ‰€æœ‰ç»™å®škeyçš„å¹¶é›†ï¼Œå¹¶å°†ç»“æžœå­˜ä¸ºå¦ä¸€ä¸ªkey redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; sunionstore myset6 myset2 myset3 (integer) 3 redis 127.0.0.1:6379&gt;smembers myset6 1) &quot;three&quot; 2) &quot;one&quot; 3) &quot;two&quot; redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹çš„ç»“æžœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„å¹¶é›†è¢«ä¿å­˜åˆ°myset6ä¸­äº† 10. smoveä»Žç¬¬ä¸€ä¸ªkeyå¯¹åº”çš„setä¸­ä¸€å¤„memberå¹¶æ·»åŠ åˆ°ç¬¬äºŒä¸ªå¯¹åº”setä¸­ redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;three&quot; 2) &quot;two&quot; redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; smove myset2 myset7 three (integer) 1 redis 127.0.0.1:6379&gt;smembers myset7 1) &quot;three&quot; redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œmyset2çš„threeè¢«ç§»åˆ°myset7ä¸­äº† 11. scardè¿”å›žåç§°ä¸ºkeyçš„setçš„å…ƒç´ ä¸ªæ•° redis 127.0.0.1:6379&gt; scard myset2 (integer) 1 redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œmyset2çš„æˆå‘˜æ•°é‡ä¸º1 12. sismemberæµ‹è¯•memberæ˜¯å¦æ˜¯åç§°ä¸ºkeyçš„setçš„å…ƒç´  redis 127.0.0.1:6379&gt; smembers myset2 1) &quot;two&quot; redis 127.0.0.1:6379&gt; sismembers myset2 two (integer) 1 redis 127.0.0.1:6379&gt;sismember myset2 one (integer) 0 redis 127.0.0.1:6379&gt; é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œtwoæ˜¯myset2çš„æˆå‘˜ï¼Œè€Œoneä¸æ˜¯ã€‚ 13. srandmemberéšæœºè¿”å›žåç§°ä¸ºkeyçš„setçš„ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä¸åˆ é™¤å…ƒç´  redis 127.0.0.1:6379&gt; smembers myset3 1) &quot;two&quot; 2) &quot;one&quot; redis 127.0.0.1:6379&gt; srandmember myset3 &quot;two&quot; redis 127.0.0.1:6379&gt;srandmember myset3 &quot;one&quot; redis 127.0.0.1:6379&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆå››ï¼‰List ç±»åž‹]]></title>
      <url>%2F2014%2F08%2F09%2Fredis-datatype-list%2F</url>
      <content type="text"><![CDATA[list ç±»åž‹ç®€ä»‹Listæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æž„ï¼Œä¸»è¦åŠŸèƒ½æ˜¯pushã€popã€èŽ·å–ä¸€ä¸ªèŒƒå›´çš„æ‰€æœ‰å€¼ç­‰ç­‰ï¼Œæ“ä½œä¸­keyç†è§£ä¸ºé“¾è¡¨çš„åå­—ã€‚Redisçš„listç±»åž‹å…¶å®žå°±æ˜¯ä¸€ä¸ªæ¯ä¸ªå­å…ƒç´ éƒ½æ˜¯stringç±»åž‹çš„åŒå‘é“¾è¡¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡pushã€popæ“ä½œä»Žé“¾è¡¨çš„å¤´éƒ¨æˆ–è€…å°¾éƒ¨æ·»åŠ åˆ é™¤å…ƒç´ ï¼Œè¿™æ ·listæ—¢å¯ä»¥ä½œä¸ºæ ˆï¼Œåˆå¯ä»¥ä½œä¸ºé˜Ÿåˆ—ã€‚ list æ“ä½œ1. lpushåœ¨keyå¯¹åº”listçš„å¤´éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´  redis 127.0.0.1:6379&gt; lpush mylist &quot;world&quot; (integer) 1 redis 127.0.0.1:6379&gt; lpush mylist &quot;hello&quot; (integer) 2 redis 127.0.0.1:6379&gt; lrange mylist 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; 2. rpushåœ¨keyå¯¹åº”listçš„å°¾éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´  redis 127.0.0.1:6379&gt; rpush mylist2 &quot;world&quot; (integer) 1 redis 127.0.0.1:6379&gt; rpush mylist2 &quot;hello&quot; (integer) 2 redis 127.0.0.1:6379&gt; lrange mylist2 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; 3. linsertåœ¨keyå¯¹åº”listçš„ç‰¹å®šä½ç½®å‰æˆ–åŽæ·»åŠ å­—ç¬¦ä¸² redis 127.0.0.1:6379&gt; rpush mylist3 &quot;world&quot; (integer) 1 redis 127.0.0.1:6379&gt; linsert mylist3 before &quot;world&quot; &quot;hello&quot; (integer) 2 redis 127.0.0.1:6379&gt; lrange mylist3 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; 4. lsetè®¾ç½®listä¸­æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ å€¼ redis 127.0.0.1:6379&gt; rpush mylist4 &quot;hello&quot; (integer) 1 redis 127.0.0.1:6379&gt; lset mylist4 0 &quot;world&quot; OK redis 127.0.0.1:6379&gt; lrange mylist4 0 -1 1) &quot;world&quot; 5. lremä»Žkeyå¯¹åº”listä¸­åˆ é™¤nä¸ªå’Œvalueç›¸åŒçš„å…ƒç´ ã€‚ï¼ˆn&lt;0ä»Žå°¾åˆ é™¤ï¼Œn=0å…¨éƒ¨åˆ é™¤ï¼‰ redis 127.0.0.1:6379&gt; rpush mylist5 &quot;hello&quot; (integer) 1 redis 127.0.0.1:6379&gt; rpush mylist5 &quot;hello&quot; (integer) 1 redis 127.0.0.1:6379&gt; lrem mylist5 1 &quot;hello&quot; (integer) 1 6. ltrimä¿ç•™æŒ‡å®škeyçš„å€¼èŒƒå›´å†…çš„æ•°æ® redis 127.0.0.1:6379&gt; rpush mylist8 &quot;one&quot; (integer) 1 redis 127.0.0.1:6379&gt; rpush mylist8 &quot;two&quot; (integer) 2 redis 127.0.0.1:6379&gt; ltrim mylist8 1 -1 (integer) 1 redis 127.0.0.1:6379&gt; lrange mylist5 1 &quot;hello&quot; (integer) 1 6. lpopä»Žlistçš„å¤´éƒ¨åˆ é™¤å…ƒç´ ï¼Œå¹¶è¿”å›žåˆ é™¤å…ƒç´  redis 127.0.0.1:6379&gt; lrange mylist 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; redis 127.0.0.1:6379&gt; lpop mylist &quot;hello&quot; redis 127.0.0.1:6379&gt; lrange mylist 0 -1 &quot;world&quot; redis 127.0.0.1:6379&gt; 7. rpopä»Žlistçš„å°¾éƒ¨åˆ é™¤å…ƒç´ ï¼Œå¹¶è¿”å›žåˆ é™¤å…ƒç´  redis 127.0.0.1:6379&gt; lrange mylist2 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; redis 127.0.0.1:6379&gt; rpop mylist2 &quot;world&quot; redis 127.0.0.1:6379&gt; lrange mylist2 0 -1 1) &quot;hello&quot; redis 127.0.0.1:6379&gt; 8. rpoplpushä»Žç¬¬ä¸€ä¸ªlistçš„å°¾éƒ¨ç§»é™¤å…ƒç´ å¹¶æ·»åŠ åˆ°ç¬¬äºŒä¸ªlistçš„å¤´éƒ¨ redis 127.0.0.1:6379&gt; lrange mylist2 0 -1 1) &quot;hello&quot; 2) &quot;world&quot; redis 127.0.0.1:6379&gt; rpop mylist2 &quot;world&quot; redis 127.0.0.1:6379&gt; lrange mylist2 0 -1 1) &quot;hello&quot; redis 127.0.0.1:6379&gt; 9. lindexè¿”å›žåç§°ä¸ºkeyçš„listä¸­indexä½ç½®çš„å…ƒç´  redis 127.0.0.1:6379&gt; lrange mylist5 0 -1 1) &quot;three&quot; 2) &quot;foo&quot; redis 127.0.0.1:6379&gt; lindex mylist5 0 &quot;three&quot; redis 127.0.0.1:6379&gt; lindex mylist5 1 &quot;foo&quot; redis 127.0.0.1:6379&gt; 10. llenè¿”å›žkeyå¯¹åº”listçš„é•¿åº¦ redis 127.0.0.1:6379&gt; llen mylist5 (integer) 2 redis 127.0.0.1:6379&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆä¸‰ï¼‰hash ç±»åž‹]]></title>
      <url>%2F2014%2F08%2F08%2Fredis-datatype-hash%2F</url>
      <content type="text"><![CDATA[hash ç±»åž‹ç®€ä»‹redis hashæ˜¯ä¸€ä¸ªstringç±»åž‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ã€‚å®ƒçš„æ·»åŠ ã€åˆ é™¤æ“ä½œéƒ½æ˜¯0(1)(å¹³å‡)ã€‚hashç‰¹åˆ«é€‚åˆç”¨äºŽå­˜å‚¨å¯¹è±¡ã€‚ç›¸è¾ƒäºŽå°†å¯¹è±¡çš„æ¯ä¸ªå­—æ®µå­˜æˆå•ä¸ªstringç±»åž‹ï¼Œå°†ä¸€ä¸ªå¯¹è±¡å­˜å‚¨åœ¨hashç±»åž‹ä¸­ä¼šå ç”¨æ›´å°‘çš„å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ–¹ä¾¿çš„å­˜å–æ•´ä¸ªå¯¹è±¡ã€‚çœå†…å­˜çš„åŽŸå› æ˜¯æ–°å»ºä¸€ä¸ªhashå¯¹è±¡æ—¶å¼€å§‹æ˜¯ç”¨zipmapæ¥å­˜å‚¨çš„ã€‚ hash æ“ä½œ1. hsetè®¾ç½®hash fieldä¸ºæŒ‡å®šå€¼ï¼Œå¦‚æžœkeyä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºã€‚ redis 127.0.0.1:6379&gt; hset myhash field1 Hello (integer) 1 redis 127.0.0.1:6379&gt; 2. hsetnxè®¾ç½®hash field ä¸ºæŒ‡å®šå€¼ï¼Œå¦‚æžœkey ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºã€‚å¦‚æžœfield å·²ç»å­˜åœ¨ï¼Œè¿”å›ž0ï¼Œnx æ˜¯not exist çš„æ„æ€ã€‚ redis 127.0.0.1:6379&gt; hsetnx myhash field &quot;Hello&quot; (integer) 1 redis 127.0.0.1:6379&gt; hsetnx myhash field &quot;Hello&quot; (integer) 0 redis 127.0.0.1:6379&gt; ç¬¬ä¸€æ¬¡æ‰§è¡Œæ˜¯æˆåŠŸçš„ï¼Œä½†ç¬¬äºŒæ¬¡æ‰§è¡Œç›¸åŒçš„å‘½ä»¤å¤±è´¥ï¼ŒåŽŸå› æ˜¯field å·²ç»å­˜åœ¨äº†ã€‚ 3. hmsetåŒæ—¶è®¾ç½®hashçš„å¤šä¸ªfieldã€‚ redis 127.0.0.1:6379&gt; hmset myhash field1 Hello field2 World OK redis 127.0.0.1:6379&gt; 4. hgetèŽ·å–æŒ‡å®šçš„hash fieldã€‚ redis 127.0.0.1:6379&gt; hget myhash field1 &quot;Hello&quot; redis 127.0.0.1:6379&gt; hget myhash field2 &quot;World&quot; redis 127.0.0.1:6379&gt; hget myhash field3 (nil) redis 127.0.0.1:6379&gt; ç”±äºŽæ•°æ®åº“æ²¡æœ‰field3ï¼Œæ‰€ä»¥å–åˆ°çš„æ˜¯ä¸€ä¸ªç©ºå€¼nilã€‚ 5. hmgetèŽ·å–å…¨éƒ¨æŒ‡å®šçš„hash fieldã€‚ redis 127.0.0.1:6379&gt; hmget myhash field1 field2 field3 1) &quot;Hello&quot; 2) &quot;World&quot; 3) (nil) redis 127.0.0.1:6379&gt; ç”±äºŽæ•°æ®åº“æ²¡æœ‰field3ï¼Œæ‰€ä»¥å–åˆ°çš„æ˜¯ä¸€ä¸ªç©ºå€¼nilã€‚ 6. hincrbyæŒ‡å®šçš„hash filed åŠ ä¸Šç»™å®šå€¼ã€‚ redis 127.0.0.1:6379&gt; hset myhash field3 20 (integer) 1 redis 127.0.0.1:6379&gt; hget myhash field3 &quot;20&quot; redis 127.0.0.1:6379&gt; hincrby myhash field3 -8 (integer) 12 redis 127.0.0.1:6379&gt; hget myhash field3 &quot;12&quot; redis 127.0.0.1:6379&gt; ä¾‹ä¸­å°†field3 çš„å€¼ä»Ž20 é™åˆ°äº†12ï¼Œå³åšäº†ä¸€ä¸ªå‡8 çš„æ“ä½œã€‚ 7. hexistsæµ‹è¯•æŒ‡å®šfield æ˜¯å¦å­˜åœ¨ã€‚ redis 127.0.0.1:6379&gt; hexists myhash field1 (integer) 1 redis 127.0.0.1:6379&gt; hexists myhash field9 (integer) 0 redis 127.0.0.1:6379&gt; é€šè¿‡ä¸Šä¾‹å¯ä»¥è¯´æ˜Žfield1 å­˜åœ¨ï¼Œä½†field9 æ˜¯ä¸å­˜åœ¨çš„ã€‚ 8. hlenè¿”å›žæŒ‡å®šhash çš„field æ•°é‡ã€‚ redis 127.0.0.1:6379&gt; hlen myhash (integer) 4 redis 127.0.0.1:6379&gt; é€šè¿‡ä¸Šä¾‹å¯ä»¥çœ‹åˆ°myhash ä¸­æœ‰4 ä¸ªfieldã€‚ 9. hdelè¿”å›žæŒ‡å®šhash çš„field æ•°é‡ã€‚ redis 127.0.0.1:6379&gt; hlen myhash (integer) 4 redis 127.0.0.1:6379&gt; hdel myhash field1 (integer) 1 redis 127.0.0.1:6379&gt; hlen myhash (integer) 3 redis 127.0.0.1:6379&gt; 10. hkeysè¿”å›žhash çš„æ‰€æœ‰fieldã€‚ redis 127.0.0.1:6379&gt; hkeys myhash 1) &quot;field2&quot; 2) &quot;field&quot; 3) &quot;field3&quot; redis 127.0.0.1:6379&gt; è¯´æ˜Žè¿™ä¸ªhash ä¸­æœ‰3 ä¸ªfield 11. hvalsè¿”å›žhash çš„æ‰€æœ‰valueã€‚ redis 127.0.0.1:6379&gt; hvals myhash 1) &quot;World&quot; 2) &quot;Hello&quot; 3) &quot;12&quot; redis 127.0.0.1:6379&gt; è¯´æ˜Žè¿™ä¸ªhash ä¸­æœ‰3 ä¸ªfield 12. hgetallèŽ·å–æŸä¸ªhash ä¸­å…¨éƒ¨çš„filed åŠvalue redis 127.0.0.1:6379&gt; hgetall myhash 1) &quot;field2&quot; 2) &quot;World&quot; 3) &quot;field&quot; 4) &quot;Hello&quot; 5) &quot;field3&quot; 6) &quot;12&quot; redis 127.0.0.1:6379&gt; å¯è§ï¼Œä¸€ä¸‹å­å°†myhash ä¸­æ‰€æœ‰çš„field åŠå¯¹åº”çš„value éƒ½å–å‡ºæ¥äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆäºŒï¼‰Stringç±»åž‹]]></title>
      <url>%2F2014%2F08%2F07%2Fredis-datatype-string%2F</url>
      <content type="text"><![CDATA[ä¸Šæ–‡è¯¦ç»†ä»‹ç»äº†Redisæ•°æ®åº“ä»¥åŠå®ƒçš„å®‰è£…è¿‡ç¨‹ï¼ŒåŠé€‚ç”¨åœºæ™¯ï¼Œå·²ç»äº†è§£ï¼ŒRedisæ•°æ®åº“æ˜¯åŸºäºŽå†…å­˜çš„æ•°æ®åº“ï¼Œé€Ÿåº¦æžå¿«ï¼Œæœ¬ç¯‡å°†ä»‹ç»redisæ•°æ®åº“çš„æ“ä½œä½¿ç”¨æ–¹æ³•ï¼ŒRedisæœ‰ä¸ƒç§æ•°æ®ç±»åž‹ï¼šå­—ç¬¦ä¸²ï¼Œå“ˆå¸Œè¡¨ï¼Œé“¾è¡¨ï¼Œé›†åˆå’Œæœ‰åºé›†åˆ String ç±»åž‹ç®€ä»‹Stringæ˜¯æœ€ç®€å•çš„ç±»åž‹ï¼Œå¯ä»¥ç†è§£æˆä¸ŽMemcachedæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ç±»åž‹ï¼Œä¸€ä¸ªKeyå¯¹åº”ä¸€ä¸ªValueï¼Œå¯ä»¥å®Œå…¨å®žçŽ°Memcachedçš„åŠŸèƒ½ï¼Œè€Œä¸”æ•ˆçŽ‡è¦æ¯”Memcachedé«˜å¾ˆå¤šï¼ŒåŒæ—¶å¯ä»¥è®¾ç½®Redisçš„å®šæ—¶æ•°æ®æŒä¹…åŒ–ï¼Œæ“ä½œæ—¥å¿—çš„è®°å½•ä»¥åŠä¸»ä»Žå¤åˆ¶ç­‰åŠŸèƒ½ï¼ æ“ä½œ1. setè®¾ç½®Keyå¯¹åº”çš„å€¼ä¸ºstringç±»åž‹çš„valueã€‚ ä¾‹å¦‚è®¾ç½®ä¸€ä¸ªname = zhangsan çš„é”®å€¼å¯¹ï¼Œå¯ä»¥è¿™æ ·åšï¼š $ redis-cli redis 127.0.0.1:6379&gt; set name zhangsan OK redis 127.0.0.1:6379&gt; get name &quot;zhangsan&quot; redis 127.0.0.1:6379&gt; 2. setnxè®¾ç½®key å¯¹åº”çš„å€¼ä¸ºstring ç±»åž‹çš„valueã€‚å¦‚æžœkey å·²ç»å­˜åœ¨ï¼Œè¿”å›ž0ï¼Œnx æ˜¯not exist çš„æ„æ€ã€‚ ä¾‹å¦‚æ·»åŠ ä¸€ä¸ªname= lisi çš„é”®å€¼å¯¹ï¼Œå¯ä»¥è¿™æ ·åš: redis 127.0.0.1:6379&gt; setnx name lisi (integer) 0 redis 127.0.0.1:6379&gt; get name &quot;lisi&quot; redis 127.0.0.1:6379&gt; ç”±äºŽåŽŸæ¥name æœ‰ä¸€ä¸ªå¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥æœ¬æ¬¡çš„ä¿®æ”¹ä¸ç”Ÿæ•ˆï¼Œä¸”è¿”å›žç æ˜¯0ã€‚ 3. setexè®¾ç½®ä¸€ä¸ªé”®å¯¹åº”çš„å€¼ï¼Œå¹¶å¯¹æ­¤é”®å€¼å¯¹è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸã€‚ ä¾‹å¦‚ï¼šæŒ‡å®šä¸€ä¸ªé”®å€¼å¯¹ result = successï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸä¸º10ç§’ï¼Œæˆ‘ä»¬æ¥è¿™æ ·åšï¼š redis 127.0.0.1:6379&gt; set result 10 success OK redis 127.0.0.1:6379&gt; get result &quot;success&quot; redis 127.0.0.1:6379&gt; get result (nil) redis 127.0.0.1:6379&gt; ç”±äºŽç¬¬äºŒæ¬¡è°ƒç”¨å·²ç»è¶…è¿‡10ç§’ï¼Œæ‰€ä»¥æ— æ³•å–åˆ°resultçš„å€¼äº†ï¼ï¼ï¼ 4. setrangeè®¾ç½®æŒ‡å®šé”®çš„å€¼çš„å­å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼šæˆ‘çŽ°åœ¨è¦æŠŠ gang çš„é‚®ç®± finalsin@foxmail.com æ”¹ä¸º finalsin@sina.com redis 127.0.0.1:6379&gt; get gang &quot;finalsin@foxmail.com&quot; redis 127.0.0.1:6379&gt; setrange gang 9 sina.com (integer) 21 redis 127.0.0.1:6379&gt; get gang &quot;finalsin@sina.com&quot; redis 127.0.0.1:6379&gt; 5. msetåŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ï¼ŒæˆåŠŸè¿”å›žokè¡¨ç¤ºæ‰€æœ‰é”®è®¾ç½®æˆåŠŸï¼Œå¤±è´¥åˆ™è¿”å›ž0è¡¨ç¤ºæ‰€æœ‰é”®è®¾ç½®éƒ½ä¸æˆåŠŸ ä¾‹å¦‚ï¼šåŒæ—¶è®¾ç½® çŽ‹åˆš çš„å¤šä¸ªçˆ±å¥½ï¼š redis 127.0.0.1:6379&gt; mset hobby1 music hobby2 sport hobby3 girl OK redis 127.0.0.1:6379&gt; get hobby1 &quot;music&quot; redis 127.0.0.1:6379&gt; get hobby3 &quot;girl&quot; redis 127.0.0.1:6379&gt; 6. msetnxåŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ï¼ŒåŒæ ·å¤±è´¥è¿”å›ž0è¡¨ç¤ºæ‰€æœ‰é”®éƒ½æ²¡æœ‰è®¾ç½®æˆåŠŸï¼ŒæˆåŠŸè¿”å›žOKè¡¨ç¤ºæ‰€æœ‰é”®éƒ½è®¾ç½®æˆåŠŸï¼Œä½†ä¸åŒäºŽmsetçš„æ˜¯æœ¬æ–¹æ³•ä¸ä¼šè®¾ç½®å·²ç»å­˜åœ¨çš„é”®å€¼å¯¹ï¼ redis 127.0.0.1:6379&gt; get hobby1 &quot;music&quot; redis 127.0.0.1:6379&gt; get hobby3 &quot;girl&quot; redis 127.0.0.1:6379&gt; msetnx hobby1 tingge hobby4 hejiu (integer) 0 redis 127.0.0.1:6379&gt; get hobby4 (nil) redis 127.0.0.1:6379&gt; get hobby3 &quot;girl&quot; å¯ä»¥çœ‹å‡ºå¦‚æžœè¿™æ¡å‘½ä»¤è¿”å›ž0ï¼Œé‚£ä¹ˆé‡Œé¢æ“ä½œéƒ½ä¼šå›žæ»šï¼Œéƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚ 7. getèŽ·å–æŸä¸ªé”®å¯¹åº”çš„å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™è¿”å›ž nil redis 127.0.0.1:6379&gt; get hobby4 (nil) redis 127.0.0.1:6379&gt; get hobby3 &quot;girl&quot; å¦‚ä¸Šä¾‹ï¼Œhobby3å­˜åœ¨ï¼Œå¹¶ä¸”å€¼ä¸ºâ€girlâ€ï¼Œhobby4ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ž nil 8. getsetè®¾ç½®æŸä¸€ä¸ªé”®çš„å€¼ï¼Œå¹¶ä¸”è¿”å›žè¯¥é”®çš„æ—§å€¼ï¼Œå¦‚æžœè¯¥é”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ž nilï¼Œç„¶åŽå†è®¾ç½®æ–°çš„å€¼ ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; getset hobby4 football (nil) redis 127.0.0.1:6379&gt; getset hobby3 basketball &quot;girl&quot; redis 127.0.0.1:6379&gt; get hobby4 &quot;football&quot; redis 127.0.0.1:6379&gt; get hobby3 &quot;basketball&quot; 9. getrangeèŽ·å–æŒ‡å®šé”®çš„å€¼çš„å­å­—ç¬¦ä¸² ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; getrange gang 0 7 &quot;finalsin&quot; redis 127.0.0.1:6379&gt; getrange gang -8 -1 &quot;sina.com&quot; redis 127.0.0.1:6379&gt; getrange gang 0 100 &quot;finalsin@sina.com&quot; ä¸Šä¾‹ä¸­ï¼Œgetrange jiege 0 4 è¡¨ç¤ºèŽ·å– jiege è¿™ä¸ªé”®çš„å€¼çš„ä¸‹æ ‡ä¸º 0~4 çš„æ‰€æœ‰å­—ç¬¦ åŒæ ·ï¼Œgetrange jiege -15 -1 è¡¨ç¤ºèŽ·å– jiege è¿™ä¸ªé”®çš„å€¼çš„ä¸‹æ ‡ä»ŽåŽæ•°ç¬¬15ä¸ªåˆ°æœ€åŽä¸€ä¸ªçš„æ‰€æœ‰å­—ç¬¦ è€Œ getrange jiege 0 100 åˆ™è¡¨ç¤ºå…¨éƒ¨è¾“å‡º jiege è¿™ä¸ªé”®çš„å€¼çš„æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºæœ€åŽä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡ å°äºŽ 100ï¼Œ å½“ä¸‹æ ‡è¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œå°†é»˜è®¤ä¸ºæ˜¯åŒæ–¹å‘çš„æœ€å¤§ä¸‹æ ‡ã€‚ 10. mgetä¸€æ¬¡æ€§èŽ·å–å¤šä¸ªé”®çš„å€¼ï¼Œå¦‚æžœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ž nil ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; mget hobby1 hobby2 hobby5 1) &quot;music&quot; 2) &quot;sport&quot; 3) (nil) redis 127.0.0.1:6379&gt; hobby5ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è¿”å›žnilã€‚ 11. incrå¯¹ä¸€ä¸ªé”®çš„å€¼åšåŠ åŠ æ“ä½œï¼Œå¹¶è¿”å›žæ–°çš„å€¼ï¼Œå¦‚æžœè¯¥é”®çš„å€¼ç±»åž‹ä¸æ˜¯intç±»åž‹ï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¦‚æžœè¯¥é”®ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®è¯¥é”®ä¸º1 ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; set age 20 OK redis 127.0.0.1:6379&gt; incr age (integer) 21 redis 127.0.0.1:6379&gt; get age &quot;21&quot; redis 127.0.0.1:6379&gt; get age1 (nil) redis 127.0.0.1:6379&gt; incr age1 (integer) 1 redis 127.0.0.1:6379&gt; get age1 &quot;1&quot; 12. incrbyç±»ä¼¼äºŽincrï¼Œä½†æ˜¯incrbyå¯ä»¥æŒ‡å®šå¢žåŠ çš„å€¼ ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; incrby age 5 (integer) 26 redis 127.0.0.1:6379&gt; get age &quot;26&quot; redis 127.0.0.1:6379&gt; incrby age -1 (integer) 25 redis 127.0.0.1:6379&gt; get age &quot;25&quot; å¯ä»¥çœ‹åˆ°ï¼Œ5ä»£è¡¨ç»™ageé”®å¢žåŠ 5ï¼Œè€Œ-1è¡¨ç¤ºç»™ageé”®å‡1ï¼Œå³æ­£æ•°ä¸ºåŠ ï¼Œè´Ÿæ•°ä¸ºå‡ 13. decrå¯¹æŸä¸€ä¸ªé”®åšå‡å‡æ“ä½œï¼ŒåŒincr ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; set age 20 OK redis 127.0.0.1:6379&gt; decr age (integer) 19 redis 127.0.0.1:6379&gt; get age &quot;19&quot; redis 127.0.0.1:6379&gt; get age1 (nil) redis 127.0.0.1:6379&gt; decr age1 (integer) -1 redis 127.0.0.1:6379&gt; get age1 &quot;-1&quot; 14. decrbyåŒincrbyï¼Œç»™æŸä¸€é”®å‡åŽ»æŒ‡å®šçš„å€¼ redis 127.0.0.1:6379&gt; decrby age 5 (integer) 14 redis 127.0.0.1:6379&gt; get age &quot;14&quot; decrby å®Œå…¨æ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡incrby ä¸€ä¸ªè´Ÿå€¼æ¥å®žçŽ°åŒæ ·æ•ˆæžœï¼Œåä¹‹ä¸€æ ·ã€‚ 15. appendç»™æŒ‡å®škey çš„å­—ç¬¦ä¸²å€¼è¿½åŠ value,è¿”å›žæ–°å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚ ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; set name wanggang OK redis 127.0.0.1:6379&gt; get name &quot;wanggang&quot; redis 127.0.0.1:6379&gt; append name @wg.org (integer) 15 redis 127.0.0.1:6379&gt; get name &quot;wanggang@wg.org&quot; 16. strlenå–æŒ‡å®škey çš„value å€¼çš„é•¿åº¦ã€‚ ä¾‹å¦‚ï¼š redis 127.0.0.1:6379&gt; get name &quot;wanggang@wg.org&quot; redis 127.0.0.1:6379&gt; strlen name (integer) 15 redis 127.0.0.1:6379&gt; get age &quot;20&quot; redis 127.0.0.1:6379&gt; strlen age (integer) 2 å¥½äº†ï¼Œè¿™å°±æ˜¯Stringç±»åž‹çš„æ‰€æœ‰æ“ä½œ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[redis æ•´ç†ï¼ˆä¸€ï¼‰ç®€ä»‹åŠå®‰è£…]]></title>
      <url>%2F2014%2F08%2F06%2Fredis-introduction-install%2F</url>
      <content type="text"><![CDATA[NoSQL ç®€ä»‹NoSQLæ›´æ³¨é‡çš„æ˜¯å¯¹æµ·é‡æ•°æ®å­˜å–çš„æ€§èƒ½ã€åˆ†å¸ƒå¼ã€æ‰©å±•æ€§æ”¯æŒä¸Šï¼Œå¹¶ä¸éœ€è¦ä¼ ç»Ÿå…³ç³»æ•°æ®åº“çš„ä¸€äº›ç‰¹å¾ï¼Œä¾‹å¦‚ï¼šSchemaã€äº‹åŠ¡ã€å®Œæ•´SQLæŸ¥è¯¢æ”¯æŒç­‰ç­‰ï¼Œå› æ­¤åœ¨åˆ†å¸ƒå¼çŽ¯å¢ƒä¸‹çš„æ€§èƒ½ç›¸å¯¹ä¸Žä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“æœ‰è¾ƒå¤§çš„æå‡ã€‚Rediså°±æ˜¯NoSQLè¿™ä¸ªå¤§å®¶æ—ä¸­çš„ä¸€ä»½å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºŽå†…å­˜ä¹Ÿå¯æŒä¹…åŒ–çš„æ—¥å¿—åž‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚ Redis ç®€ä»‹Redis is an open source, BSD licensed, advanced key-value cache and store. It is often referred to as a data structure server since keys can contain strings, hashes, lists, sets, sorted sets, bitmaps and hyperloglogs. Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œé«˜çº§çš„é”®å€¼å¼å­˜å‚¨æ•°æ®åº“ã€‚å®ƒé€šå¸¸è¢«ç§°ä¸ºä¸€ä¸ªæ•°æ®ç»“æž„æœåŠ¡å™¨å¯ä»¥åŒ…å«å­—ç¬¦ä¸²ï¼Œå“ˆå¸Œè¡¨ï¼Œé“¾è¡¨ï¼Œé›†åˆå’Œæœ‰åºé›†åˆã€‚ ä¸ºäº†å®žçŽ°å…¶å‡ºè‰²çš„è¡¨çŽ°ï¼ŒRedisæ˜¯å·¥ä½œåœ¨å†…å­˜ä¸­çš„æ•°æ®é›†ã€‚æ‚¨è¿˜å¯ä»¥æ ¹æ®æ‚¨çš„å…·ä½“çš„ä½¿ç”¨æƒ…å†µï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æˆ–æ‰§è¡Œå‘½ä»¤æ—¶å°†æ•°æ®é›†å†™å…¥åˆ°ç£ç›˜ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ—¥å¿—ä¸­ã€‚Redisè¿˜æ”¯æŒä¸»ä»Žå¤åˆ¶ï¼Œå¹¶ä¸”é…ç½®èµ·æ¥å¾ˆç®€å•ï¼Œç¬¬ä¸€æ¬¡åŒæ­¥å°±å¯ä»¥æ— é˜»å¡žçš„è¾¾åˆ°æžå¿«çš„é€Ÿåº¦ï¼Œåœ¨ç½‘ç»œæ–­å¼€çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨é‡è¿žç­‰ç­‰ã€‚å¦å¤–å®ƒçš„ç®€å•çš„æ£€æŸ¥ä¸Žè®¾ç½®æœºåˆ¶ï¼Œå‘å¸ƒ(Publish)ä¸Žè®¢é˜…(Subscribe)å’Œé…ç½®è®¾ç½®çš„ç‰¹æ€§ä½¿å®ƒçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªç¼“å­˜ã€‚ Redis é€‚ç”¨åœºæ™¯1ã€å–æœ€æ–°N ä¸ªæ•°æ®çš„æ“ä½œæ¯”å¦‚å…¸åž‹çš„å–ä½ ç½‘ç«™çš„æœ€æ–°æ–‡ç« ï¼Œé€šè¿‡ä¸‹é¢æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€æ–°çš„5000 æ¡è¯„è®ºçš„ID æ”¾åœ¨Redis çš„List é›†åˆä¸­ï¼Œå¹¶å°†è¶…å‡ºé›†åˆéƒ¨åˆ†ä»Žæ•°æ®åº“èŽ·å–ã€‚ 2ã€æŽ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP N æ“ä½œè¿™ä¸ªéœ€æ±‚ä¸Žä¸Šé¢éœ€æ±‚çš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œå‰é¢æ“ä½œä»¥æ—¶é—´ä¸ºæƒé‡ï¼Œè¿™ä¸ªæ˜¯ä»¥æŸä¸ªæ¡ä»¶ä¸ºæƒé‡ï¼Œæ¯”å¦‚æŒ‰é¡¶çš„æ¬¡æ•°æŽ’åºï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„sorted set å‡ºé©¬äº†ï¼Œå°†ä½ è¦æŽ’åºçš„å€¼è®¾ç½®æˆsorted set çš„scoreï¼Œå°†å…·ä½“çš„æ•°æ®è®¾ç½®æˆç›¸åº”çš„valueï¼Œæ¯æ¬¡åªéœ€è¦æ‰§è¡Œä¸€æ¡ZADD å‘½ä»¤å³å¯ã€‚ 3ã€éœ€è¦ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨æ¯”å¦‚ä½ å¯ä»¥æŠŠä¸Šé¢è¯´åˆ°çš„sorted set çš„score å€¼è®¾ç½®æˆè¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€å•åœ°é€šè¿‡è¿‡æœŸæ—¶é—´æŽ’åºï¼Œå®šæ—¶æ¸…é™¤è¿‡æœŸæ•°æ®äº†ï¼Œä¸ä»…æ˜¯æ¸…é™¤Redis ä¸­çš„è¿‡æœŸæ•°æ®ï¼Œä½ å®Œå…¨å¯ä»¥æŠŠRedis é‡Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å½“æˆæ˜¯å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„ç´¢å¼•ï¼Œç”¨Redis æ¥æ‰¾å‡ºå“ªäº›æ•°æ®éœ€è¦è¿‡æœŸåˆ é™¤ï¼Œç„¶åŽå†ç²¾å‡†åœ°ä»Žæ•°æ®åº“ä¸­åˆ é™¤ç›¸åº”çš„è®°å½•ã€‚ 4ã€è®¡æ•°å™¨åº”ç”¨Redis çš„å‘½ä»¤éƒ½æ˜¯åŽŸå­æ€§çš„ï¼Œä½ å¯ä»¥è½»æ¾åœ°åˆ©ç”¨INCRï¼ŒDECR å‘½ä»¤æ¥æž„å»ºè®¡æ•°å™¨ç³»ç»Ÿã€‚ 5ã€Uniq æ“ä½œï¼ŒèŽ·å–æŸæ®µæ—¶é—´æ‰€æœ‰æ•°æ®æŽ’é‡å€¼è¿™ä¸ªä½¿ç”¨Redis çš„set æ•°æ®ç»“æž„æœ€åˆé€‚äº†ï¼Œåªéœ€è¦ä¸æ–­åœ°å°†æ•°æ®å¾€set ä¸­æ‰”å°±è¡Œäº†ï¼Œset æ„ä¸ºé›†åˆï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨æŽ’é‡ã€‚ 6ã€å®žæ—¶ç³»ç»Ÿï¼Œååžƒåœ¾ç³»ç»Ÿé€šè¿‡ä¸Šé¢è¯´åˆ°çš„set åŠŸèƒ½ï¼Œä½ å¯ä»¥çŸ¥é“ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·æ˜¯å¦è¿›è¡Œäº†æŸä¸ªæ“ä½œï¼Œå¯ä»¥æ‰¾åˆ°å…¶æ“ä½œçš„é›†åˆå¹¶è¿›è¡Œåˆ†æžç»Ÿè®¡å¯¹æ¯”ç­‰ã€‚æ²¡æœ‰åšä¸åˆ°ï¼Œåªæœ‰æƒ³ä¸åˆ°ã€‚ 7ã€Pub/Sub æž„å»ºå®žæ—¶æ¶ˆæ¯ç³»ç»ŸRedis çš„Pub/Sub ç³»ç»Ÿå¯ä»¥æž„å»ºå®žæ—¶çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚å¾ˆå¤šç”¨Pub/Sub æž„å»ºçš„å®žæ—¶èŠå¤©ç³»ç»Ÿçš„ä¾‹å­ã€‚ 8ã€æž„å»ºé˜Ÿåˆ—ç³»ç»Ÿä½¿ç”¨list å¯ä»¥æž„å»ºé˜Ÿåˆ—ç³»ç»Ÿï¼Œä½¿ç”¨sorted set ç”šè‡³å¯ä»¥æž„å»ºæœ‰ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ç³»ç»Ÿã€‚ 9ã€ç¼“å­˜è¿™ä¸ªä¸å¿…è¯´äº†ï¼Œæ€§èƒ½ä¼˜äºŽMemcachedï¼Œæ•°æ®ç»“æž„æ›´å¤šæ ·åŒ–ã€‚ Redis å®‰è£…ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½Redisï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç åŒ…ç¬¬äºŒæ­¥ï¼Œå°†ä¸‹è½½å¥½çš„æºä»£ç åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Linuxä¸»æœºä¸­ï¼Œè§£åŽ‹ï¼Œç¼–è¯‘å®‰è£…$ tar zxf redis-2.8.13.tar.gz $ cd redis-2.8.13 $ make $ cd src &amp;&amp; make all ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨redisæœåŠ¡$ src/redis-server ç¬¬å››æ­¥ï¼Œæµ‹è¯•redis$ redisï¼cli redis 127.0.0.1:6379&gt; set foo 123 redis 127.0.0.1:6379&gt; get foo &quot;123&quot; redis 127.0.0.1:6379&gt; exit RedisæœåŠ¡å™¨çš„ç«¯å£é»˜è®¤æ˜¯6379ï¼Œä½†æ˜¯ä½ ä¼šå‘çŽ°RedisæœåŠ¡ä¼šä¸€ç›´å ç”¨æˆ‘ä»¬å½“å‰ç™»å½•Linuxçš„SESSIONï¼Œé‚£èƒ½å¦åƒMysqlæˆ–è€…æ˜¯MongoDBä¸€æ ·åœ¨åŽå°æ‰§è¡ŒRedisè¿›ç¨‹å‘¢ï¼Œå½“ç„¶å¯ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ”¹Redisçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”å¯åŠ¨çš„æ—¶å€™æŒ‡å®šé…ç½®æ–‡ä»¶å³å¯ï¼ å¦‚æžœæ˜¯ä¸€ä¸ªä¸“ä¸šçš„DBAï¼Œé‚£ä¹ˆå®žä¾‹å¯åŠ¨æ—¶ä¼šåŠ å¾ˆå¤šå‚æ•°ä»¥ä¾¿æ˜¯ç³»ç»Ÿè¿è¡Œçš„éžå¸¸ç¨³å®šï¼Œè¿™æ ·å°±å¯èƒ½åœ¨å¯åŠ¨æ—¶åœ¨RedisåŽé¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œä»¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œå°±åƒmysqlä¸€æ ·çš„è¯»å–å¯åŠ¨é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥å¯åŠ¨æ•°æ®åº“ã€‚ Redisçš„é…ç½®æ–‡ä»¶redis.confé‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼š #æ˜¯å¦ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œ daemonize yes #é…ç½® pid çš„å­˜æ”¾è·¯å¾„åŠæ–‡ä»¶å,é»˜è®¤ä¸ºå½“å‰è·¯å¾„ä¸‹ pidfile redis.pid #Redis é»˜è®¤ç›‘å¬ç«¯å£ port 6379 #å®¢æˆ·ç«¯é—²ç½®å¤šå°‘ç§’åŽ,æ–­å¼€è¿žæŽ¥ timeout 300 #æ—¥å¿—æ˜¾ç¤ºçº§åˆ« loglevel verbose #æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶å,ä¹Ÿå¯æŒ‡å®šåˆ°æ ‡å‡†è¾“å‡ºç«¯å£ logfile stdout #è®¾ç½®æ•°æ®åº“çš„æ•°é‡,é»˜è®¤è¿žæŽ¥çš„æ•°æ®åº“æ˜¯ 0,å¯ä»¥é€šè¿‡ select N æ¥è¿žæŽ¥ä¸åŒçš„æ•°æ®åº“ databases 16 #ä¿å­˜æ•°æ®åˆ° disk çš„ç­–ç•¥ #å½“æœ‰ä¸€æ¡ Keys æ•°æ®è¢«æ”¹å˜æ˜¯,900 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡ save 900 1 #å½“æœ‰ 10 æ¡ Keys æ•°æ®è¢«æ”¹å˜æ—¶,300 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡ save 300 10 #å½“æœ‰ 1w æ¡ keys æ•°æ®è¢«æ”¹å˜æ—¶,60 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡ save 60 10000 #å½“ dump .rdb æ•°æ®åº“çš„æ—¶å€™æ˜¯å¦åŽ‹ç¼©æ•°æ®å¯¹è±¡ rdbcompression yes #dump æ•°æ®åº“çš„æ•°æ®ä¿å­˜çš„æ–‡ä»¶å dbfilename dump.rdb #Redis çš„å·¥ä½œç›®å½• dir /home/falcon/redis-2.0.0/ ########### Replication ##################### #Redis çš„å¤åˆ¶é…ç½® # slaveof &lt;masterip&gt; &lt;masterport&gt; # masterauth &lt;master-password&gt; ############## SECURITY ########### # requirepass foobared ############### LIMITS ############## #æœ€å¤§å®¢æˆ·ç«¯è¿žæŽ¥æ•° # maxclients 128 #æœ€å¤§å†…å­˜ä½¿ç”¨çŽ‡ # maxmemory &lt;bytes&gt; ########## APPEND ONLY MODE ######### #æ˜¯å¦å¼€å¯æ—¥å¿—åŠŸèƒ½ appendonly no # åˆ·æ–°æ—¥å¿—åˆ° disk çš„è§„åˆ™ # appendfsync always appendfsync everysec # appendfsync no ################ VIRTUAL MEMORY ########### #æ˜¯å¦å¼€å¯ VM åŠŸèƒ½ vm-enabled no # vm-enabled yes vm-swap-file logs/redis.swap vm-max-memory 0 vm-page-size 32 vm-pages 134217728 vm-max-threads 4 ############# ADVANCED CONFIG ############### glueoutputbuf yes hash-max-zipmap-entries 64 hash-max-zipmap-value 512 #æ˜¯å¦é‡ç½® Hash è¡¨ activerehashing yes å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¡å°±æ˜¯å¯åŠ¨åŽå°è¿›ç¨‹å¯åŠ¨RedisæœåŠ¡ï¼Œå°†å…¶è®¾ç½®ä¸ºyesï¼Œå°±ä¼šåœ¨åŽå°è¿è¡ŒRedisæœåŠ¡ï¼ å¯åŠ¨çš„æ—¶å€™æ¥æŒ‡å®šredisçš„é…ç½®æ–‡ä»¶ $ /usr/local/redis/bin/redis-server /usr/local/redis/redis.conf å¼€æœºå¯åŠ¨1.é…ç½®å°†ä»¥ä¸‹ä»£ç å­˜ä¸ºredis,æ”¾åˆ°/etc/init.d/ä¸‹é¢,æ³¨æ„ä¿®æ”¹ç›¸åº”çš„è·¯å¾„ # # chkconfig: - 90 10 # description: Redis is an open source, advanced key-value store. # # processname: redis-server # config: /etc/redis.conf # pidfile: /var/run/redis.pid PATH=/usr/local/bin:/sbin:/usr/bin:/bin REDISPORT=6379 EXEC=/usr/local/bin/redis-server REDIS_CLI=/usr/local/bin/redis-cli PIDFILE=/var/run/redis.pid CONF=&quot;/etc/redis.conf&quot; case &quot;$1&quot; in start) if [ -f $PIDFILE ] then echo -n &quot;$PIDFILE exists, process is already running or crashed\n&quot; else echo -n &quot;Starting Redis server...\n&quot; $EXEC $CONF fi ;; stop) if [ ! -f $PIDFILE ] then echo -n &quot;$PIDFILE does not exist, process is not running\n&quot; else PID=$(cat $PIDFILE) echo -n &quot;Stopping ...\n&quot; $REDIS_CLI -p $REDISPORT SHUTDOWN while [ -x ${PIDFILE} ] do echo &quot;Waiting for Redis to shutdown ...&quot; sleep 1 done echo &quot;Redis stopped&quot; fi ;; esac 2.ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™$ chmod a+x /etc/init.d/redis 3.è®¾å®šå¼€æœºå¯åŠ¨$ chkconfig redis on 4.å¯åŠ¨ï¼Œåœæ­¢redisæœåŠ¡$ service redis start #æˆ–è€… /etc/init.d/redis start $ service redis stop #æˆ–è€… /etc/init.d/redis stop]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS æœåŠ¡å™¨ç«¯å–æ¶ˆ httpsçš„é…ç½® æ–¹æ³•]]></title>
      <url>%2F2014%2F07%2F14%2Fcas-disable-ssl%2F</url>
      <content type="text"><![CDATA[éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶æœ‰ï¼šWEB-INF/deployerConfigContext.xml ã€ WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml ã€WEB-INF\spring-configuration\warnCookieGenerator.xml è¯¦ç»†é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š 1 ã€ WEB-INF/deployerConfigContext.xml åœ¨&lt; bean class = &quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; p:httpClient-ref = &quot;httpClient&quot; /&gt; å¢žåŠ å‚æ•° p:requireSecure=â€falseâ€ ï¼Œæ˜¯å¦éœ€è¦å®‰å…¨éªŒè¯ï¼Œå³ HTTPS ï¼Œ false ä¸ºä¸é‡‡ç”¨ å¦‚ä¸‹ï¼š &lt; bean class = &quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; p:httpClient-ref = &quot;httpClient&quot; p:requireSecure= &quot;false&quot; /&gt; 2 ã€ WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml ä¿®æ”¹ p:cookieSecure=â€trueâ€ ä¸º p:cookieSecure=â€ false â€œ ï¼Œ å³ä¸éœ€è¦å®‰å…¨ cookie å¦‚ä¸‹éƒ¨åˆ†ï¼š&lt; bean id = &quot;ticketGrantingTicketCookieGenerator&quot; class = &quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&quot; p:cookieSecure = &quot; false &quot; p:cookieMaxAge = &quot;-1&quot; p:cookieName = &quot;CASTGC&quot; p:cookiePath = &quot;/cas&quot; /&gt; 3 ã€ WEB-INF\spring-configuration\warnCookieGenerator.xmlä¿®æ”¹ p:cookieSecure=â€trueâ€ ä¸º p:cookieSecure=â€ false â€œ ï¼Œ å³ä¸éœ€è¦å®‰å…¨ cookie ç»“æžœå¦‚ä¸‹ï¼š &lt; bean id = &quot;warnCookieGenerator&quot; class = &quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&quot; p:cookieSecure = &quot; false &quot; p:cookieMaxAge = &quot;-1&quot; p:cookieName = &quot;CASPRIVACY&quot; p:cookiePath = &quot;/cas&quot; /&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS logout æ³¨é”€]]></title>
      <url>%2F2014%2F07%2F12%2Fcas-logout%2F</url>
      <content type="text"><![CDATA[ç½‘å‹ä¸åœé—®ä¸ºä»€ä¹ˆCAS LogoutåŽï¼Œä»ç„¶èƒ½å¤Ÿè®¿é—®åº”ç”¨ï¼Ÿhttp://dev2dev.bea.com.cn/bbs/thread.jspa?forumID=29304&amp;threadID=37715&amp;messageID=221727#221727 å‡è®¾æœ‰webapp1, webapp2, cas serverï¼Œwebapp1, webapp2å‡å—cas serverä¿æŠ¤ï¼Œé¦–å…ˆï¼Œåœ¨è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼š ç¬¬1ç§ä¸èƒ½logoutçš„æƒ…å†µï¼š ç™»å½•äº†WebApp1ï¼Œredirectåˆ°caserverï¼Œcasserverè®¤è¯åŽï¼Œå†redirectåˆ°webapp1ï¼Œokï¼ httpæ–¹å¼ lougout casserver1ï¼Œå³http://yale_casserver:8080/cas/lougout æ˜¾ç¤ºlogoutæˆåŠŸ è®¿é—®webapp2ï¼Œè¿˜èƒ½è®¿é—®ï¼è¿™æ˜¯éžå¸¸æ­£å¸¸çš„ä¸€ç§æƒ…å†µï¼Œå› ä¸ºä½ ä¸é€šè¿‡httpsæ¥æ³¨é”€ï¼Œcasserveræ€Žä¹ˆâ€æ€â€æŽ‰å®ƒé€šè¿‡httpså‘ç»™ä½ çš„TGC Cookie? ç¬¬2ç§ä¸èƒ½logoutçš„æƒ…å†µï¼š ç™»å½•äº†WebApp1ï¼Œredirectåˆ°caserver,casserverè®¤è¯åŽï¼Œå†redirectåˆ°webapp1ï¼Œokï¼ httpsæ–¹å¼ lougout casserver1ï¼Œå³https://yale_casserver:8443/cas/lougout æ˜¾ç¤ºlogoutæˆåŠŸ è®¿é—®webapp1ï¼Œè¿˜èƒ½è®¿é—®ï¼è®¿é—®webapp2ï¼Œä¸èƒ½è®¿é—®ï¼Œé‡å®šå‘åˆ°casserverè¦æ±‚ç™»å½•ï¼è¿™ä¹Ÿæ˜¯éžå¸¸æ­£å¸¸çš„ä¸€ç§æƒ…å†µï¼Œå› ä¸ºä½ å·²ç»èƒ½å¤Ÿè®¿é—®ï¼Œä½ ç»§ç»­å¯ä»¥ç»§ç»­è®¿é—®ï¼ŒCASLogoutä¸èƒ½é˜»æ­¢ä½ è®¿é—®webapp1ï¼Œå®ƒåªèƒ½é˜»æ­¢ä½ è®¿é—®webapp2ï¼Œå› ä¸ºä½ å·²ç»è¢«å…è®¸è®¿é—®webapp1ï¼Œè€Œwebapp2åˆ™è¿˜æ²¡æœ‰ï¼Œå¦‚æžœä½ åœ¨(1)çš„æ—¶å€™ï¼Œé¡ºå¸¦ä¹Ÿè®¿é—®webapp2ï¼Œé‚£ä¹ˆä½ çš„æ³¨é”€å°†æ¯«æ— ä½œç”¨äº†ï¼ŒCASæ— æ³•é˜»æ­¢ä½ è®¿é—®è¿™ä¸¤ä¸ªwebappï¼Œå› ä¸ºä½ æœ‰Service Ticketã€‚ å¦‚æžœä½ å¯¹æ­¤è´¹è§£ï¼Œé‚£æ—¶å› ä¸ºä½ å·²ä¸ºLogoutå°±æ˜¯é€€å‡ºç³»ç»Ÿï¼Œé‚£æˆ‘åªèƒ½è¡¨ç¤ºé—æ†¾ï¼Œå› ä¸ºCAS Logoutçš„ä½œç”¨ä¸æ˜¯è¿™æ ·ï¼Œå®ƒçš„ä½œç”¨æ˜¯é˜»æ­¢ä½ ç»§ç»­é€šè¿‡TGCï¼ˆå®ƒç®€å•åœ°æ¸…æ¥šäº†IEçš„TGC Cookieï¼‰æ¥èŽ·å–STï¼Œé˜»æ­¢ä½ èŽ·å–é€šå‘å…¶ä»–webåº”ç”¨çš„Ticketã€‚ æ‰€ä»¥ï¼Œç”¨å®Œwebapp1çš„æ—¶å€™ï¼Œæ³¨é”€ï¼Œç„¶åŽå†å…³é—­æŽ‰IEå°±å½»åº•Logoutäº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[SSOå®žçŽ°æœºåˆ¶:Cookieæœºåˆ¶å’ŒSessionæœºåˆ¶]]></title>
      <url>%2F2014%2F07%2F11%2Fcas-implementation-mechanism-cookie-session%2F</url>
      <content type="text"><![CDATA[SSO çš„å®žçŽ°æœºåˆ¶ä¸å°½ç›¸åŒï¼Œå¤§ä½“åˆ†å¯ä¸º Cookie æœºåˆ¶å’Œ Session æœºåˆ¶ä¸¤å¤§ç±»ã€‚ WebLogic é€šè¿‡ Session å…±äº«è®¤è¯ä¿¡æ¯ã€‚ Session æ˜¯ä¸€ç§æœåŠ¡å™¨ç«¯æœºåˆ¶ï¼Œå½“å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæƒŸä¸€çš„ SessionID ï¼Œä»¥ä½¿åœ¨æ•´ä¸ªäº¤äº’è¿‡ç¨‹ä¸­å§‹ç»ˆä¿æŒçŠ¶æ€ï¼Œè€Œäº¤äº’çš„ä¿¡æ¯åˆ™å¯ç”±åº”ç”¨è‡ªè¡ŒæŒ‡å®šï¼Œå› æ­¤ ç”¨ Session æ–¹å¼å®žçŽ° SSO ï¼Œä¸èƒ½åœ¨å¤šä¸ªæµè§ˆå™¨ä¹‹é—´å®žçŽ°å•ç‚¹ç™»å½•ï¼Œä½†å´å¯ä»¥è·¨åŸŸ ã€‚ WebSphere é€šè¿‡ Cookie è®°å½•è®¤è¯ä¿¡æ¯ã€‚ Cookie æ˜¯ä¸€ç§å®¢æˆ·ç«¯æœºåˆ¶ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹ä¸»è¦åŒ…æ‹¬ : åå­—ã€å€¼ã€è¿‡æœŸæ—¶é—´ã€è·¯å¾„å’ŒåŸŸï¼Œè·¯å¾„ä¸ŽåŸŸåˆåœ¨ä¸€èµ·å°±æž„æˆäº† Cookie çš„ä½œç”¨èŒƒå›´ï¼Œå› æ­¤ ç”¨ Cookie æ–¹å¼å¯å®žçŽ° SSO ï¼Œä½†åŸŸåå¿…é¡»ç›¸åŒ ã€‚ ç›®å‰ å¤§éƒ¨åˆ† SSO äº§å“é‡‡ç”¨çš„æ˜¯ Cookie æœºåˆ¶ã€‚ ç›®å‰èƒ½å¤Ÿæ‰¾åˆ°çš„æœ€å¥½çš„å¼€æºå•ç‚¹ç™»å½•äº§å“ CAS ä¹Ÿæ˜¯é‡‡ç”¨ Cookie æœºåˆ¶ã€‚ CAS å•ç‚¹ç™»å½•ç³»ç»Ÿæœ€æ—©ç”±è€¶é²å¤§å­¦å¼€å‘ã€‚ 2004 å¹´ 12 æœˆï¼Œ CAS æˆä¸º JA-SIG ä¸­çš„ä¸€ä¸ªé¡¹ç›®ã€‚ JA-SIG çš„å…¨ç§°æ˜¯ Java Architectures Special Interest Group ï¼Œæ˜¯åœ¨é«˜æ ¡ä¸­æŽ¨å¹¿å’ŒæŽ¢è®¨åŸºäºŽ Java çš„å¼€æºæŠ€æœ¯çš„ä¸€ä¸ªç»„ç»‡ã€‚ CAS çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚è®¾è®¡ç†å¿µå…ˆè¿›ã€ä½“ç³»ç»“æž„åˆç†ã€é…ç½®ç®€å•ã€å®¢æˆ·ç«¯æ”¯æŒå¹¿æ³›ã€æŠ€æœ¯æˆç†Ÿç­‰ç­‰ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS ç™»å½•æµç¨‹httpwatchè§£æž]]></title>
      <url>%2F2014%2F07%2F10%2Fcas-login-flow-httpwatch%2F</url>
      <content type="text"><![CDATA[cas sso ç™»å½•æµç¨‹è§£æžï¼Œä½¿ç”¨httpwatchæŸ¥çœ‹ 1. ç¬¬ä¸€æ¬¡è®¿é—® http://localhost:8080/aCLIENTï¼šæ²¡ç¥¨æ®ä¸”SESSIONä¸­æ²¡æœ‰Assertionæ‰€ä»¥è·³è½¬è‡³CAS CASï¼šæ‹¿ä¸åˆ°TGCæ•…è¦æ±‚ç”¨æˆ·ç™»å½• 2. è®¤è¯æˆåŠŸåŽå›žè·³CASï¼šé€šè¿‡TGTç”ŸæˆSTå‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¿å­˜TGCï¼Œå¹¶é‡å®šå‘åˆ°http://localhost:8080/a CLIENTï¼šå¸¦æœ‰ç¥¨æ®æ‰€ä»¥ä¸è·³è½¬åªæ˜¯åŽå°å‘ç»™CASéªŒè¯ç¥¨æ®ï¼ˆæµè§ˆå™¨ä¸­æ— æ³•çœ‹åˆ°è¿™ä¸€è¿‡ç¨‹ï¼‰ 3. ç¬¬ä¸€æ¬¡è®¿é—® http://localhost:8080/bCLIENTï¼šæ²¡ç¥¨æ®ä¸”SESSIONä¸­æ²¡æœ‰æ¶ˆæ¯æ‰€ä»¥è·³è½¬è‡³CAS CASï¼šä»Žå®¢æˆ·ç«¯å–å‡ºTGCï¼Œå¦‚æžœTGCæœ‰æ•ˆåˆ™ç»™ç”¨æˆ·STå¹¶åŽå°éªŒè¯STï¼Œä»Žè€ŒSSOã€‚ã€å¦‚æžœå¤±æ•ˆé‡ç™»å½•æˆ–æ³¨é”€æ—¶ï¼Œæ€Žä¹ˆé€šçŸ¥å…¶å®ƒç³»ç»Ÿæ›´æ–°SESSIONä¿¡æ¯å‘¢ï¼Ÿï¼ŸTicketGrantingTicketImplç±»grantServiceTicketæ–¹æ³•é‡Œthis.services.put(id, service);å¯è§CASç«¯å·²ç»è®°å½•äº†å½“å‰ç™»å½•çš„å­ç³»ç»Ÿã€‘ 4. å†æ¬¡è®¿é—® http://localhost:8080/aCLIENTï¼šæ²¡ç¥¨æ®ä½†æ˜¯SESSIONä¸­æœ‰(Assertion)æ¶ˆæ¯æ•…ä¸è·³è½¬ä¹Ÿä¸ç”¨å‘CASéªŒè¯ç¥¨æ®ï¼Œå…è®¸ç”¨æˆ·è®¿é—® CAS Authentication Filterè®¤è¯ï¼š if (CommonUtils.isBlank(ticket) &amp;&amp; request.setAttribute(CONST_CAS_ASSERTION, assertion)== null &amp;&amp; !wasGatewayed) { //å³æ²¡æœ‰ç¥¨æ®ä¸”æ²¡æœ‰SESSIONé€šè¿‡ä¿¡æ¯åˆ™è·³è½¬ } CAS Validation Filterè®¤è¯ï¼š if (CommonUtils.isNotBlank(ticket)) { //å³å¦‚æžœå‘çŽ°STåˆ™å‘ç»™CASè®¤è¯ï¼Œå¦åˆ™ä¸è®¤è¯ã€‚ final Assertion assertion = this.ticketValidator.validate( ticket, constructServiceUrl(request, response)); request.setAttribute(CONST_CAS_ASSERTION, assertion);//è®¤è¯é€šè¿‡åŽå°†ä¿¡æ¯ä¿å­˜SESSIONä¸­ }]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶]]></title>
      <url>%2F2014%2F07%2F08%2Fcas-server-config%2F</url>
      <content type="text"><![CDATA[CAS æœåŠ¡å™¨ç«¯ä¸»è¦é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š login-webflow.xmlï¼šå…¶ä¸­å†…å®¹æŒ‡å®šäº†å½“è®¿é—®cas/loginæ—¶çš„ç¨‹åºæµç¨‹ï¼Œåˆå§‹â€œinitialFlowSetupâ€ cas-servlet.xmlï¼šservletä¸Žclasså¯¹åº”å…³ç³» deployerConfigContext.xmlï¼šè®¤è¯ç®¡ç†å™¨ç›¸å…³ cas.propertiesï¼šç³»ç»Ÿå±žæ€§è®¾ç½® applicationContext.xmlï¼šç³»ç»Ÿå±žæ€§ç›¸å…³ argumentExtractorsConfiguration.xmlï¼šä¸æ˜¯å¾ˆäº†è§£å®ƒçš„ç”¨é€” ticketExpirationPolicies.xmlï¼šticketè¿‡æœŸæ—¶é—´è®¾ç½® ticketGrantingTicketCookieGenerator.xmlï¼šTGT cookieå±žæ€§ç›¸å…³ï¼Œæ˜¯å¦æ”¯æŒhttpä¹Ÿåœ¨è¿™å„¿ä¿®æ”¹ ticketRegistry.xmlï¼šä¿å­˜ticketçš„ç±»ç›¸å…³è®¾ç½® uniqueIdGenerators.xmlï¼šticketè‡ªåŠ¨ç”Ÿæˆç±»è®¾ç½® warnCookieGenerator.xmlï¼šåŒticketGrantingTicketCookieGenerator.xmlï¼Œç”Ÿæˆçš„ cookieåä¸ºCASPRIVACY /login ï¼šå½“è®¿é—®/loginæ—¶ï¼Œä¼šè°ƒç”¨login-webflow.xmlä¸­çš„æµç¨‹å›¾ï¼š ##/serviceValidate:å¯¹åº”çš„å¤„ç†ç±»æ˜¯org.jasig.cas.web.ServiceValidateControllerï¼Œä¸»è¦è´Ÿè´£å¯¹service ticketçš„éªŒè¯ï¼Œå¤±è´¥è¿”å›žcasServiceValidationFailure.jspï¼ŒæˆåŠŸè¿”å›žcasServiceValidationSuccess.jspå¯¹service ticketçš„éªŒè¯æ˜¯é€šè¿‡clientç«¯å‘serverç«¯å‘é€httpï¼ˆæˆ–httpsï¼‰å®žçŽ°çš„é€»è¾‘ï¼š é€šè¿‡ç”±clientç«¯ä¼ æ¥çš„ticketåˆ°DefaultTicketRegistryä¸­èŽ·å–ç¼“å­˜çš„ServiceTicketImplå¯¹è±¡ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦å·²ç»è¿‡æœŸï¼ˆSTè¿‡æœŸæ—¶é—´é»˜è®¤æ˜¯5åˆ†é’Ÿï¼ŒTGTé»˜è®¤æ˜¯2ä¸ªå°æ—¶ï¼Œå¯ä»¥åœ¨ticketExpirationPolicies.xmlä¸­è¿›è¡Œä¿®æ”¹ï¼‰ä»¥åŠä¸Žå½“å‰serviceçš„idæ˜¯å¦ç›¸ä¸€ï¼Œä»¥ä¸Šéƒ½æ»¡è¶³åˆ™è¡¨ç¤ºéªŒè¯é€šè¿‡ã€‚ é€šè¿‡ServiceTicketImplå¯¹è±¡èŽ·å–åˆ°ç™»å½•ä¹‹åŽçš„Authenticationå¯¹è±¡ï¼Œå€ŸåŠ©äºŽå®ƒç”ŸæˆImmutableAssertionImplå¯¹è±¡å¹¶è¿”å›ž æˆåŠŸè¿”å›ž CASæ•°æ®æµç¨‹Credentialsâ€“&gt;Principalâ€“&gt;Authentication å®šä¹‰è‡ªå·±çš„AuthenticationHandleråœ¨ä¸­å¿ƒè®¤è¯è¿›è¡Œè®¤è¯çš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨deployerConfigContext.xmlä¸­è®¾ç½®çš„AuthenticationHandleræ¥è¿›è¡Œè®¤è¯å·¥ä½œã€‚ &lt;property name=&quot;authenticationHandlers&quot;&gt; &lt;list&gt; &lt;!-- This is the authentication handler that authenticates services by means of callback via SSL, thereby validating a server side SSL certificate. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; p:httpClient-ref=&quot;httpClient&quot; /&gt; &lt;!-- This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS into production. The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials where the username equals the password. You will need to replace this with an AuthenticationHandler that implements your local authentication strategy. You might accomplish this by coding a new such handler and declaring edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot; /&gt; &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasAuthenticationHandler&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;casDataSource&quot; /&gt; &lt;/bean&gt; &lt;/list &lt;/property&gt; &lt;property name=&quot;authenticationHandlers&quot;&gt; &lt;list&gt; &lt;!-- This is the authentication handler that authenticates services by means of callback via SSL, thereby validating a server side SSL certificate. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; p:httpClient-ref=&quot;httpClient&quot; /&gt; &lt;!-- This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS into production. The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials where the username equals the password. You will need to replace this with an AuthenticationHandler that implements your local authentication strategy. You might accomplish this by coding a new such handler and declaring edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot; /&gt; &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasAuthenticationHandler&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;casDataSource&quot; /&gt; &lt;/bean&gt; &lt;/list&gt; &lt;/property&gt; å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†3ä¸ªAuthenticationHandlerï¼Œè¿™æ­£æ˜¯CASçš„ä¸€ä¸ªï¼Œé€šè¿‡é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å®žçŽ°é’ˆå¯¹ä¸åŒçš„åº”ç”¨æä¾›ä¸åŒçš„è®¤è¯æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥å®žçŽ°ä»»æ„çš„ä¸­å¿ƒè®¤è¯ã€‚å†æ¥çœ‹çœ‹AuthenticationHandlerçš„ä»£ç  /** * Method to determine if the credentials supplied are valid. * * @param credentials The credentials to validate. * @return true if valid, return false otherwise. * @throws AuthenticationException An AuthenticationException can contain * details about why a particular authentication request failed. */ boolean authenticate(Credentials credentials) throws AuthenticationException; /** * Method to check if the handler knows how to handle the credentials * provided. It may be a simple check of the Credentials class or something * more complicated such as scanning the information contained in the * Credentials object. * * @param credentials The credentials to check. * @return true if the handler supports the Credentials, false othewrise. */ boolean supports(Credentials credentials); /** * Method to determine if the credentials supplied are valid. * * @param credentials The credentials to validate. * @return true if valid, return false otherwise. * @throws AuthenticationException An AuthenticationException can contain * details about why a particular authentication request failed. */ boolean authenticate(Credentials credentials) throws AuthenticationException; /** * Method to check if the handler knows how to handle the credentials * provided. It may be a simple check of the Credentials class or something * more complicated such as scanning the information contained in the * Credentials object. * * @param credentials The credentials to check. * @return true if the handler supports the Credentials, false othewrise. */ boolean supports(Credentials credentials); æˆ‘ä»¬è¦åšçš„å°±æ˜¯å®žçŽ°è¿™ä¿©ä¸ªæ–¹æ³•è€Œå·²ï¼Œç‰¹åˆ«æé†’ï¼šå¯ä»¥åœ¨cas-servlet.xmlä¸­è®¾ç½®ä½ æ‰€ä½¿ç”¨çš„Credentialsï¼Œå¦‚ä¸‹ï¼šï¼ˆå…¶ä¸­çš„p:formObjectClasså€¼ï¼Œå¦‚æžœä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨UsernamePasswordCredentialsï¼‰ &lt;bean id=&quot;authenticationViaFormAction&quot; class=&quot;org.jasig.cas.web.flow.AuthenticationViaFormAction&quot; p:formObjectClass=&quot;com.goldarmor.live800.cas.Live800CasCredentials&quot; p:centralAuthenticationService-ref=&quot;centralAuthenticationService&quot; p:warnCookieGenerator-ref=&quot;warnCookieGenerator&quot; /&gt; &lt;bean id=&quot;authenticationViaFormAction&quot; class=&quot;org.jasig.cas.web.flow.AuthenticationViaFormAction&quot; p:formObjectClass=&quot;com.goldarmor.live800.cas.Live800CasCredentials&quot; p:centralAuthenticationService-ref=&quot;centralAuthenticationService&quot; p:warnCookieGenerator-ref=&quot;warnCookieGenerator&quot; /&gt; å®šä¹‰è‡ªå·±çš„credentialsToPrincipalResolversé€šè¿‡AuthenticationHandlerçš„è®¤è¯åŽï¼Œä¼šè°ƒç”¨åœ¨deployerConfigContext.xmlä¸­é…ç½®çš„credentialsToPrincipalResolversæ¥å¤„ç†Credentialsï¼Œç”ŸæˆPrincipalå¯¹è±¡ï¼š &lt;property name=&quot;credentialsToPrincipalResolvers&quot;&gt; &lt;list&gt; &lt;!-- UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login by default and produces SimplePrincipal instances conveying the username from the credentials. If you&apos;ve changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the Credentials you are using. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver&quot; /&gt; &lt;!-- HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials. It supports the CAS 2.0 approach of authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a SimpleService identified by that callback URL. If you are representing services by something more or other than an HTTPS URL whereat they are able to receive a proxy callback, you will need to change this bean declaration (or add additional declarations). --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver&quot; /&gt; &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver&quot;/&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name=&quot;credentialsToPrincipalResolvers&quot;&gt; &lt;list&gt; &lt;!-- UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login by default and produces SimplePrincipal instances conveying the username from the credentials. If you&apos;ve changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the Credentials you are using. --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver&quot; /&gt; &lt;!-- HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials. It supports the CAS 2.0 approach of authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a SimpleService identified by that callback URL. If you are representing services by something more or other than an HTTPS URL whereat they are able to receive a proxy callback, you will need to change this bean declaration (or add additional declarations). --&gt; &lt;bean class=&quot;org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver&quot; /&gt; &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver&quot;/&gt; &lt;/list&gt; &lt;/property&gt; å¦‚ä¸Šï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒå®šä¹‰AuthenticationHandlerä¸€æ ·ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªcredentialsToPrincipalResolversæ¥å¤„ç†Credentialsï¼Œè¿”å›žä½ æ‰€éœ€è¦çš„Principalå¯¹è±¡ï¼Œä¸‹é¢æ¥çœ‹çœ‹credentialsToPrincipalResolversçš„æ–¹æ³•ï¼š /** * Turn Credentials into a Principal object by analyzing the information * provided in the Credentials and constructing a Principal object based on * that information or information derived from the Credentials object. * * @param credentials from which to resolve Principal * @return resolved Principal, or null if the principal could not be resolved. */ Principal resolvePrincipal(Credentials credentials); /** * Determine if a credentials type is supported by this resolver. This is * checked before calling resolve principal. * * @param credentials The credentials to check if we support. * @return true if we support these credentials, false otherwise. */ boolean supports(Credentials credentials); /** * Turn Credentials into a Principal object by analyzing the information * provided in the Credentials and constructing a Principal object based on * that information or information derived from the Credentials object. * * @param credentials from which to resolve Principal * @return resolved Principal, or null if the principal could not be resolved. */ Principal resolvePrincipal(Credentials credentials); /** * Determine if a credentials type is supported by this resolver. This is * checked before calling resolve principal. * * @param credentials The credentials to check if we support. * @return true if we support these credentials, false otherwise. */ boolean supports(Credentials credentials); åœ¨CASéªŒè¯çš„æ—¶å€™ï¼Œé€šè¿‡è®¿é—®/serviceValidateå¯çŸ¥ï¼šéªŒè¯æˆåŠŸä¹‹åŽè¿”å›žçš„casServiceValidationSuccess.jspä¸­çš„æ•°æ®æ¥æºäºŽAssertionï¼Œä¸‹é¢æ¥çœ‹çœ‹å®ƒçš„ä»£ç ï¼š List&lt;Authentication&gt; getChainedAuthentications(); /** * True if the validated ticket was granted in the same transaction as that * in which its grantor GrantingTicket was originally issued. * * @return true if validated ticket was granted simultaneous with its * grantor&apos;s issuance */ boolean isFromNewLogin(); /** * Method to obtain the service for which we are asserting this ticket is * valid for. * * @return the service for which we are asserting this ticket is valid for. */ Service getService(); List&lt;Authentication&gt; getChainedAuthentications(); /** * True if the validated ticket was granted in the same transaction as that * in which its grantor GrantingTicket was originally issued. * * @return true if validated ticket was granted simultaneous with its * grantor&apos;s issuance */ boolean isFromNewLogin(); /** * Method to obtain the service for which we are asserting this ticket is * valid for. * * @return the service for which we are asserting this ticket is valid for. */ Service getService(); é€šè¿‡getChainedAuthentications()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°Authenticationå¯¹è±¡åˆ—è¡¨ï¼Œå†çœ‹çœ‹Authenticationçš„ä»£ç ï¼š /** * Method to obtain the Principal. * * @return a Principal implementation */ Principal getPrincipal(); /** * Method to retrieve the timestamp of when this Authentication object was * created. * * @return the date/time the authentication occurred. */ Date getAuthenticatedDate(); /** * Attributes of the authentication (not the Principal). * @return the map of attributes. */ Map&lt;String, Object&gt; getAttributes(); /** * Method to obtain the Principal. * * @return a Principal implementation */ Principal getPrincipal(); /** * Method to retrieve the timestamp of when this Authentication object was * created. * * @return the date/time the authentication occurred. */ Date getAuthenticatedDate(); /** * Attributes of the authentication (not the Principal). * @return the map of attributes. */ Map&lt;String, Object&gt; getAttributes(); è€Œè¿™å…¶ä¸­çš„Principalå°±æ¥æºäºŽä¸Šé¢æåˆ°çš„ç”±credentialsToPrincipalResolverså¤„ç†å¾—åˆ°çš„Principalå¯¹è±¡ï¼Œæœ€åŽçœ‹ä¸€ä¸‹Principalçš„ä»£ç ï¼Œæˆ‘ä»¬åªè¦å†åšä¸€ä¸ªå®žçŽ°ä»–çš„ä»£ç ï¼Œæ•´ä¸ªCAS Serverå°±å¯ä»¥ä¿¡æ‰‹æ‹ˆæ¥äº†ï¼Œå‘µå‘µ /** * Returns the unique id for the Principal * @return the unique id for the Principal. */ String getId(); /** * * @return */ Map&lt;String, Object&gt; getAttributes(); /** * Returns the unique id for the Principal * @return the unique id for the Principal. */ String getId(); /** * * @return */ Map&lt;String, Object&gt; getAttributes(); æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„casServiceValidationSuccess.jspå’ŒcasLoginView.jspé¡µé¢ç­‰ï¼Œå…·ä½“çš„æ“ä½œåŠžæ³•ä¹Ÿæ˜¯æœ€ç®€å•çš„åŠžæ³•å°±æ˜¯å¤‡ä»½ä»¥å‰çš„é¡µé¢ä¹‹åŽä¿®æ”¹æˆè‡ªå·±éœ€è¦çš„é¡µé¢ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS-PGTIOU]]></title>
      <url>%2F2014%2F07%2F06%2Fcas-PGTIOU%2F</url>
      <content type="text"><![CDATA[CASä¸­çš„PGTIOUå…¨ç§°:Proxy Granting Ticket I Owe You ##PGTIOUä½œç”¨ï¼šCASè°ƒç”¨Call back è¿”å›ž PGTIOUå’ŒPGTï¼Œå…¶å®ƒäººä¹Ÿå¯ä»¥è°ƒç”¨è¯¥URLå¹¶ä¼ è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æžœproxyä¸é€šè¿‡å…¶å®ƒé€”å¾„èŽ·å–PGTIOUå¯¹call backè¿”å›žçš„è¿›è¡Œæ ¡éªŒï¼Œå°±ä¼šé€ æˆè¢«æ¶æ„å¹²æ‰°è€Œå–å¾—ä¸æ­£ç¡®çš„PGTã€‚ ä¸ºä»€ä¹ˆè¦PGTURLå‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯éªŒè¯Stæ—¶ç›´æŽ¥è¿”å›žPGTï¼Ÿä¸»è¦æ˜¯å› ä¸ºï¼šå‡å¦‚hackerèŽ·å–äº†STï¼ˆæœ‰æ•ˆçš„ï¼‰ï¼Œé‚£ä¹ˆå…¶ä»–äººå°±å¯ä»¥é€šè¿‡STåˆ°ServeréªŒè¯å¹¶èŽ·å–PGTï¼Œè¿™æ ·å¯¼è‡´æ‰€æœ‰åº”ç”¨éƒ½å¯ä»¥è®¿é—®ï¼Œè€Œä¸åªæ˜¯STæ‰€å¯¹åº”çš„æœåŠ¡äº†ã€‚CASè¦æ±‚PGTURLå¿…é¡»ä¸ºHttpsï¼Œå¯ä»¥ä¿è¯CASå›žè°ƒæ—¶ä¿¡ä»»è¯¥URLï¼ˆæœ‰PGTURLæœåŠ¡çš„è¯ä¹¦ï¼‰ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CAS Ticketç¥¨æ®:TGTã€STã€PGTã€PTã€PGTIOU]]></title>
      <url>%2F2014%2F07%2F05%2Fcas-term-relationship%2F</url>
      <content type="text"><![CDATA[CASçš„æ ¸å¿ƒå°±æ˜¯å…¶Ticketï¼ŒåŠå…¶åœ¨Ticketä¹‹ä¸Šçš„ä¸€ç³»åˆ—å¤„ç†æ“ä½œã€‚CASçš„ä¸»è¦ç¥¨æ®æœ‰TGTã€STã€PGTã€PGTIOUã€PTï¼Œå…¶ä¸­TGTã€STæ˜¯CAS1.0åè®®ä¸­å°±æœ‰çš„ç¥¨æ®ï¼ŒPGTã€PGTIOUã€PTæ˜¯CAS2.0åè®®ä¸­æœ‰çš„ç¥¨æ®ã€‚ 1ã€æœ¯è¯­è§£é‡Š TGTï¼ˆTicket Grangting Ticketï¼‰ï¼š TGTæ˜¯CASä¸ºç”¨æˆ·ç­¾å‘çš„ç™»å½•ç¥¨æ®ï¼Œæ‹¥æœ‰äº†TGTï¼Œç”¨æˆ·å°±å¯ä»¥è¯æ˜Žè‡ªå·±åœ¨CASæˆåŠŸç™»å½•è¿‡ã€‚TGTå°è£…äº†Cookieå€¼ä»¥åŠæ­¤Cookieå€¼å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ã€‚ç”¨æˆ·åœ¨CASè®¤è¯æˆåŠŸåŽï¼ŒCASç”Ÿæˆcookieï¼ˆå«TGCï¼‰ï¼Œå†™å…¥æµè§ˆå™¨ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªTGTå¯¹è±¡ï¼Œæ”¾å…¥è‡ªå·±çš„ç¼“å­˜ï¼ŒTGTå¯¹è±¡çš„IDå°±æ˜¯cookieçš„å€¼ã€‚å½“HTTPå†æ¬¡è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå¦‚æžœä¼ è¿‡æ¥çš„æœ‰CASç”Ÿæˆçš„cookieï¼Œåˆ™CASä»¥æ­¤cookieå€¼ä¸ºkeyæŸ¥è¯¢ç¼“å­˜ä¸­æœ‰æ— TGT ï¼Œå¦‚æžœæœ‰çš„è¯ï¼Œåˆ™è¯´æ˜Žç”¨æˆ·ä¹‹å‰ç™»å½•è¿‡ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•ã€‚ TGC ï¼ˆTicket-granting cookieï¼‰ï¼š å­˜æ”¾ç”¨æˆ·èº«ä»½è®¤è¯å‡­è¯çš„cookieï¼Œåœ¨æµè§ˆå™¨å’ŒCAS Serveré—´é€šè®¯æ—¶ä½¿ç”¨ï¼Œå¹¶ä¸”åªèƒ½åŸºäºŽå®‰å…¨é€šé“ä¼ è¾“ï¼ˆHttpsï¼‰ï¼Œæ˜¯CAS Serverç”¨æ¥æ˜Žç¡®ç”¨æˆ·èº«ä»½çš„å‡­è¯ã€‚ STï¼ˆService Ticketï¼‰ STæ˜¯CASä¸ºç”¨æˆ·ç­¾å‘çš„è®¿é—®æŸä¸€serviceçš„ç¥¨æ®ã€‚ç”¨æˆ·è®¿é—®serviceæ—¶ï¼Œserviceå‘çŽ°ç”¨æˆ·æ²¡æœ‰STï¼Œåˆ™è¦æ±‚ç”¨æˆ·åŽ»CASèŽ·å–STã€‚ç”¨æˆ·å‘CASå‘å‡ºèŽ·å–STçš„è¯·æ±‚ï¼Œå¦‚æžœç”¨æˆ·çš„è¯·æ±‚ä¸­åŒ…å«cookieï¼Œåˆ™CASä¼šä»¥æ­¤cookieå€¼ä¸ºkeyæŸ¥è¯¢ç¼“å­˜ä¸­æœ‰æ— TGTï¼Œå¦‚æžœå­˜åœ¨TGTï¼Œåˆ™ç”¨æ­¤TGTç­¾å‘ä¸€ä¸ªSTï¼Œè¿”å›žç»™ç”¨æˆ·ã€‚ç”¨æˆ·å‡­å€ŸSTåŽ»è®¿é—®serviceï¼Œserviceæ‹¿STåŽ»CASéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åŽï¼Œå…è®¸ç”¨æˆ·è®¿é—®èµ„æºã€‚ PGTï¼ˆProxy Granting Ticketï¼‰ Proxy Serviceçš„ä»£ç†å‡­æ®ã€‚ç”¨æˆ·é€šè¿‡CASæˆåŠŸç™»å½•æŸä¸€Proxy ServiceåŽï¼ŒCASç”Ÿæˆä¸€ä¸ªPGTå¯¹è±¡ï¼Œç¼“å­˜åœ¨CASæœ¬åœ°ï¼ŒåŒæ—¶å°†PGTçš„å€¼ï¼ˆä¸€ä¸ªUUIDå­—ç¬¦ä¸²ï¼‰å›žä¼ ç»™Proxy Serviceï¼Œå¹¶ä¿å­˜åœ¨Proxy Serviceé‡Œã€‚Proxy Serviceæ‹¿åˆ°PGTåŽï¼Œå°±å¯ä»¥ä¸ºTarget Serviceï¼ˆback-end serviceï¼‰åšä»£ç†ï¼Œä¸ºå…¶ç”³è¯·PTã€‚ PGTIOUï¼ˆå…¨ç§° Proxy Granting Ticket I Owe Youï¼‰ PGTIOUæ˜¯CASåè®®ä¸­å®šä¹‰çš„ä¸€ç§é™„åŠ ç¥¨æ®ï¼Œå®ƒå¢žå¼ºäº†ä¼ è¾“ã€èŽ·å–PGTçš„å®‰å…¨æ€§ã€‚PGTçš„ä¼ è¾“ä¸ŽèŽ·å–çš„è¿‡ç¨‹ï¼šProxy Serviceè°ƒç”¨CASçš„serviceValidateæŽ¥å£éªŒè¯STæˆåŠŸåŽï¼ŒCASé¦–å…ˆä¼šè®¿é—®pgtUrlæŒ‡å‘çš„https urlï¼Œå°†ç”Ÿæˆçš„ PGTåŠPGTIOUä¼ è¾“ç»™proxy serviceï¼Œproxy serviceä¼šä»¥PGTIOUä¸ºkeyï¼ŒPGTä¸ºvalueï¼Œå°†å…¶å­˜å‚¨åœ¨Mapä¸­ï¼›ç„¶åŽCASä¼šç”ŸæˆéªŒè¯STæˆåŠŸçš„xmlæ¶ˆæ¯ï¼Œè¿”å›žç»™Proxy Serviceï¼Œxmlæ¶ˆæ¯ä¸­å«æœ‰PGTIOUï¼Œproxy serviceæ”¶åˆ°Xmlæ¶ˆæ¯åŽï¼Œä¼šä»Žä¸­è§£æžå‡ºPGTIOUçš„å€¼ï¼Œç„¶åŽä»¥å…¶ä¸ºkeyï¼Œåœ¨mapä¸­æ‰¾å‡ºPGTçš„å€¼ï¼Œèµ‹å€¼ç»™ä»£è¡¨ç”¨æˆ·ä¿¡æ¯çš„Assertionå¯¹è±¡çš„pgtIdï¼ŒåŒæ—¶åœ¨mapä¸­å°†å…¶åˆ é™¤ã€‚ PTï¼ˆProxy Ticketï¼‰ PTæ˜¯ç”¨æˆ·è®¿é—®Target Serviceï¼ˆback-end serviceï¼‰çš„ç¥¨æ®ã€‚å¦‚æžœç”¨æˆ·è®¿é—®çš„æ˜¯ä¸€ä¸ªWebåº”ç”¨ï¼Œåˆ™Webåº”ç”¨ä¼šè¦æ±‚æµè§ˆå™¨æä¾›STï¼Œæµè§ˆå™¨å°±ä¼šç”¨cookieåŽ»CASèŽ·å–ä¸€ä¸ªSTï¼Œç„¶åŽå°±å¯ä»¥è®¿é—®è¿™ä¸ªWebåº”ç”¨äº†ã€‚å¦‚æžœç”¨æˆ·è®¿é—®çš„ä¸æ˜¯ä¸€ä¸ªWebåº”ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªC/Sç»“æž„çš„åº”ç”¨ï¼Œå› ä¸ºC/Sç»“æž„çš„åº”ç”¨å¾—ä¸åˆ°cookieï¼Œæ‰€ä»¥ç”¨æˆ·ä¸èƒ½è‡ªå·±åŽ»CASèŽ·å–STï¼Œè€Œæ˜¯é€šè¿‡è®¿é—®proxy serviceçš„æŽ¥å£ï¼Œå‡­å€Ÿproxy serviceçš„PGTåŽ»èŽ·å–ä¸€ä¸ªPTï¼Œç„¶åŽæ‰èƒ½è®¿é—®åˆ°æ­¤åº”ç”¨ã€‚ 2ã€TGTã€STã€PGTã€PTä¹‹é—´å…³ç³» STæ˜¯TGTç­¾å‘çš„ã€‚ç”¨æˆ·åœ¨CASä¸Šè®¤è¯æˆåŠŸåŽï¼ŒCASç”ŸæˆTGTï¼Œç”¨TGTç­¾å‘ä¸€ä¸ªSTï¼ŒSTçš„ticketGrantingTicketå±žæ€§å€¼æ˜¯TGTå¯¹è±¡ï¼Œç„¶åŽæŠŠSTçš„å€¼redirectåˆ°å®¢æˆ·åº”ç”¨ã€‚ PGTæ˜¯STç­¾å‘çš„ã€‚ç”¨æˆ·å‡­å€ŸSTåŽ»è®¿é—®Proxy serviceï¼ŒProxy serviceåŽ»CASéªŒè¯STï¼ˆåŒæ—¶ä¼ é€’PgtUrlå‚æ•°ç»™CASï¼‰ï¼Œå¦‚æžœSTéªŒè¯æˆåŠŸï¼Œåˆ™CASç”¨STç­¾å‘ä¸€ä¸ªPGTï¼ŒPGTå¯¹è±¡é‡Œçš„ticketGrantingTicketæ˜¯ç­¾å‘STçš„TGTå¯¹è±¡ã€‚ PTæ˜¯PGTç­¾å‘çš„ã€‚Proxy serviceä»£ç†back-end serviceåŽ»CASèŽ·å–PTçš„æ—¶å€™ï¼ŒCASæ ¹æ®ä¼ æ¥çš„pgtå‚æ•°ï¼ŒèŽ·å–åˆ°PGTå¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨å…¶grantServiceTicketæ–¹æ³•ï¼Œç”Ÿæˆä¸€ä¸ªPTå¯¹è±¡ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CASå®žçŽ°SSOå•ç‚¹ç™»å½•åŽŸç†]]></title>
      <url>%2F2014%2F07%2F03%2Fcas-sso-principle%2F</url>
      <content type="text"><![CDATA[1. CAS ç®€ä»‹1.1. What is CAS ï¼ŸCAS ï¼ˆ Central Authentication Service ï¼‰ æ˜¯ Yale å¤§å­¦å‘èµ·çš„ä¸€ä¸ªä¼ä¸šçº§çš„ã€å¼€æºçš„é¡¹ç›®ï¼Œæ—¨åœ¨ä¸º Web åº”ç”¨ç³»ç»Ÿæä¾›ä¸€ç§å¯é çš„å•ç‚¹ç™»å½•è§£å†³æ–¹æ³•ï¼ˆå±žäºŽ Web SSO ï¼‰ã€‚CAS å¼€å§‹äºŽ 2001 å¹´ï¼Œ å¹¶åœ¨ 2004 å¹´ 12 æœˆæ­£å¼æˆä¸º JA-SIG çš„ä¸€ä¸ªé¡¹ç›®ã€‚ 1.2. ä¸»è¦ç‰¹æ€§ å¼€æºçš„ã€å¤šåè®®çš„ SSO è§£å†³æ–¹æ¡ˆï¼› Protocols ï¼š Custom Protocol ã€ CAS ã€ OAuth ã€ OpenID ã€ RESTful API ã€ SAML1.1 ã€ SAML2.0 ç­‰ã€‚ æ”¯æŒå¤šç§è®¤è¯æœºåˆ¶ï¼š Active Directory ã€ JAAS ã€ JDBC ã€ LDAP ã€ X.509 Certificates ç­‰ï¼› å®‰å…¨ç­–ç•¥ï¼šä½¿ç”¨ç¥¨æ®ï¼ˆ Ticket ï¼‰æ¥å®žçŽ°æ”¯æŒçš„è®¤è¯åè®®ï¼› æ”¯æŒæŽˆæƒï¼šå¯ä»¥å†³å®šå“ªäº›æœåŠ¡å¯ä»¥è¯·æ±‚å’ŒéªŒè¯æœåŠ¡ç¥¨æ®ï¼ˆ Service Ticket ï¼‰ï¼› æä¾›é«˜å¯ç”¨æ€§ï¼šé€šè¿‡æŠŠè®¤è¯è¿‡çš„çŠ¶æ€æ•°æ®å­˜å‚¨åœ¨ TicketRegistry ç»„ä»¶ä¸­ï¼Œè¿™äº›ç»„ä»¶æœ‰å¾ˆå¤šæ”¯æŒåˆ†å¸ƒå¼çŽ¯å¢ƒçš„å®žçŽ°ï¼Œå¦‚ï¼š BerkleyDB ã€ Default ã€ EhcacheTicketRegistry ã€ JDBCTicketRegistry ã€ JBOSS TreeCache ã€ JpaTicketRegistry ã€ MemcacheTicketRegistry ç­‰ï¼› æ”¯æŒå¤šç§å®¢æˆ·ç«¯ï¼š Java ã€ .Net ã€ PHP ã€ Perl ã€ Apache, uPortal ç­‰ã€‚ ##2. SSO å•ç‚¹ç™»å½•åŽŸç†æœ¬æ–‡å†…å®¹ä¸»è¦é’ˆå¯¹ Web SSO ã€‚ 2.1. ä»€ä¹ˆæ˜¯SSOå•ç‚¹ç™»å½•ï¼ˆ Single Sign-On , ç®€ç§° SSO ï¼‰æ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„æœåŠ¡äºŽä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œ SSO ä½¿å¾—åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ ç™»å½•ä¸€æ¬¡ å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚ 2.2. SSO åŽŸç†2.2.1. SSO ä½“ç³»ä¸­çš„è§’è‰²ä¸€èˆ¬ SSO ä½“ç³»ä¸»è¦è§’è‰²æœ‰ä¸‰ç§ï¼š User ï¼ˆå¤šä¸ªï¼‰ Web åº”ç”¨ï¼ˆå¤šä¸ªï¼‰ SSO è®¤è¯ä¸­å¿ƒï¼ˆ 1 ä¸ª ï¼‰ 2.2.2. SSO å®žçŽ°æ¨¡å¼çš„åŽŸåˆ™ æ‰€æœ‰çš„è®¤è¯ç™»å½•éƒ½åœ¨ SSO è®¤è¯ä¸­å¿ƒè¿›è¡Œï¼› SSO è®¤è¯ä¸­å¿ƒé€šè¿‡ä¸€äº›æ–¹æ³•æ¥å‘Šè¯‰ Web åº”ç”¨å½“å‰è®¿é—®ç”¨æˆ·ç©¶ç«Ÿæ˜¯ä¸æ˜¯å·²é€šè¿‡è®¤è¯çš„ç”¨æˆ·ï¼› SSO è®¤è¯ä¸­å¿ƒå’Œæ‰€æœ‰çš„ Web åº”ç”¨å»ºç«‹ä¸€ç§ä¿¡ä»»å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ web åº”ç”¨å¿…é¡»ä¿¡ä»»è®¤è¯ä¸­å¿ƒã€‚ï¼ˆå•ç‚¹ä¿¡ä»»ï¼‰ 2.2.3. SSO ä¸»è¦å®žçŽ°æ–¹å¼ å…±äº« cookiesåŸºäºŽå…±äº«åŒåŸŸçš„ cookie æ˜¯ Web åˆšå¼€å§‹é˜¶æ®µæ—¶ä½¿ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒåˆ©ç”¨æµè§ˆåŒåŸŸåä¹‹é—´è‡ªåŠ¨ä¼ é€’cookiesæœºåˆ¶ï¼Œå®žçŽ°ä¸¤ä¸ªåŸŸåä¹‹é—´ç³»ç»Ÿä»¤ç‰Œä¼ é€’é—®é¢˜ï¼›å¦å¤–ï¼Œå…³äºŽè·¨åŸŸé—®é¢˜ï¼Œè™½ç„¶cookies æœ¬èº«ä¸è·¨åŸŸï¼Œä½†å¯ä»¥åˆ©ç”¨å®ƒå®žçŽ°è·¨åŸŸçš„ SSOã€‚å¦‚ï¼šä»£ç†ã€æš´éœ² SSO ä»¤ç‰Œå€¼ç­‰ã€‚ç¼ºç‚¹ï¼šä¸çµæ´»è€Œä¸”æœ‰ä¸å°‘å®‰å…¨éšæ‚£ï¼Œå·²ç»è¢«æŠ›å¼ƒã€‚ Broker-based( åŸºäºŽç»çºªäºº )è¿™ç§æŠ€æœ¯çš„ç‰¹ç‚¹å°±æ˜¯ï¼Œæœ‰ä¸€ä¸ªé›†ä¸­çš„è®¤è¯å’Œç”¨æˆ·å¸å·ç®¡ç†çš„æœåŠ¡å™¨ã€‚ç»çºªäººç»™è¢«ç”¨äºŽè¿›ä¸€æ­¥è¯·æ±‚çš„ç”µå­èº«ä»½å­˜å–ã€‚ä¸­å¤®æ•°æ®åº“çš„ä½¿ç”¨å‡å°‘äº†ç®¡ç†çš„ä»£ä»·ï¼Œå¹¶ä¸ºè®¤è¯æä¾›ä¸€ä¸ªå…¬å…±å’Œç‹¬ç«‹çš„ â€œ ç¬¬ä¸‰æ–¹â€ã€‚ä¾‹å¦‚ Kerberos ã€ Sesame ã€ IBM KryptoKnight ï¼ˆå‡­è¯åº“æ€æƒ³ ) ç­‰ã€‚ Kerberos æ˜¯ç”±éº»çœç†å·¥å¤§å­¦å‘æ˜Žçš„å®‰å…¨è®¤è¯æœåŠ¡ï¼Œå·²ç»è¢« UNIX å’Œ Windowsä½œä¸ºé»˜è®¤çš„å®‰å…¨è®¤è¯æœåŠ¡é›†æˆè¿›æ“ä½œç³»ç»Ÿã€‚ Agent-based ï¼ˆåŸºäºŽä»£ç†äººï¼‰åœ¨è¿™ç§è§£å†³æ–¹æ¡ˆä¸­ï¼Œæœ‰ä¸€ä¸ªè‡ªåŠ¨åœ°ä¸ºä¸åŒçš„åº”ç”¨ç¨‹åºè®¤è¯ç”¨æˆ·èº«ä»½çš„ä»£ç†ç¨‹åºã€‚è¿™ä¸ªä»£ç†ç¨‹åºéœ€è¦è®¾è®¡æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å£ä»¤è¡¨æˆ–åŠ å¯†å¯†é’¥æ¥è‡ªåŠ¨åœ°å°†è®¤è¯çš„è´Ÿæ‹…ä»Žç”¨æˆ·ç§»å¼€ã€‚ä»£ç†äººè¢«æ”¾åœ¨æœåŠ¡å™¨ä¸Šé¢ï¼Œåœ¨æœåŠ¡å™¨çš„è®¤è¯ç³»ç»Ÿå’Œå®¢æˆ·ç«¯è®¤è¯æ–¹æ³•ä¹‹é—´å……å½“ä¸€ä¸ª â€œ ç¿»è¯‘ â€œ ã€‚ä¾‹å¦‚ SSH ç­‰ã€‚ Token-basedä¾‹å¦‚ SecureID,WebID ï¼ŒçŽ°åœ¨è¢«å¹¿æ³›ä½¿ç”¨çš„å£ä»¤è®¤è¯ï¼Œæ¯”å¦‚ FTP ã€é‚®ä»¶æœåŠ¡å™¨çš„ç™»å½•è®¤è¯ï¼Œè¿™æ˜¯ä¸€ç§ç®€å•æ˜“ç”¨çš„æ–¹å¼ï¼Œå®žçŽ°ä¸€ä¸ªå£ä»¤åœ¨å¤šç§åº”ç”¨å½“ä¸­ä½¿ç”¨ã€‚ åŸºäºŽç½‘å…³ åŸºäºŽ SAML SAML(Security Assertion Markup Language ï¼Œå®‰å…¨æ–­è¨€æ ‡è®°è¯­è¨€ï¼‰çš„å‡ºçŽ°å¤§å¤§ç®€åŒ–äº† SSO ï¼Œå¹¶è¢« OASIS æ‰¹å‡†ä¸º SSO çš„æ‰§è¡Œæ ‡å‡† ã€‚å¼€æºç»„ç»‡ OpenSAML å®žçŽ°äº† SAML è§„èŒƒã€‚ 3. CAS çš„åŸºæœ¬åŽŸç†3.1. ç»“æž„ä½“ç³»ä»Žç»“æž„ä½“ç³»çœ‹ï¼Œ CAS åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š CAS Server å’Œ CAS Client ã€‚ 3.1.1. CAS ServerCAS Server è´Ÿè´£å®Œæˆå¯¹ç”¨æˆ·çš„è®¤è¯å·¥ä½œ , éœ€è¦ç‹¬ç«‹éƒ¨ç½² , CAS Server ä¼šå¤„ç†ç”¨æˆ·å / å¯†ç ç­‰å‡­è¯ (Credentials) ã€‚ 3.1.2. CAS Clientè´Ÿè´£å¤„ç†å¯¹å®¢æˆ·ç«¯å—ä¿æŠ¤èµ„æºçš„è®¿é—®è¯·æ±‚ï¼Œéœ€è¦å¯¹è¯·æ±‚æ–¹è¿›è¡Œèº«ä»½è®¤è¯æ—¶ï¼Œé‡å®šå‘åˆ° CAS Server è¿›è¡Œè®¤è¯ã€‚ï¼ˆåŽŸåˆ™ä¸Šï¼Œå®¢æˆ·ç«¯åº”ç”¨ä¸å†æŽ¥å—ä»»ä½•çš„ç”¨æˆ·åå¯†ç ç­‰ Credentials ï¼‰ã€‚CAS Client ä¸Žå—ä¿æŠ¤çš„å®¢æˆ·ç«¯åº”ç”¨éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥ Filter æ–¹å¼ä¿æŠ¤å—ä¿æŠ¤çš„èµ„æºã€‚ 3.2. CAS åŽŸç†å’Œåè®®3.2.1. åŸºç¡€æ¨¡å¼ è®¿é—®æœåŠ¡ï¼š SSO å®¢æˆ·ç«¯å‘é€è¯·æ±‚è®¿é—®åº”ç”¨ç³»ç»Ÿæä¾›çš„æœåŠ¡èµ„æºã€‚ å®šå‘è®¤è¯ï¼š SSO å®¢æˆ·ç«¯ä¼šé‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ° SSO æœåŠ¡å™¨ã€‚ ç”¨æˆ·è®¤è¯ï¼šç”¨æˆ·èº«ä»½è®¤è¯ã€‚ å‘æ”¾ç¥¨æ®ï¼š SSO æœåŠ¡å™¨ä¼šäº§ç”Ÿä¸€ä¸ªéšæœºçš„ Service Ticket ã€‚ éªŒè¯ç¥¨æ®ï¼š SSO æœåŠ¡å™¨éªŒè¯ç¥¨æ® Service Ticket çš„åˆæ³•æ€§ï¼ŒéªŒè¯é€šè¿‡åŽï¼Œå…è®¸å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ã€‚ ä¼ è¾“ç”¨æˆ·ä¿¡æ¯ï¼š SSO æœåŠ¡å™¨éªŒè¯ç¥¨æ®é€šè¿‡åŽï¼Œä¼ è¾“ç”¨æˆ·è®¤è¯ç»“æžœä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚ä¸‹é¢æ˜¯ CAS æœ€åŸºæœ¬çš„åè®®è¿‡ç¨‹ï¼š casåŸºç¡€åè®®å›¾åŸºç¡€åè®®å›¾ å¦‚ä¸Šå›¾ï¼š CAS Client ä¸Žå—ä¿æŠ¤çš„å®¢æˆ·ç«¯åº”ç”¨éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥ Filter æ–¹å¼ä¿æŠ¤ Web åº”ç”¨çš„å—ä¿æŠ¤èµ„æºï¼Œè¿‡æ»¤ä»Žå®¢æˆ·ç«¯è¿‡æ¥çš„æ¯ä¸€ä¸ª Web è¯·æ±‚ï¼ŒåŒæ—¶ï¼Œ CAS Client ä¼šåˆ†æž HTTP è¯·æ±‚ä¸­æ˜¯å¦åŒ…å«è¯·æ±‚ Service Ticket( ST ä¸Šå›¾ä¸­çš„ Ticket) ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™è¯´æ˜Žè¯¥ç”¨æˆ·æ˜¯æ²¡æœ‰ç»è¿‡è®¤è¯çš„ï¼›äºŽæ˜¯ CAS Client ä¼šé‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ° CAS Server ï¼ˆ Step 2 ï¼‰ï¼Œå¹¶ä¼ é€’ Service ï¼ˆè¦è®¿é—®çš„ç›®çš„èµ„æºåœ°å€ï¼‰ã€‚ Step 3 æ˜¯ç”¨æˆ·è®¤è¯è¿‡ç¨‹ï¼Œå¦‚æžœç”¨æˆ·æä¾›äº†æ­£ç¡®çš„ Credentials ï¼Œ CAS Server éšæœºäº§ç”Ÿä¸€ä¸ªç›¸å½“é•¿åº¦ã€å”¯ä¸€ã€ä¸å¯ä¼ªé€ çš„ Service Ticket ï¼Œå¹¶ç¼“å­˜ä»¥å¾…å°†æ¥éªŒè¯ï¼Œå¹¶ä¸”é‡å®šå‘ç”¨æˆ·åˆ° Service æ‰€åœ¨åœ°å€ï¼ˆé™„å¸¦åˆšæ‰äº§ç”Ÿçš„ Service Ticket ï¼‰ , å¹¶ä¸ºå®¢æˆ·ç«¯æµè§ˆå™¨è®¾ç½®ä¸€ä¸ª Ticket Granted Cookie ï¼ˆ TGC ï¼‰ ï¼› CAS Client åœ¨æ‹¿åˆ° Service å’Œæ–°äº§ç”Ÿçš„ Ticket è¿‡åŽï¼Œåœ¨ Step 5 å’Œ Step6 ä¸­ä¸Ž CAS Server è¿›è¡Œèº«ä»½æ ¸å®žï¼Œä»¥ç¡®ä¿ Service Ticket çš„åˆæ³•æ€§ã€‚åœ¨è¯¥åè®®ä¸­ï¼Œæ‰€æœ‰ä¸Ž CAS Server çš„äº¤äº’å‡é‡‡ç”¨ SSL åè®®ï¼Œä»¥ç¡®ä¿ ST å’Œ TGC çš„å®‰å…¨æ€§ã€‚åè®®å·¥ä½œè¿‡ç¨‹ä¸­ä¼šæœ‰ 2 æ¬¡é‡å®šå‘ çš„è¿‡ç¨‹ã€‚ä½†æ˜¯ CAS Client ä¸Ž CAS Server ä¹‹é—´è¿›è¡Œ Ticket éªŒè¯çš„è¿‡ç¨‹å¯¹äºŽç”¨æˆ·æ˜¯é€æ˜Žçš„ï¼ˆä½¿ç”¨ HttpsURLConnection ï¼‰ã€‚ CAS è¯·æ±‚è®¤è¯æ—¶åºå›¾å¦‚ä¸‹ï¼š casè®¤è¯æ—¶åºå›¾ 3.2.2. CAS å¦‚ä½•å®žçŽ° SSOå½“ç”¨æˆ·è®¿é—®å¦ä¸€ä¸ªåº”ç”¨çš„æœåŠ¡å†æ¬¡è¢«é‡å®šå‘åˆ° CAS Server çš„æ—¶å€™ï¼Œ CAS Server ä¼šä¸»åŠ¨èŽ·åˆ°è¿™ä¸ª TGC cookie ï¼Œç„¶åŽåšä¸‹é¢çš„äº‹æƒ…ï¼š 1) å¦‚æžœ User æŒæœ‰ TGC ä¸”å…¶è¿˜æ²¡å¤±æ•ˆï¼Œé‚£ä¹ˆå°±èµ°åŸºç¡€åè®®å›¾çš„ Step4 ï¼Œè¾¾åˆ°äº† SSO çš„æ•ˆæžœï¼› 2) å¦‚æžœ TGC å¤±æ•ˆï¼Œé‚£ä¹ˆç”¨æˆ·è¿˜æ˜¯è¦é‡æ–°è®¤è¯ ( èµ°åŸºç¡€åè®®å›¾çš„ Step3) ã€‚ 3.2.3. CAS ä»£ç†æ¨¡å¼è¯¥æ¨¡å¼å½¢å¼ä¸ºç”¨æˆ·è®¿é—® App1 ï¼Œ App1 åˆä¾èµ–äºŽ App2 æ¥èŽ·å–ä¸€äº›ä¿¡æ¯ï¼Œå¦‚ï¼š User â€“&gt;App1 â€“&gt;App2 ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå‡è®¾ App2 ä¹Ÿæ˜¯éœ€è¦å¯¹ User è¿›è¡Œèº«ä»½éªŒè¯æ‰èƒ½è®¿é—®ï¼Œé‚£ä¹ˆï¼Œä¸ºäº†ä¸å½±å“ç”¨æˆ·ä½“éªŒï¼ˆè¿‡å¤šçš„é‡å®šå‘å¯¼è‡´ User çš„ IE çª—å£ä¸åœåœ°é—ªåŠ¨ ) ï¼Œ CAS å¼•å…¥äº†ä¸€ç§ Proxy è®¤è¯æœºåˆ¶ï¼Œå³ CAS Client å¯ä»¥ä»£ç†ç”¨æˆ·åŽ»è®¿é—®å…¶å®ƒ Web åº”ç”¨ã€‚ä»£ç†çš„å‰ææ˜¯éœ€è¦ CAS Client æ‹¥æœ‰ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ ( ç±»ä¼¼å‡­æ® ) ã€‚ä¹‹å‰æˆ‘ä»¬æåˆ°çš„ TGC æ˜¯ç”¨æˆ·æŒæœ‰å¯¹è‡ªå·±èº«ä»½ä¿¡æ¯çš„ä¸€ç§å‡­æ®ï¼Œè¿™é‡Œçš„ PGT å°±æ˜¯ CAS Client ç«¯æŒæœ‰çš„å¯¹ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„ä¸€ç§å‡­æ®ã€‚å‡­å€Ÿ TGC ï¼Œ User å¯ä»¥å…åŽ»è¾“å…¥å¯†ç ä»¥èŽ·å–è®¿é—®å…¶å®ƒæœåŠ¡çš„ Service Ticket ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œå‡­å€Ÿ PGT ï¼Œ Web åº”ç”¨å¯ä»¥ä»£ç†ç”¨æˆ·åŽ»å®žçŽ°åŽç«¯çš„è®¤è¯ï¼Œè€Œ æ— éœ€å‰ç«¯ç”¨æˆ·çš„å‚ä¸Ž ã€‚ä¸‹é¢ä¸ºä»£ç†åº”ç”¨ï¼ˆ helloService ï¼‰èŽ·å– PGT çš„è¿‡ç¨‹ï¼š ï¼ˆæ³¨ï¼š PGTURL ç”¨äºŽè¡¨ç¤ºä¸€ä¸ª Proxy æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå›žè°ƒé“¾æŽ¥ï¼› PGT ç›¸å½“äºŽä»£ç†è¯ï¼› PGTIOU ä¸ºå–ä»£ç†è¯çš„é’¥åŒ™ï¼Œç”¨æ¥ä¸Ž PGT åšå…³è”å…³ç³»ï¼›ï¼‰ å¦‚ä¸Šé¢çš„ CAS Proxy å›¾æ‰€ç¤ºï¼Œ CAS Client åœ¨åŸºç¡€åè®®ä¹‹ä¸Šï¼Œåœ¨éªŒè¯ ST æ—¶æä¾›äº†ä¸€ä¸ªé¢å¤–çš„ PGT URL( è€Œä¸”æ˜¯ SSL çš„å…¥å£ ) ç»™ CAS Server ï¼Œä½¿å¾— CAS Server å¯ä»¥é€šè¿‡ PGT URL æä¾›ä¸€ä¸ª PGT ç»™ CAS Client ã€‚CAS Client æ‹¿åˆ°äº† PGT(PGTIOU-85 â€¦ ..ti2td) ï¼Œå°±å¯ä»¥é€šè¿‡ PGT å‘åŽç«¯ Web åº”ç”¨è¿›è¡Œè®¤è¯ã€‚ä¸‹é¢æ˜¯ä»£ç†è®¤è¯å’Œæä¾›æœåŠ¡çš„è¿‡ç¨‹ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ Proxy è®¤è¯ä¸Žæ™®é€šçš„è®¤è¯å…¶å®žå·®åˆ«ä¸å¤§ï¼Œ Step1 ï¼Œ 2 ä¸ŽåŸºç¡€æ¨¡å¼çš„ Step1,2 å‡ ä¹Žä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œ Proxy æ¨¡å¼ç”¨çš„æ˜¯ PGT è€Œä¸æ˜¯ TGC ï¼Œæ˜¯ Proxy Ticket ï¼ˆ PT ï¼‰è€Œä¸æ˜¯ Service Ticket ã€‚ 3.2.4. è¾…åŠ©è¯´æ˜ŽCAS çš„ SSO å®žçŽ°æ–¹å¼å¯ç®€åŒ–ç†è§£ä¸ºï¼š 1 ä¸ª Cookie å’Œ N ä¸ª Session ã€‚ CAS Server åˆ›å»º cookie ï¼Œåœ¨æ‰€æœ‰åº”ç”¨è®¤è¯æ—¶ä½¿ç”¨ï¼Œå„åº”ç”¨é€šè¿‡åˆ›å»ºå„è‡ªçš„ Session æ¥æ ‡è¯†ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€‚ç”¨æˆ·åœ¨ä¸€ä¸ªåº”ç”¨éªŒè¯é€šè¿‡åŽï¼Œä»¥åŽç”¨æˆ·åœ¨åŒä¸€æµè§ˆå™¨é‡Œè®¿é—®æ­¤åº”ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯åº”ç”¨ä¸­çš„è¿‡æ»¤å™¨ä¼šåœ¨ session é‡Œè¯»å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥å°±ä¸ä¼šåŽ» CAS Server è®¤è¯ã€‚å¦‚æžœåœ¨æ­¤æµè§ˆå™¨é‡Œè®¿é—®åˆ«çš„ web åº”ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯åº”ç”¨ä¸­çš„è¿‡æ»¤å™¨åœ¨ session é‡Œè¯»å–ä¸åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°±ä¼šåŽ» CAS Server çš„ login æŽ¥å£è®¤è¯ï¼Œä½†è¿™æ—¶ CAS Server ä¼šè¯»å–åˆ°æµè§ˆå™¨ä¼ æ¥çš„ cookie ï¼ˆ TGC ï¼‰ï¼Œæ‰€ä»¥ CAS Server ä¸ä¼šè¦æ±‚ç”¨æˆ·åŽ»ç™»å½•é¡µé¢ç™»å½•ï¼Œåªæ˜¯ä¼šæ ¹æ® service å‚æ•°ç”Ÿæˆä¸€ä¸ª Ticket ï¼Œç„¶åŽå†å’Œ web åº”ç”¨åšä¸€ä¸ªéªŒè¯ ticket çš„äº¤äº’è€Œå·²ã€‚ 3.3. æœ¯è¯­è§£é‡ŠCAS ç³»ç»Ÿä¸­è®¾è®¡äº† 5 ä¸­ç¥¨æ®ï¼š TGC ã€ ST ã€ PGT ã€ PGTIOU ã€ PT ã€‚ Ticket-granting cookie(TGC) ï¼šå­˜æ”¾ç”¨æˆ·èº«ä»½è®¤è¯å‡­è¯çš„ cookie ï¼Œåœ¨æµè§ˆå™¨å’Œ CAS Server é—´é€šè®¯æ—¶ä½¿ç”¨ï¼Œå¹¶ä¸”åªèƒ½åŸºäºŽå®‰å…¨é€šé“ä¼ è¾“ï¼ˆ Https ï¼‰ï¼Œæ˜¯ CAS Server ç”¨æ¥æ˜Žç¡®ç”¨æˆ·èº«ä»½çš„å‡­è¯ï¼› Service ticket(ST) ï¼šæœåŠ¡ç¥¨æ®ï¼ŒæœåŠ¡çš„æƒŸä¸€æ ‡è¯†ç  , ç”± CAS Server å‘å‡ºï¼ˆ Http ä¼ é€ï¼‰ï¼Œé€šè¿‡å®¢æˆ·ç«¯æµè§ˆå™¨åˆ°è¾¾ä¸šåŠ¡æœåŠ¡å™¨ç«¯ï¼›ä¸€ä¸ªç‰¹å®šçš„æœåŠ¡åªèƒ½æœ‰ä¸€ä¸ªæƒŸä¸€çš„ ST ï¼› Proxy-Granting ticket ï¼ˆ PGT ï¼‰ï¼šç”± CAS Server é¢å‘ç»™æ‹¥æœ‰ ST å‡­è¯çš„æœåŠ¡ï¼Œ PGT ç»‘å®šä¸€ä¸ªç”¨æˆ·çš„ç‰¹å®šæœåŠ¡ï¼Œä½¿å…¶æ‹¥æœ‰å‘ CAS Server ç”³è¯·ï¼ŒèŽ·å¾— PT çš„èƒ½åŠ›ï¼› Proxy-Granting Ticket I Owe You ï¼ˆ PGTIOU ï¼‰ : ä½œç”¨æ˜¯å°†é€šè¿‡å‡­è¯æ ¡éªŒæ—¶çš„åº”ç­”ä¿¡æ¯ç”± CAS Server è¿”å›žç»™ CAS Client ï¼ŒåŒæ—¶ï¼Œä¸Žè¯¥ PGTIOU å¯¹åº”çš„ PGT å°†é€šè¿‡å›žè°ƒé“¾æŽ¥ä¼ ç»™ Web åº”ç”¨ã€‚ Web åº”ç”¨è´Ÿè´£ç»´æŠ¤ PGTIOU ä¸Ž PGT ä¹‹é—´æ˜ å°„å…³ç³»çš„å†…å®¹è¡¨ï¼› Proxy Ticket (PT) ï¼šæ˜¯åº”ç”¨ç¨‹åºä»£ç†ç”¨æˆ·èº«ä»½å¯¹ç›®æ ‡ç¨‹åºè¿›è¡Œè®¿é—®çš„å‡­è¯ï¼› å…¶å®ƒè¯´æ˜Žå¦‚ä¸‹ï¼š Ticket Granting ticket(TGT) ï¼šç¥¨æ®æŽˆæƒç¥¨æ®ï¼Œç”± KDC çš„ AS å‘æ”¾ã€‚å³èŽ·å–è¿™æ ·ä¸€å¼ ç¥¨æ®åŽï¼Œä»¥åŽç”³è¯·å„ç§å…¶ä»–æœåŠ¡ç¥¨æ® (ST) ä¾¿ä¸å¿…å†å‘ KDC æäº¤èº«ä»½è®¤è¯ä¿¡æ¯ (Credentials) ï¼› Authentication service(AS) â€”â€”â€” è®¤è¯ç”¨æœåŠ¡ï¼Œç´¢å– Credentials ï¼Œå‘æ”¾ TGT ï¼› Ticket-granting service (TGS) â€”â€”â€” ç¥¨æ®æŽˆæƒæœåŠ¡ï¼Œç´¢å– TGT ï¼Œå‘æ”¾ ST ï¼› KDC( Key Distribution Center ) â€”â€”â€”- å¯†é’¥å‘æ”¾ä¸­å¿ƒï¼› 4. CAS å®‰å…¨æ€§CAS çš„å®‰å…¨æ€§ä»…ä»…ä¾èµ–äºŽ SSL ã€‚ä½¿ç”¨çš„æ˜¯ secure cookie ã€‚ 4.1. TGC/PGT å®‰å…¨æ€§å¯¹äºŽä¸€ä¸ª CAS ç”¨æˆ·æ¥è¯´ï¼Œæœ€é‡è¦æ˜¯è¦ä¿æŠ¤å®ƒçš„ TGC ï¼Œå¦‚æžœ TGC ä¸æ…Žè¢« CAS Server ä»¥å¤–çš„å®žä½“èŽ·å¾—ï¼Œ Hacker èƒ½å¤Ÿæ‰¾åˆ°è¯¥ TGC ï¼Œç„¶åŽå†’å…… CAS ç”¨æˆ·è®¿é—® æ‰€æœ‰ æŽˆæƒèµ„æºã€‚ PGT çš„è§’è‰²è·Ÿ TGC æ˜¯ä¸€æ ·çš„ã€‚ä»ŽåŸºç¡€æ¨¡å¼å¯ä»¥çœ‹å‡ºï¼Œ TGC æ˜¯ CAS Server é€šè¿‡ SSL æ–¹å¼å‘é€ç»™ç»ˆç«¯ç”¨æˆ·ï¼Œå› æ­¤ï¼Œè¦æˆªå– TGC éš¾åº¦éžå¸¸å¤§ï¼Œä»Žè€Œç¡®ä¿ CAS çš„å®‰å…¨æ€§ã€‚TGT çš„å­˜æ´»å‘¨æœŸé»˜è®¤ä¸º 120 åˆ†é’Ÿã€‚ 4.2. ST/PT å®‰å…¨æ€§ST ï¼ˆ Service Ticket ï¼‰æ˜¯é€šè¿‡ Http ä¼ é€çš„ï¼Œå› æ­¤ç½‘ç»œä¸­çš„å…¶ä»–äººå¯ä»¥ Sniffer åˆ°å…¶ä»–äººçš„ Ticket ã€‚ CAS é€šè¿‡ä»¥ä¸‹å‡ æ–¹é¢æ¥ä½¿ ST å˜å¾—æ›´åŠ å®‰å…¨ï¼ˆäº‹å®žä¸Šéƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼‰ï¼š ST åªèƒ½ä½¿ç”¨ä¸€æ¬¡CAS åè®®è§„å®šï¼Œæ— è®º Service Ticket éªŒè¯æ˜¯å¦æˆåŠŸï¼Œ CAS Server éƒ½ä¼šæ¸…é™¤æœåŠ¡ç«¯ç¼“å­˜ä¸­çš„è¯¥ Ticket ï¼Œä»Žè€Œå¯ä»¥ç¡®ä¿ä¸€ä¸ª Service Ticket ä¸è¢«ä½¿ç”¨ä¸¤æ¬¡ã€‚ ST åœ¨ä¸€æ®µæ—¶é—´å†…å¤±æ•ˆCAS è§„å®š ST åªèƒ½å­˜æ´»ä¸€å®šçš„æ—¶é—´ï¼Œç„¶åŽ CAS Server ä¼šè®©å®ƒå¤±æ•ˆã€‚é»˜è®¤æœ‰æ•ˆæ—¶é—´ä¸º 5 åˆ†é’Ÿã€‚ ST æ˜¯åŸºäºŽéšæœºæ•°ç”Ÿæˆçš„ST å¿…é¡»è¶³å¤Ÿéšæœºï¼Œå¦‚æžœ ST ç”Ÿæˆè§„åˆ™è¢«çŒœå‡ºï¼Œ Hacker å°±ç­‰äºŽç»•è¿‡ CAS è®¤è¯ï¼Œç›´æŽ¥è®¿é—® å¯¹åº”çš„ æœåŠ¡ã€‚ 5. å‚è€ƒèµ„æ–™ https://wiki.jasig.org/display/CASUM/Introduction http://www.jasig.org/cas/protocol/ http://www.ibm.com/developerworks/cn/opensource/os-cn-cas/index.html http://www.blogjava.net/security/archive/2006/10/02/sso_in_action.html http://baike.baidu.com/view/190743.htm]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å…³äºŽSQLçš„ä¸€äº›æ–‡ç« ]]></title>
      <url>%2F2014%2F06%2F16%2Fsome-about-sql-article%2F</url>
      <content type="text"><![CDATA[ç”»å›¾è§£é‡ŠSQLè”åˆè¯­å¥]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å…³äºŽæ­£åˆ™çš„ä¸€äº›æ–‡ç« ]]></title>
      <url>%2F2014%2F06%2F16%2Fsome-about-regular-article%2F</url>
      <content type="text"><![CDATA[æµ…æžæ­£åˆ™è¡¨è¾¾å¼â€”â€”åŽŸç†ç¯‡ æµ…æžæ­£åˆ™è¡¨è¾¾å¼â€”â€”æŸ³æš—èŠ±æ˜Žåˆä¸€æ‘ç¯‡]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[JSå†…ç½®å¯¹è±¡Object&Function]]></title>
      <url>%2F2014%2F04%2F25%2Fjavascript-function-object%2F</url>
      <content type="text"><![CDATA[###JSé‡è¦å†…å®¹ å†…ç½®å¯¹è±¡ï¼šObjectï¼ŒFunction protytype ä¸Šä¸‹æ–‡Context]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Intellij IDEA å¿«æ·é”®æ•´ç†&éƒ¨åˆ†eclipseå¯¹åº”]]></title>
      <url>%2F2014%2F04%2F10%2FIntellij-IDEA-key-map%2F</url>
      <content type="text"><![CDATA[ç¼–è¾‘ è¯´æ˜Ž Intellij IDEA Eclipse æ˜¾ç¤ºæ–‡æ¡£ ctrl + Q æ˜¾ç¤ºå‚æ•° Ctrl + P æ˜¾ç¤ºæœ€è¿‘ç¼–è¾‘æ–‡ä»¶ Ctrl + E ä»£ç å®Œæˆ Ctrl + J åˆ é™¤è¡Œ Ctrl + X Ctrl + d å¤åˆ¶è¡Œ Ctrl + D Ctrl+Alt+up/down å¿«é€Ÿæ‰“å¼€ç±» Ctrl + N ç”Ÿæˆä»£ç  Alt + Insert Alt + s + r é€‰æ‹©å‰ªè´´æ¿å†…å®¹å¹¶æ’å…¥ Ctrl + Shift + Insert å¯ä»¥å¿«é€Ÿæ‰“å¼€æ–‡ä»¶ Ctrl + Shift + N è‡ªåŠ¨ä»£ç  Ctrl + J ä¸¤è¡Œè½¬ä¸€è¡ŒåŽ»ç©ºæ ¼ Ctrl + Shift + J é€‰æ‹©æœ€è¿‘çš„å‰ªè´´æ¿å†…å®¹ Ctrl + Shift + V æŸ¥çœ‹ç»§æ‰¿å±‚æ¬¡ç»“æž„ Ctrl + H å‘ä¸Š/ä¸‹ç§»åŠ¨è¯­å¥ Ctrl + Shift + Up / Down Alt + Up / Down æŠŠä»£ç åŒ…åœ¨ä¸€ä¸ªå—å†… Ctrl + Alt + T å¯¼å…¥åŒ…ï¼Œè‡ªåŠ¨ä¿®æ­£ Ctrl + Enter æ ¼å¼åŒ–ä»£ç  Ctrl + Alt + L æ ¼å¼åŒ–é€‰ä¸­çš„ä»£ç  Ctrl + Alt + I ä¼˜åŒ–å¯¼å…¥çš„ç±»å’ŒåŒ… Ctrl + Alt + O å¯¼èˆª è¯´æ˜Ž Intellij IDEA Eclipse æœ€åŽç¼–è¾‘ä½ç½® Ctrl + Shift + Backspace Ctrl + Q è¿”å›žè‡³ä¸Šæ¬¡æµè§ˆçš„ä½ç½® Ctrl + Alt + left / right ç¼–è¾‘é¡µåˆ‡æ¢ Alt + Left / Right è·³è½¬åˆ°è¯­æ³•é”™è¯¯ä»£ç å¤„ F2 / Shift + F2 è·³è½¬åˆ°è¯­æ³•é”™è¯¯æ–‡ä»¶å¤„ Ctrl + Alt + Up / Down æ–¹æ³•é—´å¿«é€Ÿç§»åŠ¨ Alt + Up / Down è·³è½¬åˆ°å£°æ˜Ž Ctrl + B æ¡è½¬åˆ°å®žçŽ° Ctrl+ Alt + B è·³è½¬åˆ°è°ƒç”¨å¤„ Ctrl Alt + F7 è·³è½¬åˆ°å¤§æ‹¬å·å¼€å§‹/ç»“å°¾ Ctrl+ [ / ] æœ€è¿‘çš„æ›´æ”¹ Alt + Shift + C è·³åˆ°çˆ¶ç±» Ctrl + U æŸ¥æ‰¾/æ›¿æ¢ è¯´æ˜Ž Intellij IDEA Eclipse é«˜äº®æ˜¾ç¤ºé€‰ä¸­æ–‡å­— Ctrl + Shift + F7 F3å‘ä¸‹;Shift+F3å‘ä¸Š Ctrl + K æ›¿æ¢æ–‡æœ¬ Ctrl + R æŸ¥æ‰¾æ–‡æœ¬ Ctrl + F å…¨æ–‡æŸ¥æ‰¾ Ctrl + Shift + H ctrl + H æŸ¥æ‰¾èœå•åŠŸèƒ½ Ctrl + Shift + A é‡æž„ è¯´æ˜Ž Intellij IDEA Eclipse å¤åˆ¶ï¼ˆæ–‡ä»¶ï¼‰ F5 ç§»åŠ¨ï¼ˆæ–‡ä»¶ï¼‰ F6 å®‰å…¨åˆ é™¤ Alt + Delete é‡å‘½å Shift + F6 Ctrl + Shift + R Type Migration Ctrl + Shift + F6 æŠ½å–å˜é‡ Ctrl + Alt + V Alt + Shift + L æŠ½å–æ–¹æ³• Ctrl + Alt + M è°ƒè¯• è¯´æ˜Ž Intellij IDEA Eclipse åœæ­¢ Ctrl + F2 é€‰æ‹© Debug Alt + Shift + F9 é€‰æ‹© Run Alt + Shift + F10 ç¼–è¯‘ Ctrl + Shift + F9 è¿è¡Œ Ctrl + Shift + F10 æŸ¥çœ‹æ–­ç‚¹ Ctrl + Shift + F8 æ­¥è¿‡ F8 æ­¥å…¥ F7 æ™ºèƒ½æ­¥å…¥ Shift + F7 æ­¥å‡º Shift + F8 å¼ºåˆ¶æ­¥è¿‡ Alt + Shift + F8 å¼ºåˆ¶æ­¥å…¥ Alt + Shift + F7 è¿è¡Œè‡³å…‰æ ‡å¤„ Alt + F9 å¼ºåˆ¶è¿è¡Œè‡³å…‰æ ‡å¤„ Ctrl + Alt + F9 æ¢å¤ç¨‹åº F9 å®šä½åˆ°æ–­ç‚¹ Alt + F10 åˆ‡æ¢è¡Œæ–­ç‚¹ Ctrl + F8 ç”Ÿæˆé¡¹ç›® Ctrl + F9 å¸¸ç”¨æ“ä½œ è¯´æ˜Ž Intellij IDEA Eclipse é¡¹ç›® Alt + 1 æ”¶è— Alt + 2 TODO Alt + 6 ç»“æž„ Alt + 7 å¤åˆ¶è·¯å¾„ Ctrl + Shift + C å¤åˆ¶å¼•ç”¨ï¼Œå¿…é¡»é€‰æ‹©ç±»å Ctrl+Alt + Shift + C åŒæ­¥ Ctrl + Alt + Y å¿«é€Ÿåˆ‡æ¢æ–¹æ¡ˆ Ctrl + ~ è¿˜åŽŸé»˜è®¤å¸ƒå±€ Shift + F12 éšè—/æ¢å¤æ‰€æœ‰çª—å£ Ctrl + Shift + F12 å…³é—­ Ctrl + F4 å…³é—­æ´»åŠ¨é€‰é¡¹å¡ Ctrl + Shift + F4 è½¬åˆ°ä¸‹ä¸€ä¸ªæ‹†åˆ†å™¨ Ctrl + Tab è½¬åˆ°ä¸Šä¸€ä¸ªæ‹†åˆ†å™¨ Ctrl + Shift + Tab ç¼–è¯‘ Ctrl + Shift + F9 å¿«é€Ÿæ‰“å¼€Commit Changes Ctrl + K æ ¼å¼åŒ–1Ctrl + Alt + L æ ¼å¼åŒ–ä»£ç ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Oracle æ ‘ç»“æž„é€’å½’ç®€å•ç”¨æ³•]]></title>
      <url>%2F2014%2F04%2F03%2Foracle-tree-recursive%2F</url>
      <content type="text"><![CDATA[Oracleä¸­æ ‘å½¢ç»“æž„çš„æ•°æ®åœ¨æŸ¥è¯¢æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œå‰ä¸ä¹…çœ‹åˆ°åŒäº‹æœ‰ä¸ªç”¨æ³•è§‰å¾—å¾ˆä¸é”™ï¼ŒOracleå†…ç½®çš„ï¼Œå¯ä»¥å¾ˆä¾¿åˆ©çš„è§£å†³æ ‘é€’å½’æŸ¥è¯¢é—®é¢˜ ###ç¤ºä¾‹è¡¨ç»“æž„ id name parent_id 1 aa 2 bb 1 3 cc 2 4 dd 3 ###ä»Žæ ¹èŠ‚ç‚¹åˆ°é¡µèŠ‚ç‚¹ select * from table_ start with id = &apos;1&apos; connect by prior id=parent_id ###ä»Žå¶èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹ select * from table_ start with id = &apos;4&apos; connect by prior parent_id=id PIOR ä½ç½®è¿ç®—ç¬¦ PRIORè¢«æ”¾ç½®äºŽç­‰å·å‰åŽçš„ä½ç½®ï¼Œå†³å®šç€æŸ¥è¯¢æ—¶çš„æ£€ç´¢é¡ºåºã€‚ PRIORè¢«ç½®äºŽconnect byå­å¥ä¸­ç­‰å·çš„å‰é¢æ—¶ï¼Œåˆ™å¼ºåˆ¶ä»Žæ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„é¡ºåºæ£€ç´¢ï¼Œå³ç”±çˆ¶èŠ‚ç‚¹å‘å­èŠ‚ç‚¹æ–¹å‘é€šè¿‡æ ‘ç»“æž„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè‡ªé¡¶å‘ä¸‹ çš„æ–¹å¼ã€‚å¦‚ï¼š connect by prio id=parent_id PIRORè¿ç®—ç¬¦è¢«ç½®äºŽconnect byå­å¥ä¸­ç­‰å·çš„åŽé¢æ—¶ï¼Œåˆ™å¼ºåˆ¶ä»Žå¶èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„é¡ºåºæ£€ç´¢ï¼Œå³ç”±å­èŠ‚ç‚¹å‘çˆ¶èŠ‚ç‚¹æ–¹å‘é€šè¿‡æ ‘ç»“æž„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè‡ªåº•å‘ä¸Š çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼š connect by id=prio parent_id åœ¨è¿™ç§æ–¹å¼ä¸­ä¹Ÿåº”æŒ‡å®šä¸€ä¸ªå¼€å§‹çš„èŠ‚ç‚¹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ‚é¡¹å¤‡å¿˜]]></title>
      <url>%2F2014%2F03%2F21%2Fmark-and-memo%2F</url>
      <content type="text"><![CDATA[Intellij IDEAä¼ è¯´ä¸­çš„æœ€æ™ºèƒ½javaå¼€å‘IDEã€‚çŽ°åœ¨å·²ç»å®Œå…¨åˆ‡æ¢åˆ°IDEAä¸Šé¢æ¥äº†ã€‚ä¸Šä¸€å¼ IDEAå¿«æ·é”®å›¾ï¼Œæ²¡äº‹æ¥çž…çž…ã€‚ æ¥ä¸€ä¸ª[åœ¨çº¿æ³¨å†Œç ç”Ÿæˆå™¨][1]ï¼ŒæŒºæ–¹ä¾¿ï¼Œæœ¬æ¥ç¤¾åŒºç‰ˆä¹Ÿå¤Ÿç”¨ï¼Œè¿˜æ˜¯æ‰‹è´±ä¸‹äº†å•†ä¸šç‰ˆæœ¬ã€‚ PL/SQL Developerå®˜æ–¹ä¸‹è½½åœ°å€ Product Codeï¼š4t46t6vydkvsxekkvf3fjnpzy5wbuhphqz serial Numberï¼š601769 passwordï¼šxs374ca Xmanager Enterprise 5æ³¨å†Œç ï¼š101210-450789-147200 Dexpotä¸€ä¸ªç±»ä¼¼linuxå¤šå·¥ä½œåŒºçš„å·¥å…·ï¼ŒæŒºæ–¹ä¾¿ï¼Œä¹Ÿå¾ˆcoolï¼Œæ¥å¼ å›¾ Nikon Camera Control Pro 2 product key 48600-17854-11336-52282-35553 é«˜æ¸…ç”µå½±ä¸‹è½½ç½‘ç«™[ä¸­å›½é«˜æ¸…ç½‘][2] æ ‘èŽ“æ´¾ å¼€æºç¡¬ä»¶ç›¸å…³ openELEC KODIï¼ˆXBMCï¼‰ linuxæœåŠ¡å™¨çŽ¯å¢ƒä¸€é”®å®‰è£…åŒ… OneinStack LNMP çœ‹æ–‡ç« [ç®€ä¹¦][3] OSX è½¯ä»¶ä¸‹è½½ macpeers AppKed xclient çˆ±æƒ…å®ˆæœ›è€… Intellij IDEA åœ¨çº¿æ³¨å†ŒIntellij IDEA [1]: http://174.140.163.89/keygen/idea.htm â€˜Intellij IDEAâ€™[2]: http://gaoqing.la â€˜gaoqingâ€™[3]: http://jianshu.io â€˜jianshuâ€™]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è‰ºæœ¯ ç”Ÿæ´»]]></title>
      <url>%2F2014%2F03%2F11%2Fart-life%2F</url>
      <content type="text"><![CDATA[è‰ºæœ¯å°±æ˜¯ç”Ÿæ´»çš„æµ“ç¼©ä¸Žæç‚¼,å®ƒæœ‰æ—¶ä¼šæŠŠä¸€äº›ç”Ÿæ´»ä¸­çš„ä¸œè¥¿åšçš„æ›´çº¯ç²¹,æ›´æžè‡´ã€‚å®ƒæ˜¯ç¾Žçš„ï¼Œçº¯ç²¹çš„ï¼Œå¸¦ç€åˆ›ä½œè€…çš„ä¸ªäººå€¾å‘ï¼Œå¿…å®šæ˜¯å±•çŽ°ï¼Œæå–ä»–è®¤ä¸ºæœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚å°±è¿™ä¸€ç‚¹è¯´ï¼Œæ¯”èµ·æ—¥å¸¸çš„çº·ç¹å¤æ‚ï¼Œè‰¯èŽ ä¸é½æ˜¯é«˜äº†ã€‚æˆ–è®¸ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œä½†ä¸¾ä¸ªä¾‹å­ ï¼Œæ–‡å­¦ä¸Šå„ç§ä¿®è¾žæ‰‹æ³•çš„è¿ç”¨ï¼Œå°±ä½¿å¾—ä½œå“ä¸ŽçŽ°å®žæœ‰äº†å·®å¼‚ï¼Œæ›´å¼ºçƒˆï¼Œæ›´éœ‡æ’¼ï¼Œç­‰ç­‰ã€‚ äººç”Ÿå¦‚æˆ å…¨é æ¼”æŠ€æœ‰äººè¯´äººç”Ÿå¦‚æˆ,æˆ‘è¯´äººç”Ÿå°±æ˜¯ä¸€åœºæˆè€Œå·²,ä½ æˆ‘éƒ½æ˜¯ä¸»è§’,éƒ½åœ¨ç”¨è‡ªå·±çš„æ–¹å¼æ¼”ç»Ž.å¦‚æžœä¸€ä¸ªå¥³äººæŠŠè‡ªå·±è¶…è¿‡ä¸‰åˆ†ä¹‹ä¸€çš„æ—¶é—´ç”¨åœ¨äº†ä½ èº«ä¸Š,é‚£ä¹ˆè¯·å§‘ä¸”ç›¸ä¿¡,è¿™ä¸ªå¥³äººçˆ±ä½ .å“ªæ€•å¥¹åœ¨æ¼”æˆ,å¥¹è¿˜åœ¨å’Œå…¶ä»–ç”·äººæš§æ˜§,å¥¹è¿˜åœ¨å’Œå…¶ä»–ç”·äººé€‰æ‹©å’Œè¢«é€‰æ‹©åœ°æ¼”æˆ,å¥¹è¿˜åœ¨æŒ‚,è¿˜åœ¨æŒ‘,è¿˜åœ¨é€‰.èƒ½èŠ±ä¸‰åˆ†ä¹‹ä¸€çš„æ—¶é—´åœ¨ä½ èº«ä¸Š,å°±æ˜¯çœŸçš„. åŒæ ·çš„é“ç†,å¦‚æžœä¸€ä¸ªç”·äººæŠŠè‡ªå·±è¶…è¿‡ä¸‰åˆ†ä¹‹ä¸€çš„æ€»æ”¶å…¥ç”¨åœ¨äº†ä½ èº«ä¸Š,é‚£ä¹ˆå§‘ä¸”è¯·ç›¸ä¿¡,è¿™ä¸ªç”·äººçˆ±ä½ .å“ªæ€•ä»–åœ¨æ¼”æˆ,ä»–è¦è€ƒè™‘ä»–çš„å®žé™…æ”¶å…¥,ä»–è¦æ¶ˆè´¹,ä»–è¦å‚¨è“„,ä»–è¦åº”é…¬,èƒ½èŠ±ä¸‰åˆ†ä¹‹ä¸€æ”¶å…¥åœ¨ä½ èº«ä¸Š,é‚£å°±æ˜¯çœŸçš„. æ²¡æœ‰å¤šå°‘ç”·äººä¼šæ³¡MMäº†,è¿™ä¸ªå¹´å¤´,ç”·äººè´Ÿæ‹…å¤ªé‡,æ´»å¾—å¤ªç´¯.æ‰€ä»¥,å³ä¾¿ä¸€ä¸ªç”·äººæƒ³æ³¡ä½ ,ä»–ä¹Ÿæ˜¯çœŸå¿ƒåœ¨æ³¡ä½ .å¦‚æžœåªæ˜¯ä¸ºäº†æ€§,è¿™ä¸ªå¹´å¤´å¯ä»¥è§£å†³çš„é€”å¾„å’Œæ–¹å¼å¾ˆå¤š,å¾ˆç›´æŽ¥è¿…é€Ÿå»‰ä»·.æ‰€ä»¥å¥³äººä»¬æ— éœ€å¼‚æƒ³å¤©å¼€,ä½ ä»¬çš„èº«ä½“å¹¶æ²¡æœ‰ä½ ä»¬æƒ³åƒçš„é‚£ä¹ˆä»¤äººç¥žå¾€. æ²¡æœ‰å¤šå°‘å¥³äººä¼šçœŸå¿ƒåœ¨ç”·äººèº«ä¸ŠèŠ±æ—¶é—´äº†,çŽ°åœ¨å¥³äººéƒ½åŠŸåˆ©,çŽ°å®ž,å¦‚æžœä½ ä¸æ˜¯åƒä¸‡å¯Œç¿,å°±åˆ«ä»¥ä¸ºå¥³äººæ˜¯è´ªä½ çš„é’±è´¢.ä½•å†µè¿™ä¸ªå¹´å¤´,å¥³äººæƒ³èµšé’±,é€”å¾„å¾ˆå¤š,æ–¹æ³•å¾ˆå¤š,ä¹Ÿå¾ˆç›´æŽ¥è¿…é€Ÿ.æ‰€ä»¥ç”·äººä»¬æ— éœ€å¼‚æƒ³å¤©å¼€,æ²¡å‡ ä¸ªå¥³äººä¼šåœ¨æ„ä½ ä»¬é‚£å‡ ä¸ªå°é’±.æ‰€ä»¥,æ³¡ä½ çš„äºº,å’Œé™ªä½ çš„äºº,éƒ½æ˜¯åœ¨çœŸå¿ƒåœ°é€¢åœºä½œæˆ,è‡³å°‘ä»–ä»¬è¿˜ç›¸ä¿¡çˆ±æƒ…,è¿˜æœŸå¾…çˆ±æƒ…,è¿˜å¾ˆçº¯çœŸ,è¿˜å¾ˆå–„è‰¯. é‚£äº›ä¸ºä½ èµ¶è·¯,ä¸ºä½ è®¡åˆ’,ä¸ºä½ å®‰æŽ’,ä¸ºä½ æ¶ˆè´¹çš„ç”·äºº,è¯·ä½ çæƒœ.ä¹Ÿè®¸ä»–ä»¬å¹¶ä¸å¯Œè£•,ä½†æ„¿æ„ä¸ºä½ èŠ±è´¹ä¸€å‘¨ä¹ƒè‡³æ•°å‘¨çš„è–ªæ°´,åšä½ ä¸€ç¬‘,å’Œå½¼æ­¤çš„å¼€å¿ƒå¿«ä¹,é‚£ä¹ˆä»–æ˜¯çˆ±ä½ çš„,ä»–æ˜¯ä¸€ä¸ªæœ‰é“å¾·çš„äºº,ä»–æ¼”æŠ€é«˜è¶….é‚£äº›ä¸ºä½ åŒ–å¦†,ä¸ºä½ ç²¾å¿ƒå‡†å¤‡æœé¥°,ä¸ºä½ æŽ¨æŽ‰åº”é…¬çº¦ä¼š,åœ¨é’æ˜¥çš„å²æœˆé‡Œé™ªä½ çš„å¥³äºº,è¯·ä½ çæƒœ.ä¹Ÿè®¸å¥¹ä»¬å¹¶ä¸å›½è‰²å¤©é¦™,æ°”è´¨é«˜é›…,ä½†æ˜¯ç”˜æ„¿åœ¨äººç”Ÿæœ€å®è´µçš„æ—¶é—´é™ªä¼´ä½ ,è®©ä½ ä¸å¯‚å¯ž,è®©å½¼æ­¤æ„‰æ‚¦,é‚£ä¹ˆå¥¹æ˜¯çˆ±ä½ çš„,å¥¹æˆåŠŸæ¬ºéª—äº†ä½ ,æ¬ºéª—äº†è‡ªå·±. ä¹Ÿè®¸ä½ ä¸ç›¸ä¿¡çˆ±æƒ…,ä¹Ÿè®¸ä½ ä¸èƒ½å†çˆ±,ä¹Ÿè®¸ä½ è§‰å¾—ä¸–ç•Œåº¸ä¿—,ä¹Ÿè®¸ä½ è§‰å¾—æ²¡æœ‰ä»€ä¹ˆå¯ä»¥ç›¸ä¿¡.è¯·ç›¸ä¿¡è¿™ä¸€åˆ‡éƒ½æ˜¯çœŸçš„.é‚£ä¸ªç”·äººæ·±å¤œé‡Œç»™ä½ å‘æ¥ä¿¡æ¯å’Œé—®å€™,åœ¨å¾ˆå¤šæ—¶é—´ç‰µæŒ‚ç€ä½ ,å“ªæ€•ä»–åœ¨èŽºèŽºç‡•ç‡•çš„åŒ…å›´é‡Œ,åªè¦ä»–è¿˜è®°å¾—ä½ ,é‚£å…¶å®žå°±æ˜¯çœŸå®žçš„çˆ±. å¾ˆå¤šäººä¼¼ä¹Žçœ‹é€äººä¸–,ä¹Ÿè®¸ä½ è§‰å¾—è¿™ä¸ªä¸–ç•Œå¾ˆç‰©è´¨,è¿™ä¸ªä¸–ç•Œå¾ˆæ®‹é…·,è¿™ä¸ªä¸–ç•Œæ²¡æœ‰çœŸçˆ±,è¿™ä¸ªä¸–ç•Œè™šä¼ª,è¿™ä¸ªäººç”Ÿè™šå¹»,è¯·ç›¸ä¿¡è¿™ä¸€åˆ‡éƒ½æ˜¯çœŸçš„,å› ä¸ºä¸–ç•ŒåŽŸæœ¬å¦‚æ­¤.é‚£ä¸ªå¥³äººè·Ÿæœ‹å‹èŠå¤©ä¼šè°ˆåˆ°ä½ ,åœ¨ç¡å‰æƒ³åˆ°ä½ ä¼šç¬‘,å“ªæ€•ç¬¬äºŒå¤©å¥¹è¦èµ¶èµ´å…¶ä»–ç”·äººçš„çº¦ä¼š,åªè¦å¥¹è¿˜å¿µç€ä½ . ä¸çŸ¥é“è°è¿˜ä¼šä¸ºæˆ‘æ¼”æˆ,æˆ‘è¿˜ä¼šä¸ºè°æ¼”æˆ.æ— è®ºå¦‚ä½•éƒ½åº”è¯¥å–„å¾…é‚£ä¸ªçœŸå¿ƒæ¬ºéª—ä½ çš„äºº,è¯·çæƒœä¸ºä½ æ¼”æˆçš„äºº,å› ä¸ºä»–/å¥¹è‡³å°‘ä¸ºä½ æ¼”è¿‡æˆ. æˆ‘çš„çœ‹æ³•è¦æ‰®æ¼”å¥½è‡ªå·±åœ¨ç”Ÿæ´»å½“ä¸­çš„è§’è‰²ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æ¼”æŠ€å§ï¼ŒåŠªåŠ›ä½¿è‡ªå·±çš„ç”Ÿæ´»æ›´åŠ ç¾Žå¥½é‚£ä¾¿æ˜¯è‰ºæœ¯äº†å§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å…³äºŽæˆ‘]]></title>
      <url>%2F2014%2F03%2F09%2Fabout-me%2F</url>
      <content type="text"><![CDATA[JEE 6å¹´ç ”å‘ï¼Œç†Ÿæ‚‰Springï¼ŒMybatisï¼ŒHibernateï¼ŒShiroï¼ŒQuartzï¼ŒEhcacheï¼ŒLuceneï¼ŒSolrï¼ŒElasticsearchï¼ŒActivitiï¼ŒRedisï¼ŒOracleï¼ŒMysqlï¼ŒH2ï¼ŒHtmlï¼ŒCssï¼ŒJavascriptï¼ŒJqueryï¼ŒBootstrapï¼ŒTomcatï¼ŒLinux,Docker]]></content>
    </entry>

    
  
  
</search>
