<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ceylog Blog</title>
  <subtitle>Whatever is worth doing is worth doing well.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.wglgg.cn/"/>
  <updated>2017-12-07T09:47:54.117Z</updated>
  <id>http://blog.wglgg.cn/</id>
  
  <author>
    <name>ceylog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JSON-SCHEMA</title>
    <link href="http://blog.wglgg.cn/2017/12/07/JSON-SCHEMA/"/>
    <id>http://blog.wglgg.cn/2017/12/07/JSON-SCHEMA/</id>
    <published>2017-12-07T09:01:12.000Z</published>
    <updated>2017-12-07T09:47:54.117Z</updated>
    
    <content type="html"><![CDATA[<h3 id="JSON-Schema-ç®€å•ä½¿ç”¨"><a href="#JSON-Schema-ç®€å•ä½¿ç”¨" class="headerlink" title="JSON Schema ç®€å•ä½¿ç”¨"></a>JSON Schema ç®€å•ä½¿ç”¨</h3><p>åœ¨webserviceæ—¶ä»£å¼€å‘åŸºäºSOAPåè®®çš„webserviceåº”ç”¨ç»å¸¸ä¼šä½¿ç”¨åˆ°xmlï¼Œxml schemaã€DTDçš„ä½œç”¨éå¸¸å¤§ï¼Œå¯ä»¥ç”¨æ¥çº¦æŸåè®®ä¸­æŠ¥æ–‡æ ¼å¼åˆæ³•æ€§ï¼›ç›¸åº”çš„åœ¨RESTæœåŠ¡ç››è¡Œçš„æ—¶ä»£ä¹ŸJSONä¹Ÿæ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œä¹Ÿå‡ºç°äº†json schemaè¿™æ ·çš„ç¥å™¨ï¼Œå¯ä»¥å®šä¹‰jsonå†…å®¹çš„æ ¼å¼ç±»å‹ï¼ŒåºŸè¯å°‘è¯´ä¸Šä»£ç </p>
<p>json schema<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,</div><div class="line">  &quot;title&quot;: &quot;User&quot;,</div><div class="line">  &quot;type&quot;:&quot;object&quot;,</div><div class="line">  &quot;properties&quot;: &#123;</div><div class="line">    &quot;firstName&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;lastName&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;age&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;integer&quot;,</div><div class="line">      &quot;minimum&quot;: 0</div><div class="line">    &#125;,</div><div class="line">    &quot;roles&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;object&quot;,</div><div class="line">      &quot;properties&quot;: &#123;</div><div class="line">        &quot;name&quot;: &#123;</div><div class="line">          &quot;type&quot;: &quot;string&quot;</div><div class="line">        &#125;,</div><div class="line">        &quot;code&quot;: &#123;</div><div class="line">          &quot;type&quot;: [&quot;string&quot;,&quot;integer&quot;]</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      &quot;required&quot;: [</div><div class="line">        &quot;code&quot;</div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    &quot;permissions&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;array&quot;,</div><div class="line">      &quot;items&quot;: &#123;</div><div class="line">        &quot;type&quot;: &quot;object&quot;,</div><div class="line">        &quot;properties&quot;: &#123;</div><div class="line">          &quot;name&quot;: &#123;</div><div class="line">            &quot;type&quot;: &quot;string&quot;</div><div class="line">          &#125;,</div><div class="line">          &quot;code&quot;: &#123;</div><div class="line">            &quot;type&quot;: [&quot;integer&quot;,&quot;string&quot;]</div><div class="line">          &#125;</div><div class="line">        &#125;,</div><div class="line">        &quot;required&quot;: [</div><div class="line">          &quot;code&quot;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &quot;required&quot;: [</div><div class="line">    &quot;firstName&quot;,</div><div class="line">    &quot;age&quot;,</div><div class="line">    &quot;permissions&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>json </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;firstName&quot;: &quot;abcd&quot;,</div><div class="line">  &quot;lastName&quot;: &quot;adfads&quot;,</div><div class="line">  &quot;roles&quot;: &#123;</div><div class="line">    &quot;name&quot;: &quot;ddd&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;permissions&quot;: [</div><div class="line">    &#123;</div><div class="line">      &quot;name&quot;: &quot;dddd&quot;</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      &quot;name&quot;: &quot;aaaa&quot;,</div><div class="line">      &quot;code&quot;: &quot;dddf&quot;</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>pom.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;com.github.java-json-tools&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;json-schema-validator&lt;/artifactId&gt;</div><div class="line">	&lt;version&gt;2.2.8&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>java ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">import com.fasterxml.jackson.databind.JsonNode;</div><div class="line">import com.github.fge.jackson.JsonNodeReader;</div><div class="line">import com.github.fge.jsonschema.core.report.ProcessingMessage;</div><div class="line">import com.github.fge.jsonschema.core.report.ProcessingReport;</div><div class="line">import com.github.fge.jsonschema.main.JsonSchema;</div><div class="line">import com.github.fge.jsonschema.main.JsonSchemaFactory;</div><div class="line">import org.junit.Assert;</div><div class="line">import org.junit.Test;</div><div class="line"></div><div class="line">import java.io.InputStream;</div><div class="line">import java.util.Iterator;</div><div class="line"></div><div class="line"></div><div class="line">public class JsonSchemaTest &#123;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    public void test() throws Exception&#123;</div><div class="line">        InputStream resourceAsStream = this.getClass().getResourceAsStream(&quot;/JsonSchema.json&quot;);</div><div class="line">        JsonNode schema = new JsonNodeReader().fromInputStream(resourceAsStream);</div><div class="line">        JsonNode json = new JsonNodeReader().fromInputStream(this.getClass().getResourceAsStream(&quot;/User.json&quot;));</div><div class="line">        JsonSchemaFactory jsonSchemaFactory = JsonSchemaFactory.byDefault();</div><div class="line">        JsonSchema jsonSchema = jsonSchemaFactory.getJsonSchema(schema);</div><div class="line">        ProcessingReport report = jsonSchema.validate(json, true);</div><div class="line"></div><div class="line">        Iterator&lt;ProcessingMessage&gt; iterator = report.iterator();</div><div class="line">        while (iterator.hasNext())&#123;</div><div class="line">            ProcessingMessage pm = iterator.next();</div><div class="line">            JsonNode jsonNode = pm.asJson();</div><div class="line">            System.out.println(jsonNode);</div><div class="line">        &#125;</div><div class="line">        Assert.assertTrue(report.isSuccess());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡ºç»“æœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;age\&quot;])&quot;,&quot;required&quot;:[&quot;age&quot;,&quot;firstName&quot;,&quot;permissions&quot;],&quot;missing&quot;:[&quot;age&quot;]&#125;,</div><div class="line">&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;/properties/permissions/items&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;/permissions/0&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;code\&quot;])&quot;,&quot;required&quot;:[&quot;code&quot;],&quot;missing&quot;:[&quot;code&quot;]&#125;,</div><div class="line">&#123;&quot;level&quot;:&quot;error&quot;,&quot;schema&quot;:&#123;&quot;loadingURI&quot;:&quot;#&quot;,&quot;pointer&quot;:&quot;/properties/roles&quot;&#125;,&quot;instance&quot;:&#123;&quot;pointer&quot;:&quot;/roles&quot;&#125;,&quot;domain&quot;:&quot;validation&quot;,&quot;keyword&quot;:&quot;required&quot;,&quot;message&quot;:&quot;object has missing required properties ([\&quot;code\&quot;])&quot;,&quot;required&quot;:[&quot;code&quot;],&quot;missing&quot;:[&quot;code&quot;]&#125;]</div></pre></td></tr></table></figure></p>
<p>å°±è¿™æ ·ï¼Œso easy</p>
<p>###å‚è€ƒ<br><a href="https://github.com/networknt/json-schema-validator" target="_blank" rel="external">json-schema-validatorå®ç°</a><br><a href="http://json-schema.org/" target="_blank" rel="external">json schema</a></p>
]]></content>
    
    <summary type="html">
    
      json schema ä½¿ç”¨
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
      <category term="json schema" scheme="http://blog.wglgg.cn/tags/json-schema/"/>
    
  </entry>
  
  <entry>
    <title>idea-spring-boot-devtools-not-work</title>
    <link href="http://blog.wglgg.cn/2017/03/02/idea-spring-boot-devtools-not-work/"/>
    <id>http://blog.wglgg.cn/2017/03/02/idea-spring-boot-devtools-not-work/</id>
    <published>2017-03-02T05:25:37.000Z</published>
    <updated>2017-04-07T06:51:33.601Z</updated>
    
    <content type="html"><![CDATA[<p>javaå¼€å‘ä¸­æ€»æ˜¯ä¼šé¢‘ç¹é‡å¯åº”ç”¨ï¼Œéå¸¸éº»çƒ¦ï¼Œ<code>Spring Boot</code>å¯ä»¥åˆ©ç”¨<code>devtools</code>é…ç½®å½“ä¿®æ”¹ä»£ç æ—¶è‡ªåŠ¨é‡å¯åº”ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çƒ­éƒ¨ç½²å·¥å…·<code>jrebel</code>ï¼Œä½†æ˜¯åœ¨ideaä¸‹é»˜è®¤ä¸ç”Ÿæ•ˆï¼Œgoogleåå¾—åˆ°ç­”æ¡ˆï¼Œideaä¸ä¼šè‡ªåŠ¨ç¼–è¯‘ç¨‹åºï¼Œå¼€å¯è‡ªåŠ¨ç¼–è¯‘åå‘ç°ï¼Œåœ¨åº”ç”¨è¿è¡Œä¸­ä¹Ÿä¸ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œæ‰¾åˆ°é—®é¢˜åŸå› äº†ï¼Œä¸‹é¢æ¥è§£å†³å®ƒ</p>
<h2 id="è®¾ç½®idea-è‡ªåŠ¨ç¼–è¯‘"><a href="#è®¾ç½®idea-è‡ªåŠ¨ç¼–è¯‘" class="headerlink" title="è®¾ç½®idea è‡ªåŠ¨ç¼–è¯‘"></a>è®¾ç½®idea è‡ªåŠ¨ç¼–è¯‘</h2><p>Settings..<br><img src="/images/intellij_idea/idea_auto_compile.png" alt="å¼€å¯è‡ªåŠ¨ç¼–è¯‘"></p>
<h2 id="è®¾ç½®idea-åœ¨ç¨‹åºè¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘"><a href="#è®¾ç½®idea-åœ¨ç¨‹åºè¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘" class="headerlink" title="è®¾ç½®idea åœ¨ç¨‹åºè¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘"></a>è®¾ç½®idea åœ¨ç¨‹åºè¿è¡Œä¸­è‡ªåŠ¨ç¼–è¯‘</h2><p>å¿«æ·é”® ctrl + alt + shift + / é€‰æ‹©Registry<br><img src="/images/intellij_idea/ctrl_shift_xie_registry.png" alt="æ‰“å¼€è®¾ç½®"><br>å‹¾é€‰compiler.automake.allow.when.app.running<br><img src="/images/intellij_idea/enable_compile_when_app_running.png" alt="å‹¾é€‰compile_when_app_running"></p>
<h2 id="Spring-Boot-é…ç½®"><a href="#Spring-Boot-é…ç½®" class="headerlink" title="Spring Boot é…ç½®"></a>Spring Boot é…ç½®</h2><p>pom.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;dependencies&gt;</div><div class="line">    ...</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</div><div class="line">        &lt;optional&gt;true&lt;/optional&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div><div class="line">&lt;build&gt;</div><div class="line">    &lt;plugins&gt;</div><div class="line">        ...</div><div class="line">        &lt;plugin&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</div><div class="line">            &lt;configuration&gt;</div><div class="line">                &lt;fork&gt;true&lt;/fork&gt;</div><div class="line">            &lt;/configuration&gt;</div><div class="line">        &lt;/plugin&gt;</div><div class="line">    &lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure></p>
<p>é‡å¯åº”ç”¨ï¼Œå°±å¯ä»¥äº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;javaå¼€å‘ä¸­æ€»æ˜¯ä¼šé¢‘ç¹é‡å¯åº”ç”¨ï¼Œéå¸¸éº»çƒ¦ï¼Œ&lt;code&gt;Spring Boot&lt;/code&gt;å¯ä»¥åˆ©ç”¨&lt;code&gt;devtools&lt;/code&gt;é…ç½®å½“ä¿®æ”¹ä»£ç æ—¶è‡ªåŠ¨é‡å¯åº”ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨çƒ­éƒ¨ç½²å·¥å…·&lt;code&gt;jrebel&lt;/code&gt;ï¼Œä½†æ˜¯åœ¨ideaä¸‹é»˜è®¤ä¸ç”Ÿæ•ˆï¼Œgoogleå
    
    </summary>
    
      <category term="devtools" scheme="http://blog.wglgg.cn/categories/devtools/"/>
    
    
      <category term="spring-boot" scheme="http://blog.wglgg.cn/tags/spring-boot/"/>
    
      <category term="idea" scheme="http://blog.wglgg.cn/tags/idea/"/>
    
      <category term="devtools" scheme="http://blog.wglgg.cn/tags/devtools/"/>
    
  </entry>
  
  <entry>
    <title>msys2-here-context-menu-items</title>
    <link href="http://blog.wglgg.cn/2017/02/28/msys2-here-context-menu-items/"/>
    <id>http://blog.wglgg.cn/2017/02/28/msys2-here-context-menu-items/</id>
    <published>2017-02-28T04:03:13.000Z</published>
    <updated>2017-04-07T06:51:33.613Z</updated>
    
    <content type="html"><![CDATA[<h2 id="register-reg"><a href="#register-reg" class="headerlink" title="register.reg"></a>register.reg</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Windows Registry Editor Version 5.00</div><div class="line"></div><div class="line">[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MSYS here\command]</div><div class="line">@=&quot;C:\\msys64\\msys2.exe bash&quot;</div><div class="line"></div><div class="line">[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW64 here\command]</div><div class="line">@=&quot;C:\\msys64\\mingw64.exe bash&quot;</div><div class="line"></div><div class="line">[HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW32 here\command]</div><div class="line">@=&quot;C:\\msys64\\mingw32.exe bash&quot;</div></pre></td></tr></table></figure>
<h2 id="unregister-reg"><a href="#unregister-reg" class="headerlink" title="unregister.reg"></a>unregister.reg</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Windows Registry Editor Version 5.00</div><div class="line"></div><div class="line">[-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MSYS here]</div><div class="line">[-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW64 here]</div><div class="line">[-HKEY_CURRENT_USER\Software\Classes\Directory\Background\shell\MINGW32 here]</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;register-reg&quot;&gt;&lt;a href=&quot;#register-reg&quot; class=&quot;headerlink&quot; title=&quot;register.reg&quot;&gt;&lt;/a&gt;register.reg&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;
    
    </summary>
    
    
      <category term="msys2" scheme="http://blog.wglgg.cn/tags/msys2/"/>
    
      <category term="mingw" scheme="http://blog.wglgg.cn/tags/mingw/"/>
    
  </entry>
  
  <entry>
    <title>nginx upgrade &amp; add module</title>
    <link href="http://blog.wglgg.cn/2016/12/22/nginx-upgrade/"/>
    <id>http://blog.wglgg.cn/2016/12/22/nginx-upgrade/</id>
    <published>2016-12-21T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.617Z</updated>
    
    <content type="html"><![CDATA[<h1 id="nginx-upgrade-amp-add-module"><a href="#nginx-upgrade-amp-add-module" class="headerlink" title="nginx upgrade &amp; add module"></a>nginx upgrade &amp; add module</h1><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>å‡çº§nginxç‰ˆæœ¬ 1.10.1 â€“&gt; 1.10.2</li>
<li>æ·»åŠ ç¼“å­˜æ¨¡å—</li>
<li>æ·»åŠ æ–‡ä»¶ä¸Šä¼ æ¨¡å—å’Œä¸Šä¼ è¿›åº¦æ¨¡å—</li>
</ul>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="æŸ¥çœ‹-nginx-å·²å®‰è£…æ¨¡å—"><a href="#æŸ¥çœ‹-nginx-å·²å®‰è£…æ¨¡å—" class="headerlink" title="æŸ¥çœ‹ nginx å·²å®‰è£…æ¨¡å—"></a>æŸ¥çœ‹ nginx å·²å®‰è£…æ¨¡å—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$nginx -V</div><div class="line">--prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic&apos;</div></pre></td></tr></table></figure>
<h3 id="å¤‡ä»½åŸnginx"><a href="#å¤‡ä»½åŸnginx" class="headerlink" title="å¤‡ä»½åŸnginx"></a>å¤‡ä»½åŸnginx</h3><h3 id="ä¸‹è½½æ–°ç‰ˆæœ¬çš„nginxå’Œéœ€è¦æ·»åŠ çš„æ¨¡å—å¹¶è§£å‹"><a href="#ä¸‹è½½æ–°ç‰ˆæœ¬çš„nginxå’Œéœ€è¦æ·»åŠ çš„æ¨¡å—å¹¶è§£å‹" class="headerlink" title="ä¸‹è½½æ–°ç‰ˆæœ¬çš„nginxå’Œéœ€è¦æ·»åŠ çš„æ¨¡å—å¹¶è§£å‹"></a>ä¸‹è½½æ–°ç‰ˆæœ¬çš„nginxå’Œéœ€è¦æ·»åŠ çš„æ¨¡å—å¹¶è§£å‹</h3><h4 id="ä¸‹è½½nginx-1-10-2"><a href="#ä¸‹è½½nginx-1-10-2" class="headerlink" title="ä¸‹è½½nginx 1.10.2"></a>ä¸‹è½½nginx 1.10.2</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$wget http://nginx.org/download/nginx-1.10.2.tar.gz</div></pre></td></tr></table></figure>
<h4 id="ä¸‹è½½-nginx-upload-module"><a href="#ä¸‹è½½-nginx-upload-module" class="headerlink" title="ä¸‹è½½ nginx-upload-module"></a>ä¸‹è½½ nginx-upload-module</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$wget https://codeload.github.com/vkholodkov/nginx-upload-module/tar.gz/2.2.0</div></pre></td></tr></table></figure>
<h4 id="ä¸‹è½½-nginx-upload-progress-module"><a href="#ä¸‹è½½-nginx-upload-progress-module" class="headerlink" title="ä¸‹è½½ nginx-upload-progress-module"></a>ä¸‹è½½ nginx-upload-progress-module</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$wget https://github.com/masterzen/nginx-upload-progress-module/archive/v0.9.2.tar.gz</div></pre></td></tr></table></figure>
<h4 id="ä¸‹è½½-ngx-cache-purge"><a href="#ä¸‹è½½-ngx-cache-purge" class="headerlink" title="ä¸‹è½½ ngx_cache_purge"></a>ä¸‹è½½ ngx_cache_purge</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$wget https://codeload.github.com/FRiCKLE/ngx_cache_purge/tar.gz/2.3</div></pre></td></tr></table></figure>
<h4 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ tar zxf nginx-1.10.2.tar.gz</div><div class="line">$ tar zxf nginx-upload-module-2.2.0.tar.gz</div><div class="line">$ tar zxf nginx-upload-progress-module.tar.gz</div><div class="line">$ tar zxf ngx_cache_purge-2.3.tar.gz</div></pre></td></tr></table></figure>
<h2 id="å‡çº§å¹¶æ·»åŠ æ–°æ¨¡å—"><a href="#å‡çº§å¹¶æ·»åŠ æ–°æ¨¡å—" class="headerlink" title="å‡çº§å¹¶æ·»åŠ æ–°æ¨¡å—"></a>å‡çº§å¹¶æ·»åŠ æ–°æ¨¡å—</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-file-aio --with-threads --with-ipv6 --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_ssl_module --add-module=/root/nginxinstall/nginx-upload-module-2.0.12 --add-module=/root/nginxinstall/nginx-upload-progress-module-82b35fc --add-module=/root/nginxinstall/ngx_cache_purge-2.3 --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic&apos;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;nginx-upgrade-amp-add-module&quot;&gt;&lt;a href=&quot;#nginx-upgrade-amp-add-module&quot; class=&quot;headerlink&quot; title=&quot;nginx upgrade &amp;amp; add module&quot;&gt;&lt;/a&gt;
    
    </summary>
    
      <category term="nginx" scheme="http://blog.wglgg.cn/categories/nginx/"/>
    
    
      <category term="nginx" scheme="http://blog.wglgg.cn/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>osx å¸¸ç”¨å¼€å‘å·¥å…·</title>
    <link href="http://blog.wglgg.cn/2016/09/10/osx-dev-tools/"/>
    <id>http://blog.wglgg.cn/2016/09/10/osx-dev-tools/</id>
    <published>2016-09-09T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.621Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ZSH"><a href="#ZSH" class="headerlink" title="ZSH"></a>ZSH</h2><h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><pre><code>sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;
</code></pre><h2 id="homebrew"><a href="#homebrew" class="headerlink" title="homebrew"></a>homebrew</h2><h3 id="install-1"><a href="#install-1" class="headerlink" title="install"></a>install</h3><pre><code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre><h2 id="iterm2"><a href="#iterm2" class="headerlink" title="iterm2"></a>iterm2</h2><h3 id="install-2"><a href="#install-2" class="headerlink" title="install"></a>install</h3><pre><code>brew cask install iterm2
</code></pre><h2 id="dev-tool"><a href="#dev-tool" class="headerlink" title="dev tool"></a>dev tool</h2><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><h4 id="install-3"><a href="#install-3" class="headerlink" title="install"></a>install</h4><pre><code>brew install mysql
</code></pre><h4 id="start"><a href="#start" class="headerlink" title="start"></a>start</h4><pre><code>mysql.server start
</code></pre><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><h4 id="install-4"><a href="#install-4" class="headerlink" title="install"></a>install</h4><pre><code>brew install redis
==&gt; Downloading https://homebrew.bintray.com/bottles/redis-3.2.3.el_capitan.bottle.tar.gz

curl: (7) Failed to connect to akamai.bintray.com port 443: Operation timed out
Error: Failed to download resource &quot;redis&quot;
Download failed: https://homebrew.bintray.com/bottles/redis-3.2.3.el_capitan.bottle.tar.gz
Warning: Bottle installation failed: building from source.
==&gt; Using the sandbox
==&gt; Downloading http://download.redis.io/releases/redis-3.2.3.tar.gz
==&gt; Downloading from http://101.44.1.117/files/B22400000598F419/download.redis.io/releases/redis-3.2.3.tar.gz
######################################################################## 100.0%
==&gt; make install PREFIX=/usr/local/Cellar/redis/3.2.3 CC=clang
==&gt; Caveats
To have launchd start redis now and restart at login:
  brew services start redis
Or, if you don&apos;t want/need a background service you can just run:
  redis-server /usr/local/etc/redis.conf
==&gt; Summary
ğŸº  /usr/local/Cellar/redis/3.2.3: 10 files, 1.7M, built in 13 seconds
</code></pre><h4 id="start-1"><a href="#start-1" class="headerlink" title="start"></a>start</h4><pre><code>brew services start redis
</code></pre><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><h4 id="install-5"><a href="#install-5" class="headerlink" title="install"></a>install</h4><pre><code>brew cask install java
java -version
java version &quot;1.8.0_102&quot;
Java(TM) SE Runtime Environment (build 1.8.0_102-b14)
Java HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode)
</code></pre><h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><h4 id="install-6"><a href="#install-6" class="headerlink" title="install"></a>install</h4><pre><code>brew cask install maven
mvn -v
Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T00:41:47+08:00)
Maven home: /usr/local/Cellar/maven/3.3.9/libexec
Java version: 1.8.0_102, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_102.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;mac os x&quot;, version: &quot;10.11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;
</code></pre><h3 id="gradle"><a href="#gradle" class="headerlink" title="gradle"></a>gradle</h3><h4 id="install-7"><a href="#install-7" class="headerlink" title="install"></a>install</h4><pre><code>brew cask install gradle
gradle -v
------------------------------------------------------------
Gradle 3.0
------------------------------------------------------------

Build time:   2016-08-15 13:15:01 UTC
Revision:     ad76ba00f59ecb287bd3c037bd25fc3df13ca558

Groovy:       2.4.7
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_102 (Oracle Corporation 25.102-b14)
OS:           Mac OS X 10.11.6 x86_64
</code></pre><h3 id="groovy"><a href="#groovy" class="headerlink" title="groovy"></a>groovy</h3><h4 id="install-8"><a href="#install-8" class="headerlink" title="install"></a>install</h4><pre><code>brew cask install groovy
</code></pre><h3 id="cask"><a href="#cask" class="headerlink" title="cask"></a>cask</h3><p>cask å¯ä»¥å®‰è£…å¾ˆå¤šè½¯ä»¶ã€ä¾‹å¦‚<code>jdk</code>ï¼Œ<code>maven</code>ï¼Œ <code>groovy</code>ï¼Œ <code>macDown</code>ï¼Œ <code>idea</code> ç­‰ç­‰ä¸€ç³»åˆ—è½¯ä»¶éƒ½å¯ä»¥é€šè¿‡<code>cask</code>å®‰è£…</p>
]]></content>
    
    <summary type="html">
    
      osx å¸¸ç”¨å¼€å‘å·¥å…· æŠ€å·§ æ•´ç†
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
      <category term="osx" scheme="http://blog.wglgg.cn/tags/osx/"/>
    
      <category term="tool" scheme="http://blog.wglgg.cn/tags/tool/"/>
    
      <category term="zsh" scheme="http://blog.wglgg.cn/tags/zsh/"/>
    
      <category term="homebrew" scheme="http://blog.wglgg.cn/tags/homebrew/"/>
    
      <category term="brew" scheme="http://blog.wglgg.cn/tags/brew/"/>
    
      <category term="iterm2" scheme="http://blog.wglgg.cn/tags/iterm2/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨å°è„šæœ¬å°è¯•</title>
    <link href="http://blog.wglgg.cn/2016/03/30/server-bash/"/>
    <id>http://blog.wglgg.cn/2016/03/30/server-bash/</id>
    <published>2016-03-29T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.644Z</updated>
    
    <content type="html"><![CDATA[<p>###å¤‡ä»½MySQLæ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">mysqldump -uroot -proot cswebsite &gt; /root/cswebsite_`date +%Y%m%d%H%M%S`.sql</div></pre></td></tr></table></figure>
<p>###å¤‡ä»½tomcat åº”ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">echo &quot;shutdown tomcat..&quot;</div><div class="line"></div><div class="line">/root/tomcat8/bin/shutdown.sh</div><div class="line"></div><div class="line">echo &quot;begin backup stillone...&quot;</div><div class="line"></div><div class="line">tar -zcvf /root/backup/stillone_`date +%Y%m%d%H%M%S`.tar.gz /root/tomcat8/webapps/ROOT --exclude=Files --exclude=uploadFiles</div><div class="line"></div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo -e &quot;\033[32;49;1m backup stillone done! have fun!! \033[39;49;0m&quot;</div><div class="line">echo &quot;&quot;</div><div class="line">echo &quot;&quot;</div></pre></td></tr></table></figure>
<h3 id="ç­›é€‰nginxæ—¥å¿—è®¿é—®é‡IPæ’åtop1000-http-çŠ¶æ€ç 403-è¯·æ±‚è·¯å¾„-v2-sms-send"><a href="#ç­›é€‰nginxæ—¥å¿—è®¿é—®é‡IPæ’åtop1000-http-çŠ¶æ€ç 403-è¯·æ±‚è·¯å¾„-v2-sms-send" class="headerlink" title="ç­›é€‰nginxæ—¥å¿—è®¿é—®é‡IPæ’åtop1000(http çŠ¶æ€ç 403  è¯·æ±‚è·¯å¾„/v2/sms/send)"></a>ç­›é€‰nginxæ—¥å¿—è®¿é—®é‡IPæ’åtop1000(http çŠ¶æ€ç 403  è¯·æ±‚è·¯å¾„/v2/sms/send)</h3><pre><code>awk &apos;{if($9==&quot;403&quot; &amp;&amp; $7==&quot;/v2/sms/send&quot;) print $1}&apos; /usr/local/tomcat/nginx-log/api.credan.com.log | sort | uniq -c | sort -nr -k1|head -n 1000
</code></pre>]]></content>
    
    <summary type="html">
    
      æœåŠ¡å™¨ç»´æŠ¤è„šæœ¬ tomcat åº”ç”¨å¤‡ä»½æ“ä½œ  æ•°æ®åº“å¤‡ä»½æ“ä½œ
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆå…­ï¼‰ZSet ç±»å‹</title>
    <link href="http://blog.wglgg.cn/2015/03/04/redis-datatype-zset/"/>
    <id>http://blog.wglgg.cn/2015/03/04/redis-datatype-zset/</id>
    <published>2015-03-03T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.634Z</updated>
    
    <content type="html"><![CDATA[<h2 id="zset-ç±»å‹ç®€ä»‹"><a href="#zset-ç±»å‹ç®€ä»‹" class="headerlink" title="zset ç±»å‹ç®€ä»‹"></a>zset ç±»å‹ç®€ä»‹</h2><p>zsetå…¨ç§°ä¸ºsorted-setsç±»å‹,å’Œsetæ•°æ®ç±»å‹æœ‰æä¸ºç›¸ä¼¼,éƒ½æ˜¯å­—ç¬¦ä¸²çš„é›†åˆ,éƒ½ä¸å…è®¸é‡å¤çš„æˆå‘˜<br>å‡ºç°åœ¨ä¸€ä¸ªsetä¸­.ä¸¤è€…çš„ä¸»è¦åŒºåˆ«æ˜¯zsetçš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½ä¼šæœ‰ä¸€ä¸ªåˆ†æ•°(score)ä¸ä¹‹å…³è”.redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åº.zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤.<br>åœ¨zsetä¸­æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ–°ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯éå¸¸å¿«é€Ÿçš„æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºé›†åˆä¸­æˆå‘˜æ•°é‡çš„å¯¹æ•°.</p>
<p>Sorted-Setsä¸­çš„æˆå‘˜åœ¨é›†åˆä¸­çš„ä½ç½®æ˜¯æœ‰åºçš„.</p>
<h2 id="zset-æ“ä½œ"><a href="#zset-æ“ä½œ" class="headerlink" title="zset æ“ä½œ"></a>zset æ“ä½œ</h2><h3 id="1-zadd"><a href="#1-zadd" class="headerlink" title="1. zadd"></a>1. zadd</h3><p>å‘½ä»¤æ ¼å¼: zadd key score member [[score] [member] â€¦]</p>
<p>æè¿°ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ª member å…ƒç´ åŠå…¶ score å€¼åŠ å…¥åˆ°æœ‰åºé›† key å½“ä¸­.å¦‚æœæŸä¸ª member å·²ç»æ˜¯æœ‰åºé›†çš„æˆå‘˜ï¼Œé‚£ä¹ˆæ›´æ–°è¿™ä¸ª member çš„ score å€¼ï¼Œå¹¶é€šè¿‡é‡æ–°æ’å…¥è¿™ä¸ª member å…ƒç´ ï¼Œæ¥ä¿è¯è¯¥ member åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šã€‚score å€¼å¯ä»¥æ˜¯æ•´æ•°å€¼æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„æœ‰åºé›†å¹¶æ‰§è¡Œ ZADD æ“ä½œã€‚å½“ key å­˜åœ¨ä½†ä¸æ˜¯æœ‰åºé›†ç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦: O(M*log(N))ï¼Œ N æ˜¯æœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºæˆåŠŸæ·»åŠ çš„æ–°æˆå‘˜çš„æ•°é‡</p>
<p>è¿”å›å€¼:è¢«æˆåŠŸæ·»åŠ çš„æ–°æˆå‘˜çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬é‚£äº›è¢«æ›´æ–°çš„ã€å·²ç»å­˜åœ¨çš„æˆå‘˜ã€‚</p>
<p>æ·»åŠ ä¸€ä¸ªå…ƒç´ </p>
<pre><code>127.0.0.1:6379[1]&gt; zadd zset_list 11 test1
(integer) 1
</code></pre><p>æ·»åŠ å¤šä¸ªå…ƒç´ </p>
<pre><code>127.0.0.1:6379[1]&gt; zadd zset_list 1 test2 2 test3
(integer) 2
</code></pre><p>æŸ¥çœ‹å…ƒç´ </p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1
1) &quot;test2&quot;
2) &quot;test3&quot;
3) &quot;test1&quot;
</code></pre><p>æŸ¥çœ‹å…ƒç´ å¸¦scoreå€¼</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
5) &quot;test1&quot;
6) &quot;11&quot;
</code></pre><p>æ·»åŠ å·²å­˜åœ¨å…ƒç´ ï¼Œä¸” score å€¼ä¸å˜ æ“ä½œä¸æˆåŠŸè¿”å›0</p>
<pre><code>127.0.0.1:6379[1]&gt; zadd zset_list 11 test1
(integer) 0
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
5) &quot;test1&quot;
6) &quot;11&quot;
</code></pre><p>æ·»åŠ å·²å­˜åœ¨å…ƒç´ ï¼Œä½†æ˜¯æ”¹å˜ score å€¼</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
5) &quot;test1&quot;
6) &quot;3&quot;
</code></pre><h3 id="zrem"><a href="#zrem" class="headerlink" title="zrem"></a>zrem</h3><p>å‘½ä»¤æ ¼å¼: ZREM key member [member â€¦]</p>
<p>æè¿°:ç§»é™¤æœ‰åºé›† key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œä¸å­˜åœ¨çš„æˆå‘˜å°†è¢«å¿½ç•¥ã€‚å½“ key å­˜åœ¨ä½†ä¸æ˜¯æœ‰åºé›†ç±»å‹æ—¶ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦:O(M*log(N))ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºè¢«æˆåŠŸç§»é™¤çš„æˆå‘˜çš„æ•°é‡ã€‚</p>
<p>è¿”å›å€¼:è¢«æˆåŠŸç§»é™¤çš„æˆå‘˜çš„æ•°é‡ï¼Œä¸åŒ…æ‹¬è¢«å¿½ç•¥çš„æˆå‘˜ã€‚</p>
<p>ç§»é™¤å•ä¸ªå…ƒç´ </p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
5) &quot;test1&quot;
6) &quot;3&quot;
127.0.0.1:6379[1]&gt; zrem zset_list test1
(integer) 1
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
</code></pre><p>ç§»é™¤å¤šä¸ª</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrem zset_list test2 test3
(integer) 2
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
(empty list or set)
</code></pre><p>ç§»é™¤ä¸å­˜åœ¨å…ƒç´ </p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
(empty list or set)
127.0.0.1:6379[1]&gt; zrem zset_list test2
(integer) 0
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
(empty list or set)
</code></pre><h3 id="zcard"><a href="#zcard" class="headerlink" title="zcard"></a>zcard</h3><p>æè¿°ï¼šè¿”å›zseté›†åˆçš„æˆå‘˜æ•°</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</p>
<p>è¿”å›å€¼ï¼šå½“ key å­˜åœ¨ä¸”æ˜¯æœ‰åºé›†(zset)ç±»å‹æ—¶ï¼Œè¿”å›é›†åˆå†…çš„æˆå‘˜æ•°ã€‚ä¸å­˜åœ¨è¿”å›0ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zcard zset_list
(integer) 0
127.0.0.1:6379[1]&gt; zadd zset_list 0 test1
(integer) 1
127.0.0.1:6379[1]&gt; zcard zset_list
(integer) 1
127.0.0.1:6379[1]&gt; zadd zset_list 1 test2 2 test3
(integer) 2
127.0.0.1:6379[1]&gt; zcard zset_list
(integer) 3
</code></pre><h3 id="zcount"><a href="#zcount" class="headerlink" title="zcount"></a>zcount</h3><p>å‘½ä»¤æ ¼å¼:ZCOUNT key min max</p>
<p>æè¿°ï¼šè¿”å›æœ‰åºé›† key ä¸­ï¼Œ score å€¼åœ¨ min å’Œ max ä¹‹é—´(é»˜è®¤åŒ…æ‹¬ score å€¼ç­‰äº min æˆ– max )çš„æˆå‘˜çš„æ•°é‡ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦: O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºå€¼åœ¨ min å’Œ max ä¹‹é—´çš„å…ƒç´ çš„æ•°é‡ã€‚</p>
<p>è¿”å›å€¼ï¼šscore å€¼åœ¨ min å’Œ max ä¹‹é—´çš„æˆå‘˜çš„æ•°é‡ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zcount zset_list 1 2
(integer) 2
127.0.0.1:6379[1]&gt; zcount zset_list 0 2
(integer) 3
127.0.0.1:6379[1]&gt; zcount zset_list 2 2
(integer) 1 
</code></pre><h3 id="zscore"><a href="#zscore" class="headerlink" title="zscore"></a>zscore</h3><p>å‘½ä»¤æ ¼å¼:ZSCORE key member</p>
<p>æè¿°:è¿”å›æœ‰åºé›† key ä¸­ï¼Œæˆå‘˜ member çš„ score å€¼ã€‚å¦‚æœ member å…ƒç´ ä¸æ˜¯æœ‰åºé›† key çš„æˆå‘˜ï¼Œæˆ– key ä¸å­˜åœ¨ï¼Œè¿”å› nil ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦:O(1)</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zscore zset_list test2
&quot;1&quot;
127.0.0.1:6379[1]&gt; zscore zset_list test5
(nil)
</code></pre><h3 id="zincrby"><a href="#zincrby" class="headerlink" title="zincrby"></a>zincrby</h3><p>å‘½ä»¤æ ¼å¼ï¼šZINCRBY key increment member</p>
<p>æè¿°ï¼šä¸ºæœ‰åºé›† key çš„æˆå‘˜ member çš„ score å€¼åŠ ä¸Šå¢é‡ increment ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(log(N))</p>
<p>è¿”å›å€¼ï¼š è¿”å›member æˆå‘˜çš„æ–° score å€¼ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zscore zset_list test2
&quot;1&quot;
127.0.0.1:6379[1]&gt; zincrby zset_list 2 test2
&quot;3&quot;
127.0.0.1:6379[1]&gt; zincrby zset_list -2 test2
&quot;1&quot;
</code></pre><h3 id="zrange"><a href="#zrange" class="headerlink" title="zrange"></a>zrange</h3><p>å‘½ä»¤æ ¼å¼: ZRANGE key start stop [WITHSCORES]</p>
<p>æè¿°ï¼šè¿”å›æŒ‡å®šåŒºé—´çš„æˆå‘˜ã€‚å…¶ä¸­æˆå‘˜ä½ç½®æŒ‰ score å€¼é€’å¢(ä»å°åˆ°å¤§)æ¥æ’åºã€‚ WITHSCORESé€‰é¡¹æ˜¯ç”¨æ¥è®©æˆå‘˜å’Œå®ƒçš„scoreå€¼ä¸€å¹¶è¿”å›.(åœ¨å‰é¢æˆ‘ä»¬å·²ç»ç”¨åˆ°è¿‡)</p>
<p>æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºç»“æœé›†çš„åŸºæ•°ã€‚</p>
<p>è¿”å›å€¼ï¼šè¿”å›æŒ‡å®šåŒºé—´çš„æˆå‘˜åˆ—è¡¨.</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 1 2
1) &quot;test2&quot;
2) &quot;test3&quot;
127.0.0.1:6379[1]&gt; zrange zset_list 0 2
1) &quot;test1&quot;
2) &quot;test2&quot;
3) &quot;test3&quot;
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1
1) &quot;test1&quot;
2) &quot;test2&quot;
3) &quot;test3&quot;
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
</code></pre><p>å½“ç»™å®šåŒºé—´ä¸å­˜åœ¨äºæœ‰åºé›†æ—¶çš„æƒ…å†µ</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 10 20
(empty list or set)
</code></pre><h3 id="zrevrange"><a href="#zrevrange" class="headerlink" title="zrevrange"></a>zrevrange</h3><p>å‘½ä»¤æ ¼å¼ï¼šZREVRANGE key start stop [WITHSCORES]</p>
<p>æè¿°ï¼šå’Œzrangeä¸€æ ·ä½¿ç”¨ï¼Œå”¯ä¸€ä¸åŒæ˜¯å…¶æˆå‘˜ä½ç½®æŒ‰ score å€¼é€’å‡(ä»å¤§åˆ°å°)æ¥æ’åˆ—ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrevrange zset_list 0 -1 withscores
1) &quot;test3&quot;
2) &quot;2&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test1&quot;
6) &quot;0&quot;
</code></pre><h3 id="zrangebyscore"><a href="#zrangebyscore" class="headerlink" title="zrangebyscore"></a>zrangebyscore</h3><p>å‘½ä»¤æ ¼å¼ï¼šZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</p>
<p>æè¿°ï¼šè¿”å›æœ‰åºé›†keyä¸­æ‰€æœ‰scoreå€¼ä»‹äºminä¸maxä¹‹é—´(åŒ…æ‹¬ç­‰äº)çš„æˆå‘˜.æˆå‘˜æŒ‰scoreå€¼é€’å¢(ä»å°åˆ°å¤§)æ’åˆ— ã€‚min å’Œ max å¯ä»¥æ˜¯ -inf å’Œ +infå¯é€‰limitå‚æ•°æŒ‡å®šè¿”å›ç»“æœçš„æ•°é‡åŠåŒºé—´ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œ M ä¸ºè¢«ç»“æœé›†çš„åŸºæ•°ã€‚</p>
<p>è¿”å›å€¼ï¼šæŒ‡å®šåŒºé—´å†…ï¼Œå¸¦æœ‰ score å€¼(å¯é€‰)çš„æœ‰åºé›†æˆå‘˜çš„åˆ—è¡¨ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf
1) &quot;test1&quot;
2) &quot;test2&quot;
3) &quot;test3&quot;
127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrangebyscore zset_list 1 +inf withscores
1) &quot;test2&quot;
2) &quot;1&quot;
3) &quot;test3&quot;
4) &quot;2&quot;
</code></pre><p>æ˜¾ç¤ºå¤§äº2 å°äºç­‰äº10çš„æˆå‘˜</p>
<pre><code>127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrangebyscore zset_list (1 10
1) &quot;test3
</code></pre><p>æ˜¾ç¤ºæ¡ä»¶ 1 &lt; score &lt; 10 çš„æˆå‘˜</p>
<pre><code>127.0.0.1:6379[1]&gt; zrangebyscore zset_list (1 (10
1) &quot;test3&quot;
</code></pre><h3 id="zrevrangebyscore"><a href="#zrevrangebyscore" class="headerlink" title="zrevrangebyscore"></a>zrevrangebyscore</h3><p>å‘½ä»¤æ ¼å¼: zrevrangebyscore key max min [WITHSCORES] [LIMIT offset count]</p>
<p>æè¿°ï¼šå’Œzrangebyscoreä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯æˆå‘˜æŒ‰ score å€¼é€’å‡(ä»å¤§åˆ°å°)çš„æ¬¡åºæ’åˆ—ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrangebyscore zset_list -inf +inf withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrevrangebyscore zset_list +inf -inf withscores
1) &quot;test3&quot;
2) &quot;2&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test1&quot;
6) &quot;0&quot;
</code></pre><h3 id="zrank"><a href="#zrank" class="headerlink" title="zrank"></a>zrank</h3><p>å‘½ä»¤æ ¼å¼ï¼š zrank key member</p>
<p>æè¿°ï¼šè¿”å›æœ‰åºé›†keyä¸­æˆå‘˜memberçš„æ’åã€‚æˆå‘˜æŒ‰ score å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—ã€‚æ’åä»¥0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´score å€¼æœ€å°çš„ä¸º0.</p>
<p>æ—¶é—´å¤æ‚åº¦:O(log(N))</p>
<p>è¿”å›å€¼ï¼šè¿”å›æˆå‘˜æ’åï¼Œmemberä¸å­˜åœ¨è¿”å›nil.</p>
<pre><code>127.0.0.1:6379[1]&gt; zrank zset_list test1
(integer) 0
</code></pre><h3 id="zrevrank"><a href="#zrevrank" class="headerlink" title="zrevrank"></a>zrevrank</h3><p>å‘½ä»¤æ ¼å¼ï¼š zrevrank key member</p>
<p>æè¿°ï¼šè¿”å›æœ‰åºé›†keyä¸­æˆå‘˜memberçš„æ’åã€‚æˆå‘˜æŒ‰ score å€¼é€’å¢(ä»å¤§åˆ°å°)é¡ºåºæ’åˆ—ã€‚æ’åä»¥0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´score å€¼æœ€å¤§çš„ä¸º0.</p>
<p>æ—¶é—´å¤æ‚åº¦:O(log(N))</p>
<p>è¿”å›å€¼ï¼šè¿”å›æˆå‘˜æ’åï¼Œmemberä¸å­˜åœ¨è¿”å›nil.</p>
<pre><code>127.0.0.1:6379[1]&gt; zrevrank zset_list test3
(integer) 0
</code></pre><h3 id="zremrangebyrank"><a href="#zremrangebyrank" class="headerlink" title="zremrangebyrank"></a>zremrangebyrank</h3><p>å‘½ä»¤æ ¼å¼: ZREMRANGEBYRANK key start stop</p>
<p>æè¿°ï¼šç§»é™¤æœ‰åºé›† key ä¸­ï¼ŒæŒ‡å®šæ’å(rank)åŒºé—´å†…çš„æ‰€æœ‰æˆå‘˜ã€‚åŒºé—´åˆ†åˆ«ä»¥ä¸‹æ ‡å‚æ•° start å’Œ stop æŒ‡å‡ºï¼ŒåŒ…å« start å’Œ stop åœ¨å†…ã€‚ä¸‹æ ‡å‚æ•° start å’Œ stop éƒ½ä»¥ 0 ä¸ºåº•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ 0 è¡¨ç¤ºæœ‰åºé›†ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œä»¥ 1 è¡¨ç¤ºæœ‰åºé›†ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªæˆå‘˜ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªæˆå‘˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºè¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚</p>
<p>è¿”å›å€¼:è¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;2&quot;
127.0.0.1:6379[1]&gt; zremrangebyrank zset_list 1 2
(integer) 2
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
</code></pre><h3 id="zremrangebyscore"><a href="#zremrangebyscore" class="headerlink" title="zremrangebyscore"></a>zremrangebyscore</h3><p>å‘½ä»¤æ ¼å¼ï¼šzremrangebyscore key min max</p>
<p>æè¿°ï¼šç§»é™¤scoreå€¼ä»‹äºminå’Œmaxä¹‹é—´ï¼ˆç­‰äºï¼‰çš„æˆå‘˜</p>
<p>æ—¶é—´å¤æ‚åº¦:O(log(N)+M)ï¼Œ N ä¸ºæœ‰åºé›†çš„åŸºæ•°ï¼Œè€Œ M ä¸ºè¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚</p>
<p>è¿”å›å€¼:è¢«ç§»é™¤æˆå‘˜çš„æ•°é‡ã€‚</p>
<p>ç§»é™¤æ‰€æœ‰scoreåœ¨ 100 åˆ° 110 å†…çš„æ•°æ®</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test11&quot;
4) &quot;100&quot;
5) &quot;test22&quot;
6) &quot;101&quot;
127.0.0.1:6379[1]&gt; zremrangebyscore zset_list 100 110
(integer) 2
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
</code></pre><h3 id="zunionstore"><a href="#zunionstore" class="headerlink" title="zunionstore"></a>zunionstore</h3><p>å‘½ä»¤æ ¼å¼ï¼šZUNIONSTORE destination numkeys key [key â€¦] [WEIGHTS weight [weight â€¦]] [AGGREGATE SUM|MIN|MAX]</p>
<p>æè¿°ï¼šè®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå…¶ä¸­ç»™å®š key çš„æ•°é‡å¿…é¡»ä»¥ numkeys å‚æ•°æŒ‡å®šï¼Œå¹¶å°†è¯¥å¹¶é›†(ç»“æœé›†)å‚¨å­˜åˆ° destination ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœé›†ä¸­æŸä¸ªæˆå‘˜çš„ score å€¼æ˜¯æ‰€æœ‰ç»™å®šé›†ä¸‹è¯¥æˆå‘˜ score å€¼ä¹‹ å’Œ ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zadd zset1 1 test1 2 test2
(integer) 2
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
127.0.0.1:6379[1]&gt; zadd zset_list 1 test2
(integer) 1
127.0.0.1:6379[1]&gt; zunionstore dis_set 2 zset_list zset1
(integer) 2
127.0.0.1:6379[1]&gt; zrange dis_set 0 -1 withscores
1) &quot;test1&quot;
2) &quot;1&quot;
3) &quot;test2&quot;
4) &quot;3&quot;
127.0.0.1:6379[1]&gt; zrange zset1 0 -1 withscores
1) &quot;test1&quot;
2) &quot;1&quot;
3) &quot;test2&quot;
4) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
127.0.0.1:6379[1]&gt; zadd zset_list 3 test3
(integer) 1
127.0.0.1:6379[1]&gt; zunionstore dis_set1 2 zset_list zset1
(integer) 3
127.0.0.1:6379[1]&gt; zrange dis_set1 0 -1 withscores
1) &quot;test1&quot;
2) &quot;1&quot;
3) &quot;test2&quot;
4) &quot;3&quot;
5) &quot;test3&quot;
6) &quot;3&quot;
</code></pre><h3 id="zinterstore"><a href="#zinterstore" class="headerlink" title="zinterstore"></a>zinterstore</h3><p>å‘½ä»¤æ ¼å¼ï¼šZINTERSTORE destination numkeys key [key â€¦] [WEIGHTS weight [weight â€¦]] [AGGREGATE SUM|MIN|MAX]</p>
<p>æè¿°ï¼šè®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†ã€‚å…¶ä¸­ç»™å®š key çš„æ•°é‡å¿…é¡»ä»¥ numkeys å‚æ•°æŒ‡å®šï¼Œå¹¶å°†è¯¥äº¤é›†(ç»“æœé›†)å‚¨å­˜åˆ° destination ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœé›†ä¸­æŸä¸ªæˆå‘˜çš„ score å€¼æ˜¯æ‰€æœ‰ç»™å®šé›†ä¸‹è¯¥æˆå‘˜ score å€¼ä¹‹ å’Œ ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(N<em>K)+O(M</em>log(M))ï¼Œ N ä¸ºç»™å®š key ä¸­åŸºæ•°æœ€å°çš„æœ‰åºé›†ï¼Œ K ä¸ºç»™å®šæœ‰åºé›†çš„æ•°é‡ï¼Œ M ä¸ºç»“æœé›†çš„åŸºæ•°ã€‚</p>
<p>è¿”å›å€¼ï¼šä¿å­˜åˆ° destination çš„ç»“æœé›†æˆå‘˜æ•°ã€‚</p>
<pre><code>127.0.0.1:6379[1]&gt; zrange zset1 0 -1 withscores
1) &quot;test1&quot;
2) &quot;1&quot;
3) &quot;test2&quot;
4) &quot;2&quot;
127.0.0.1:6379[1]&gt; zrange zset_list 0 -1 withscores
1) &quot;test1&quot;
2) &quot;0&quot;
3) &quot;test2&quot;
4) &quot;1&quot;
5) &quot;test3&quot;
6) &quot;3&quot;
127.0.0.1:6379[1]&gt; zinterstore dis_set2 2 zset1 zset_list
(integer) 2
127.0.0.1:6379[1]&gt; zrange dis_set2 0 -1 withscores
1) &quot;test1&quot;
2) &quot;1&quot;
3) &quot;test2&quot;
4) &quot;3&quot;
</code></pre>]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆå…­ï¼‰ZSet ç±»å‹
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆä¸ƒï¼‰keyï¼ˆé”®ï¼‰çš„ç›¸å…³æ“ä½œ</title>
    <link href="http://blog.wglgg.cn/2015/03/04/redis-key-operation/"/>
    <id>http://blog.wglgg.cn/2015/03/04/redis-key-operation/</id>
    <published>2015-03-03T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.642Z</updated>
    
    <content type="html"><![CDATA[<h3 id="del"><a href="#del" class="headerlink" title="del"></a>del</h3><p>æ—¶é—´å¤æ‚åº¦: Stringç±»å‹å…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚ å…¶ä½™O(N) Nè¡¨åˆ é™¤keyæ•°é‡.</p>
<p>æè¿°ï¼šåˆ é™¤</p>
<p>è¿”å›å€¼: å®é™…è¢«åˆ é™¤çš„KEYæ•°é‡</p>
<p>æ“ä½œå‘½ä»¤å¦‚ä¸‹:</p>
<pre><code>redis 127.0.0.1:6379&gt; del my_set_diff my_set
(integer) 2
</code></pre><h3 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h3><p>å‘½ä»¤æ ¼å¼: keys pattern</p>
<p>æè¿°: è·å–æ‰€æœ‰åŒ¹é…PATTERNå‚æ•°çš„keys.</p>
<p>æ—¶é—´å¤æ‚åº¦: O(N) è¡¨KEYçš„æ•°é‡.</p>
<p>è¿”å›å€¼:åŒ¹é…æ¨¡å¼çš„é”®åˆ—è¡¨ã€‚</p>
<p>æ“ä½œå‘½ä»¤å¦‚ä¸‹:</p>
<pre><code>redis 127.0.0.1:6379&gt; keys my*
1) â€œmy_set_2â€³
2) â€œmyset2â€³
3) â€œmyset5â€³
4) â€œmysetâ€
</code></pre><h3 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h3><p>æè¿°: åˆ¤æ–­æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨ã€‚1å­˜åœ¨,0ä¸å­˜åœ¨.</p>
<p>æ—¶é—´å¤æ‚åº¦:O(1)</p>
<p>æ“ä½œå‘½ä»¤å¦‚ä¸‹:</p>
<pre><code>redis 127.0.0.1:6379&gt; exists myset
(integer) 1
redis 127.0.0.1:6379&gt; exists myset9
(integer) 0
</code></pre><h3 id="move"><a href="#move" class="headerlink" title="move"></a>move</h3><p>å‘½ä»¤æ ¼å¼: move key db</p>
<p>æ—¶é—´å¤æ‚åº¦:O(1)</p>
<p>æè¿°: å°†å½“å‰æ•°æ®åº“ä¸­æŒ‡å®šçš„é”®Keyç§»åŠ¨åˆ°å‚æ•°ä¸­æŒ‡å®šçš„æ•°æ®åº“ä¸­ã€‚å¦‚æœè¯¥Keyåœ¨ç›®æ ‡æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ï¼Œæˆ–è€…åœ¨å½“å‰æ•°æ®åº“ä¸­å¹¶ä¸å­˜åœ¨ï¼Œè¯¥å‘½ä»¤å°†ä¸åšä»»ä½•æ“ä½œå¹¶è¿”å›0ã€‚redisä¸­é»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œé»˜è®¤ä»0å¼€å§‹åˆ°15ã€‚</p>
<p>è¿”å›å€¼:æˆåŠŸ1 å¦åˆ™0</p>
<h3 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h3><p>å‘½ä»¤æ ¼å¼: rename key newkey</p>
<p>æ—¶é—´å¤æ‚åº¦:O(1)</p>
<p>æè¿°: é‡å‘½åkey,keyä¸å­˜åœ¨å°†æŠ¥é”™,å¦‚æœnewKeyå­˜åœ¨åˆ™ç›´æ¥è¦†ç›–</p>
<h3 id="renamenx"><a href="#renamenx" class="headerlink" title="renamenx"></a>renamenx</h3><p>å‘½ä»¤æ ¼å¼: renamenx key newkey</p>
<p>æ—¶é—´å¤æ‚åº¦:O(1)</p>
<p>æè¿°:å½“newkeyä¸å­˜åœ¨æ—¶æ‰é‡å‘½å.</p>
<p>è¿”å›å€¼: æˆåŠŸè¿”å›1,å¦‚é‡Œnewkeyå·²ç»å­˜åœ¨,è¿”å›0.</p>
<h3 id="persist"><a href="#persist" class="headerlink" title="persist"></a>persist</h3><p>å‘½ä»¤æ ¼å¼:persist key</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:ç§»é™¤ç»™å®škeyçš„ç”Ÿå­˜æ—¶é—´ã€‚</p>
<p>è¿”å›å€¼:1è¡¨ç¤ºKeyçš„è¿‡æœŸæ—¶é—´è¢«ç§»å‡ºï¼Œ0è¡¨ç¤ºè¯¥Keyä¸å­˜åœ¨æˆ–æ²¡æœ‰è¿‡æœŸæ—¶é—´ã€‚</p>
<h3 id="expire"><a href="#expire" class="headerlink" title="expire"></a>expire</h3><p>å‘½ä»¤æ ¼å¼:EXPIRE key seconds</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:ä¸ºç»™å®škeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ã€‚å½“keyè¿‡æœŸæ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤</p>
<p>è¿”å›å€¼:è®¾ç½®æˆåŠŸè¿”å›1ã€‚å½“keyä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œè¿”å›0ã€‚</p>
<h3 id="expireat"><a href="#expireat" class="headerlink" title="expireat"></a>expireat</h3><p>å‘½ä»¤æ ¼å¼:expireat key timetamp</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:EXPIREATçš„ä½œç”¨å’ŒEXPIREä¸€æ ·ï¼Œéƒ½ç”¨äºä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ã€‚ä¸åŒåœ¨äºEXPIREATå‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯UNIXæ—¶é—´æˆ³(unix timestamp)ã€‚</p>
<p>è¿”å›å€¼:è®¾ç½®æˆåŠŸè¿”å›1ã€‚å½“keyä¸å­˜åœ¨æˆ–è€…ä¸èƒ½ä¸ºkeyè®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼Œè¿”å›0ã€‚</p>
<h3 id="ttl"><a href="#ttl" class="headerlink" title="ttl"></a>ttl</h3><p>å‘½ä»¤æ ¼å¼:ttl key</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:è¿”å›ç»™å®škeyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(time to live)(ä»¥ç§’ä¸ºå•ä½)ã€‚</p>
<p>è¿”å›å€¼:keyçš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(ä»¥ç§’ä¸ºå•ä½)ã€‚å½“keyä¸å­˜åœ¨æˆ–æ²¡æœ‰è®¾ç½®ç”Ÿå­˜æ—¶é—´æ—¶ï¼Œè¿”å›-1 ã€‚</p>
<h3 id="randomkey"><a href="#randomkey" class="headerlink" title="randomkey"></a>randomkey</h3><p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:éšæœºçš„è¿”å›ä¸€ä¸ªKeyã€‚</p>
<p>è¿”å›å€¼:è¿”å›çš„éšæœºé”®ï¼Œå¦‚æœè¯¥æ•°æ®åº“æ˜¯ç©ºçš„åˆ™è¿”å›nilã€‚</p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>å‘½ä»¤æ ¼å¼:type key</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:è·å–keyçš„ç±»å‹</p>
<p>è¿”å›å€¼: è¿”å›çš„å­—ç¬¦ä¸²ä¸ºstringã€listã€setã€hashå’Œzsetï¼Œå¦‚æœkeyä¸å­˜åœ¨è¿”å›noneã€‚</p>
<h3 id="dump"><a href="#dump" class="headerlink" title="dump"></a>dump</h3><p>å‘½ä»¤æ ¼å¼:dump key</p>
<p>å¯ç”¨ç‰ˆæœ¬:reidis&gt;=2.6.0</p>
<p>æ—¶é—´å¤æ‚åº¦: O(1)</p>
<p>æè¿°:åºåˆ—åŒ–ç»™å®škey,å¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼,ä½¿ç”¨ RESTORE å‘½ä»¤å¯ä»¥å°†è¿™ä¸ªå€¼ååºåˆ—åŒ–ä¸º Redis é”®ã€‚</p>
<p>è¿”å›å€¼: å¦‚keyä¸å­˜åœ¨è¿”å›nli,å¦åˆ™è¿”å›è¢«åºåˆ—åŒ–çš„å€¼.</p>
]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆä¸ƒï¼‰keyï¼ˆé”®ï¼‰çš„ç›¸å…³æ“ä½œ
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>Java é‡è½½ä¸é‡å†™çš„åŒºåˆ«</title>
    <link href="http://blog.wglgg.cn/2014/08/15/java-overloading-Overriding/"/>
    <id>http://blog.wglgg.cn/2014/08/15/java-overloading-Overriding/</id>
    <published>2014-08-14T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.606Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é‡è½½-Overloading"><a href="#é‡è½½-Overloading" class="headerlink" title="é‡è½½(Overloading)"></a>é‡è½½(Overloading)</h2><p>ï¼ˆ1ï¼‰ æ–¹æ³•é‡è½½æ˜¯è®©ç±»ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»å‹æ•°æ®çš„ä¸€ç§æ‰‹æ®µã€‚å¤šä¸ªåŒåå‡½æ•°åŒæ—¶å­˜åœ¨ï¼Œå…·æœ‰ä¸åŒçš„å‚æ•°ä¸ªæ•°/ç±»å‹ã€‚</p>
<p>é‡è½½Overloadingæ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨ç°ã€‚</p>
<p>ï¼ˆ2ï¼‰Javaçš„æ–¹æ³•é‡è½½ï¼Œå°±æ˜¯åœ¨ç±»ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªæ–¹æ³•ï¼Œå®ƒä»¬å…·æœ‰ç›¸åŒçš„åå­—ï¼Œä½†å…·æœ‰ä¸åŒçš„å‚æ•°å’Œä¸åŒçš„å®šä¹‰ã€‚</p>
<p>è°ƒç”¨æ–¹æ³•æ—¶é€šè¿‡ä¼ é€’ç»™å®ƒä»¬çš„ä¸åŒå‚æ•°ä¸ªæ•°å’Œå‚æ•°ç±»å‹æ¥å†³å®šå…·ä½“ä½¿ç”¨å“ªä¸ªæ–¹æ³•, è¿™å°±æ˜¯å¤šæ€æ€§ã€‚</p>
<p>ï¼ˆ3ï¼‰ é‡è½½çš„æ—¶å€™ï¼Œæ–¹æ³•åè¦ä¸€æ ·ï¼Œä½†æ˜¯å‚æ•°ç±»å‹å’Œä¸ªæ•°ä¸ä¸€æ ·ï¼Œè¿”å›å€¼ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ç›¸åŒã€‚æ— æ³•ä»¥è¿”å›å‹åˆ«ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†ã€‚</p>
<p>ä¸‹é¢æ˜¯é‡è½½çš„ä¾‹å­ï¼š<br>package c04.answer;//è¿™æ˜¯åŒ…å<br>//è¿™æ˜¯è¿™ä¸ªç¨‹åºçš„ç¬¬ä¸€ç§ç¼–ç¨‹æ–¹æ³•ï¼Œåœ¨mainæ–¹æ³•ä¸­å…ˆåˆ›å»ºä¸€ä¸ªDogç±»å®ä¾‹ï¼Œç„¶ååœ¨Dogç±»çš„æ„é€ æ–¹æ³•ä¸­åˆ©ç”¨thiså…³é”®å­—è°ƒç”¨ä¸åŒçš„barkæ–¹æ³•ã€‚</p>
<p>ä¸åŒçš„é‡è½½æ–¹æ³•barkæ˜¯æ ¹æ®å…¶å‚æ•°ç±»å‹çš„ä¸åŒè€ŒåŒºåˆ†çš„ã€‚</p>
<p>//æ³¨æ„ï¼šé™¤æ„é€ å™¨ä»¥å¤–ï¼Œç¼–è¯‘å™¨ç¦æ­¢åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹ä¸­è°ƒç”¨æ„é€ å™¨ã€‚</p>
<pre><code>package c04.answer;
public class Dog {

    Dog(){
        this.bark();
    }

    //bark()æ–¹æ³•æ˜¯é‡è½½æ–¹æ³•
    void bark(){
        System.out.println(&quot;no barking!&quot;);
        this.bark(&quot;female&quot;, 3.4);
    }

    //æ³¨æ„ï¼šé‡è½½çš„æ–¹æ³•çš„è¿”å›å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ
    void bark(String m,double l) {
        System.out.println(&quot;a barking dog!&quot;);
        this.bark(5, &quot;China&quot;);
    }
    //ä¸èƒ½ä»¥è¿”å›å€¼åŒºåˆ†é‡è½½æ–¹æ³•ï¼Œè€Œåªèƒ½ä»¥â€œå‚æ•°ç±»å‹â€å’Œâ€œç±»åâ€æ¥åŒºåˆ†
    void bark(int a,String n) {
        System.out.println(&quot;a howling dog&quot;);
    }
    public static void main(String[] args) {
        Dog dog = new Dog();
        //dog.bark(); [Page]
        //dog.bark(&quot;male&quot;, &quot;yellow&quot;);
        //dog.bark(5, &quot;China&quot;);
    }
}
</code></pre><h2 id="é‡å†™ï¼ˆOverridingï¼‰"><a href="#é‡å†™ï¼ˆOverridingï¼‰" class="headerlink" title="é‡å†™ï¼ˆOverridingï¼‰"></a>é‡å†™ï¼ˆOverridingï¼‰</h2><p>ï¼ˆ1ï¼‰ çˆ¶ç±»ä¸å­ç±»ä¹‹é—´çš„å¤šæ€æ€§ï¼Œå¯¹çˆ¶ç±»çš„å‡½æ•°è¿›è¡Œé‡æ–°å®šä¹‰ã€‚å¦‚æœåœ¨å­ç±»ä¸­å®šä¹‰æŸæ–¹æ³•ä¸å…¶çˆ¶ç±»æœ‰ç›¸åŒçš„åç§°å’Œå‚æ•°ï¼Œæˆ‘ä»¬è¯´è¯¥æ–¹æ³•è¢«é‡å†™ (Overriding)ã€‚åœ¨Javaä¸­ï¼Œå­ç±»å¯ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–å†™ç›¸åŒçš„æ–¹æ³•ã€‚</p>
<p>ä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨åœ°ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³ä½œä¸€å®šçš„ä¿®æ”¹ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨æ–¹æ³•çš„é‡å†™ã€‚</p>
<p>æ–¹æ³•é‡å†™åˆç§°æ–¹æ³•è¦†ç›–ã€‚</p>
<p>ï¼ˆ2ï¼‰è‹¥å­ç±»ä¸­çš„æ–¹æ³•ä¸çˆ¶ç±»ä¸­çš„æŸä¸€æ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•åã€è¿”å›ç±»å‹å’Œå‚æ•°è¡¨ï¼Œåˆ™æ–°æ–¹æ³•å°†è¦†ç›–åŸæœ‰çš„æ–¹æ³•ã€‚</p>
<p>å¦‚éœ€çˆ¶ç±»ä¸­åŸæœ‰çš„æ–¹æ³•ï¼Œå¯ä½¿ç”¨superå…³é”®å­—ï¼Œè¯¥å…³é”®å­—å¼•ç”¨äº†å½“å‰ç±»çš„çˆ¶ç±»ã€‚</p>
<p>ï¼ˆ3ï¼‰å­ç±»å‡½æ•°çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºçˆ¶ç±»çš„ï¼›<br>ä¸‹é¢æ˜¯é‡å†™çš„ä¾‹å­ï¼š</p>
<p>æ¦‚å¿µï¼šå³è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æœºåˆ¶ã€‚</p>
<p>åŠ¨æ€ç»‘å®šçš„å†…å¹•ï¼š</p>
<p>1ã€ç¼–è¯‘å™¨æ£€æŸ¥å¯¹è±¡å£°æ˜çš„ç±»å‹å’Œæ–¹æ³•åï¼Œä»è€Œè·å–æ‰€æœ‰å€™é€‰æ–¹æ³•ã€‚è¯•ç€æŠŠä¸Šä¾‹Baseç±»çš„testæ³¨é‡Šæ‰ï¼Œè¿™æ—¶å†ç¼–è¯‘å°±æ— æ³•é€šè¿‡ã€‚</p>
<p>2ã€é‡è½½å†³ç­–ï¼šç¼–è¯‘å™¨æ£€æŸ¥æ–¹æ³•è°ƒç”¨çš„å‚æ•°ç±»å‹ï¼Œä»ä¸Šè¿°å€™é€‰æ–¹æ³•é€‰å‡ºå”¯ä¸€çš„é‚£ä¸€ä¸ªï¼ˆå…¶é—´ä¼šæœ‰éšå«ç±»å‹è½¬åŒ–ï¼‰ã€‚</p>
<p>å¦‚æœç¼–è¯‘å™¨æ‰¾åˆ°å¤šäºä¸€ä¸ªæˆ–è€…æ²¡æ‰¾åˆ°ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚è¯•ç€æŠŠä¸Šä¾‹Baseç±»çš„test(byte b)æ³¨é‡Šæ‰ï¼Œè¿™æ—¶è¿è¡Œç»“æœæ˜¯1 1ã€‚</p>
<p>3ã€è‹¥æ–¹æ³•ç±»å‹ä¸ºpriavte static final ï¼Œjavaé‡‡ç”¨é™æ€ç¼–è¯‘ï¼Œç¼–è¯‘å™¨ä¼šå‡†ç¡®çŸ¥é“è¯¥è°ƒç”¨å“ª<br>ä¸ªæ–¹æ³•ã€‚</p>
<p>4ã€å½“ç¨‹åºè¿è¡Œå¹¶ä¸”ä½¿ç”¨åŠ¨æ€ç»‘å®šæ¥è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå¿…é¡»è°ƒç”¨å¯¹è±¡çš„å®é™…ç±»å‹ç›¸åŒ¹é…çš„æ–¹æ³•ç‰ˆæœ¬ã€‚</p>
<p>åœ¨ä¾‹å­ä¸­ï¼Œbæ‰€æŒ‡å‘çš„å®é™…ç±»å‹æ˜¯TestOverridingï¼Œæ‰€ä»¥b.test(0)è°ƒç”¨å­ç±»çš„testã€‚</p>
<p>ä½†æ˜¯ï¼Œå­ç±»å¹¶æ²¡æœ‰é‡å†™test(byte b)ï¼Œæ‰€ä»¥b.test((byte)0)è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„test(byte b)ã€‚</p>
<p>å¦‚æœæŠŠçˆ¶ç±»çš„(byte b)æ³¨é‡Šæ‰ï¼Œåˆ™é€šè¿‡ç¬¬äºŒæ­¥éšå«ç±»å‹è½¬åŒ–ä¸ºint,æœ€ç»ˆè°ƒç”¨çš„æ˜¯å­ç±»çš„test(int i)ã€‚</p>
<p>å­¦ä¹ æ€»ç»“ï¼š</p>
<p>å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§ç‰¹æ€§ï¼Œå’Œæ–¹æ³•æ— å…³ï¼Œ<br>ç®€å•è¯´ï¼Œå°±æ˜¯åŒæ ·çš„ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ ¹æ®è¾“å…¥æ•°æ®çš„ä¸åŒï¼Œåšå‡ºä¸åŒçš„å¤„ç†ï¼Œå³æ–¹æ³•çš„<br>é‡è½½â€”â€”æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆé™æ€å¤šæ€æ€§ï¼‰</p>
<p>ã€€è€Œå½“å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ï¼Œè¾“å…¥æ•°æ®ä¸€æ ·ï¼Œä½†è¦åšå‡ºæœ‰åˆ«äºçˆ¶ç±»çš„å“åº”æ—¶ï¼Œä½ å°±è¦è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼Œ</p>
<p>å³åœ¨å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•â€”â€”ç›¸åŒå‚æ•°ï¼Œä¸åŒå®ç°ï¼ˆåŠ¨æ€å¤šæ€æ€§ï¼‰</p>
<p>OOPä¸‰å¤§ç‰¹æ€§ï¼šç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…ã€‚</p>
<pre><code>public class Base {
    void test(int i) {
        System.out.print(i);
    }

    void test(byte b){
        System.out.print(b);
    }
}
public class TestOverriding extends Base {
    void test(int i) {
        i++;
        System.out.println(i);
    }
    public static void main(String[]agrs) {
        Base b=new TestOverriding();
        b.test(0)
        b.test((byte)0)
    }
}
</code></pre><p>è¿™æ—¶çš„è¾“å‡ºç»“æœæ˜¯1 0ï¼Œè¿™æ˜¯è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šçš„ç»“æœã€‚</p>
<p>é‡å†™çš„ä¸»è¦ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿå®šä¹‰æŸä¸ªå­ç±»ç‰¹æœ‰çš„ç‰¹å¾ï¼š</p>
<pre><code>public class Father{

    public void speak(){
        System.out.println(Father);
    }
   }

public class SonextendsFather{
    public void speak(){
        System.out.println(&quot;son&quot;);
    }
}
</code></pre><p>è¿™ä¹Ÿå«åšå¤šæ€æ€§ï¼Œé‡å†™æ–¹æ³•åªèƒ½å­˜åœ¨äºå…·æœ‰ç»§æ‰¿å…³ç³»ä¸­ï¼Œé‡å†™æ–¹æ³•åªèƒ½é‡å†™çˆ¶ç±»éç§æœ‰çš„æ–¹æ³•ã€‚</p>
<p>å½“ä¸Šä¾‹ä¸­Fatherç±»speak()æ–¹æ³•è¢«privateæ—¶ï¼ŒSonç±»ä¸èƒ½é‡å†™å‡ºFatherç±»speak()æ–¹æ³•ï¼Œæ­¤æ—¶Sonç±»speak()æ–¹æ³•ç›¸å½“ä¸åœ¨Sonç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªspeak()æ–¹æ³•ã€‚</p>
<p>Fatherç±»speak()æ–¹æ³•ä¸€ä½†è¢«finalæ—¶ï¼Œæ— è®ºè¯¥æ–¹æ³•è¢«public,protectedåŠé»˜è®¤æ‰€ä¿®é¥°æ—¶ï¼ŒSonç±»æ ¹æœ¬ä¸èƒ½é‡å†™Fatherç±»speak()æ–¹æ³•ï¼Œ</p>
<p>è¯•å›¾ç¼–è¯‘ä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ä¾‹ï¼š</p>
<pre><code>public class Father{
    final public void speak(){
        System.out.println(&quot;Father&quot;);
    }
}
public class SonextendsFather{
    public void speak(){
        System.out.println(&quot;son&quot;);
    }
}//ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼›
</code></pre><p>Fatherç±»speak()æ–¹æ³•è¢«é»˜è®¤ä¿®é¥°æ—¶ï¼Œåªèƒ½åœ¨åŒä¸€åŒ…ä¸­ï¼Œè¢«å…¶å­ç±»è¢«é‡å†™ï¼Œå¦‚æœä¸åœ¨åŒä¸€åŒ…åˆ™ä¸èƒ½é‡å†™ã€‚</p>
<p>Fatherç±»speak()æ–¹æ³•è¢«protoetedæ—¶ï¼Œä¸ä»…åœ¨åŒä¸€åŒ…ä¸­ï¼Œè¢«å…¶å­ç±»è¢«é‡å†™ï¼Œè¿˜å¯ä»¥ä¸åŒåŒ…çš„å­ç±»é‡å†™ã€‚</p>
<p>é‡å†™æ–¹æ³•çš„è§„åˆ™ï¼š</p>
<p>1ã€å‚æ•°åˆ—è¡¨å¿…é¡»å®Œå…¨ä¸è¢«é‡å†™çš„æ–¹æ³•ç›¸åŒï¼Œå¦åˆ™ä¸èƒ½ç§°å…¶ä¸ºé‡å†™è€Œæ˜¯é‡è½½ã€‚</p>
<p>2ã€è¿”å›çš„ç±»å‹å¿…é¡»ä¸€ç›´ä¸è¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›ç±»å‹ç›¸åŒï¼Œå¦åˆ™ä¸èƒ½ç§°å…¶ä¸ºé‡å†™è€Œæ˜¯é‡è½½ã€‚</p>
<p>3ã€è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶ä¸€å®šè¦å¤§äºè¢«é‡å†™æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic&gt;protected&gt;default&gt;privateï¼‰</p>
<p>4ã€é‡å†™æ–¹æ³•ä¸€å®šä¸èƒ½æŠ›å‡ºæ–°çš„æ£€æŸ¥å¼‚å¸¸æˆ–è€…æ¯”è¢«é‡å†™æ–¹æ³•ç”³æ˜æ›´åŠ å®½æ³›çš„æ£€æŸ¥å‹å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š</p>
<p>çˆ¶ç±»çš„ä¸€ä¸ªæ–¹æ³•ç”³æ˜äº†ä¸€ä¸ªæ£€æŸ¥å¼‚å¸¸IOExceptionï¼Œåœ¨é‡å†™è¿™ä¸ªæ–¹æ³•æ˜¯å°±ä¸èƒ½æŠ›å‡ºException,åªèƒ½æŠ›å‡ºIOExceptionçš„å­ç±»å¼‚å¸¸ï¼Œå¯ä»¥æŠ›å‡ºéæ£€æŸ¥å¼‚å¸¸ã€‚</p>
<p>è€Œé‡è½½çš„è§„åˆ™ï¼š</p>
<p>1ã€å¿…é¡»å…·æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼›</p>
<p>2ã€å¯ä»¥æœ‰ä¸è´£éª‚çš„è¿”å›ç±»å‹ï¼Œåªè¦å‚æ•°åˆ—è¡¨ä¸åŒå°±å¯ä»¥äº†ï¼›</p>
<p>3ã€å¯ä»¥æœ‰ä¸åŒçš„è®¿é—®ä¿®é¥°ç¬¦ï¼›</p>
<p>4ã€å¯ä»¥æŠ›å‡ºä¸åŒçš„å¼‚å¸¸ï¼›</p>
<p>é‡å†™ä¸é‡è½½çš„åŒºåˆ«åœ¨äºï¼š</p>
<p>é‡å†™å¤šæ€æ€§èµ·ä½œç”¨ï¼Œå¯¹è°ƒç”¨è¢«é‡è½½è¿‡çš„æ–¹æ³•å¯ä»¥å¤§å¤§å‡å°‘ä»£ç çš„è¾“å…¥é‡ï¼ŒåŒä¸€ä¸ªæ–¹æ³•ååªè¦å¾€é‡Œé¢ä¼ é€’ä¸åŒçš„å‚æ•°å°±å¯ä»¥æ‹¥æœ‰ä¸åŒçš„åŠŸèƒ½æˆ–è¿”å›å€¼ã€‚</p>
<p>ç”¨å¥½é‡å†™å’Œé‡è½½å¯ä»¥è®¾è®¡ä¸€ä¸ªç»“æ„æ¸…æ™°è€Œç®€æ´çš„ç±»ï¼Œå¯ä»¥è¯´é‡å†™å’Œé‡è½½åœ¨ç¼–å†™ä»£ç è¿‡ç¨‹ä¸­çš„ä½œç”¨éåŒä¸€èˆ¬.</p>
<p>ï¼ˆæ¥æºï¼šåšå®¢å›­ï¼‰</p>
]]></content>
    
    <summary type="html">
    
      Java é‡è½½ä¸é‡å†™çš„åŒºåˆ«
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>Javaä¸­å…³äºMapçš„ä¹å¤§é—®é¢˜</title>
    <link href="http://blog.wglgg.cn/2014/08/14/java-map-9-problems/"/>
    <id>http://blog.wglgg.cn/2014/08/14/java-map-9-problems/</id>
    <published>2014-08-13T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.604Z</updated>
    
    <content type="html"><![CDATA[<p>é€šå¸¸æ¥è¯´ï¼ŒMapæ˜¯ä¸€ä¸ªç”±é”®å€¼å¯¹ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œä¸”åœ¨é›†åˆä¸­æ¯ä¸ªé”®æ˜¯å”¯ä¸€çš„ã€‚ä¸‹é¢å°±ä»¥Kå’ŒVæ¥ä»£è¡¨é”®å’Œå€¼ï¼Œæ¥è¯´æ˜ä¸€ä¸‹javaä¸­å…³äºMapçš„ä¹å¤§é—®é¢˜ã€‚</p>
<h2 id="1ã€å°†Mapè½¬æ¢ä¸ºListç±»å‹"><a href="#1ã€å°†Mapè½¬æ¢ä¸ºListç±»å‹" class="headerlink" title="1ã€å°†Mapè½¬æ¢ä¸ºListç±»å‹"></a>1ã€å°†Mapè½¬æ¢ä¸ºListç±»å‹</h2><p>åœ¨javaä¸­Mapæ¥å£æä¾›äº†ä¸‰ç§é›†åˆè·å–æ–¹å¼ï¼šKey set,ï¼Œvalue setï¼Œ and key-value set.ã€‚å®ƒä»¬éƒ½å¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•æˆ–è€…addAll()æ–¹æ³•æ¥è½¬æ¢ä¸ºListç±»å‹ã€‚ä¸‹é¢ä»£ç å°±è¯´æ˜äº†å¦‚ä½•ä»Mapä¸­æ„é€ ArrayListï¼š</p>
<pre><code>// key list
List keyList = new ArrayList(map.keySet());
// value list
List valueList = new ArrayList(map.valueSet());
// key-value list
List entryList = new ArrayList(map.entrySet());
</code></pre><h2 id="2ã€é€šè¿‡Entry-éå†Map"><a href="#2ã€é€šè¿‡Entry-éå†Map" class="headerlink" title="2ã€é€šè¿‡Entry éå†Map"></a>2ã€é€šè¿‡Entry éå†Map</h2><p>javaä¸­è¿™ç§ä»¥é”®å€¼å¯¹å­˜åœ¨çš„æ–¹å¼è¢«ç§°ä¸ºMap.Entryã€‚Map.entrySet()è¿”å›çš„æ˜¯ä¸€ä¸ªkey-value é›†åˆï¼Œè¿™æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„éå†æ–¹å¼ã€‚</p>
<pre><code>for(Entry entry: map.entrySet()) {
    // get key
    K key = entry.getKey();
    // get value
    V value = entry.getValue();
}
</code></pre><p>Iterator æˆ‘ä»¬ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶æ˜¯åœ¨JDK1.5ä»¥å‰</p>
<pre><code>Iterator itr = map.entrySet().iterator();
while(itr.hasNext()) {
    Entry entry = itr.next();
    // get key
    K key = entry.getKey();
    // get value
    V value = entry.getValue();
}
</code></pre><h2 id="3ã€é€šè¿‡Keyæ¥å¯¹Mapæ’åº"><a href="#3ã€é€šè¿‡Keyæ¥å¯¹Mapæ’åº" class="headerlink" title="3ã€é€šè¿‡Keyæ¥å¯¹Mapæ’åº"></a>3ã€é€šè¿‡Keyæ¥å¯¹Mapæ’åº</h2><p>æ’åºéœ€è¦å¯¹Mapçš„keè¿›è¡Œé¢‘ç¹çš„æ“ä½œï¼Œä¸€ç§æ–¹å¼å°±æ˜¯é€šè¿‡æ¯”è¾ƒå™¨(comparator )æ¥å®ç°ï¼š</p>
<pre><code>List list = new ArrayList(map.entrySet());
Collections.sort(list, new Comparator() {
    @Override
    public int compare(Entry e1, Entry e2) {
        return e1.getKey().compareTo(e2.getKey());
    }
});
</code></pre><p>å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯é€šè¿‡SortedMapï¼Œä½†å¿…é¡»è¦å®ç°Comparableæ¥å£ã€‚</p>
<pre><code>SortedMap sortedMap = new TreeMap(new Comparator() {
    @Override
    public int compare(K k1, K k2) {
        return k1.compareTo(k2);
    }
});
sortedMap.putAll(map);
</code></pre><h2 id="4ã€å¯¹valueå¯¹Mapè¿›è¡Œæ’åº"><a href="#4ã€å¯¹valueå¯¹Mapè¿›è¡Œæ’åº" class="headerlink" title="4ã€å¯¹valueå¯¹Mapè¿›è¡Œæ’åº"></a>4ã€å¯¹valueå¯¹Mapè¿›è¡Œæ’åº</h2><p>è¿™ä¸ä¸Šä¸€ç‚¹æœ‰äº›ç±»ä¼¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>List list = new ArrayList(map.entrySet());
Collections.sort(list, new Comparator() {
    @Override
    public int compare(Entry e1, Entry e2) {
        return e1.getValue().compareTo(e2.getValue());
    }
});
</code></pre><h2 id="5ã€åˆå§‹åŒ–ä¸€ä¸ªstatic-çš„å¸¸é‡Map"><a href="#5ã€åˆå§‹åŒ–ä¸€ä¸ªstatic-çš„å¸¸é‡Map" class="headerlink" title="5ã€åˆå§‹åŒ–ä¸€ä¸ªstatic çš„å¸¸é‡Map"></a>5ã€åˆå§‹åŒ–ä¸€ä¸ªstatic çš„å¸¸é‡Map</h2><p>å½“ä½ å¸Œæœ›åˆ›å»ºä¸€ä¸ªå…¨å±€é™æ€Mapçš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼Œè€Œä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<br>è€Œåœ¨Test1ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶å£°æ˜äº†mapæ˜¯é™æ€çš„ï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æ”¹å˜å®ƒçš„å€¼ï¼Œå°±åƒTest1.map.put(3,â€threeâ€);<br>åœ¨Test2ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå°†å…¶è®¾ç½®ä¸ºä¸å¯ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬è¿è¡ŒTest2.map.put(3,â€threeâ€)çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªUnsupportedOperationException å¼‚å¸¸æ¥ç¦æ­¢ä½ ä¿®æ”¹ã€‚<br>    public class Test1 {<br>        private static final Map map;<br>        static {<br>            map = new HashMap();<br>            map.put(1, â€œoneâ€);<br>            map.put(2, â€œtwoâ€);<br>        }<br>    }</p>
<pre><code>public class Test2 {
    private static final Map map;
    static {
        Map aMap = new HashMap();
        aMap.put(1, â€œoneâ€);
        aMap.put(2, â€œtwoâ€);
        map = Collections.unmodifiableMap(aMap);
    }
}
</code></pre><h2 id="6ã€HashMap-TreeMap-and-Hashtableä¹‹é—´çš„ä¸åŒ"><a href="#6ã€HashMap-TreeMap-and-Hashtableä¹‹é—´çš„ä¸åŒ" class="headerlink" title="6ã€HashMap, TreeMap, and Hashtableä¹‹é—´çš„ä¸åŒ"></a>6ã€HashMap, TreeMap, and Hashtableä¹‹é—´çš„ä¸åŒ</h2><p>åœ¨Mapæ¥å£ä¸­ï¼Œå…±æœ‰ä¸‰ç§å®ç°ï¼šHashMapï¼ŒTreeMapï¼ŒHashtableã€‚</p>
<p>å®ƒä»¬ä¹‹é—´å„æœ‰ä¸åŒï¼Œè¯¦ç»†å†…å®¹è¯·å‚è€ƒã€Š HashMap vs. TreeMap vs. Hashtable vs. LinkedHashMapã€‹ä¸€æ–‡ã€‚</p>
<h2 id="6ã€Mapä¸­çš„åå‘æŸ¥è¯¢"><a href="#6ã€Mapä¸­çš„åå‘æŸ¥è¯¢" class="headerlink" title="6ã€Mapä¸­çš„åå‘æŸ¥è¯¢"></a>6ã€Mapä¸­çš„åå‘æŸ¥è¯¢</h2><p>æˆ‘ä»¬åœ¨Mapæ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹åï¼Œæ„å‘³ç€è¿™åœ¨Mapä¸­é”®å’Œå€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªé”®å°±æ˜¯å¯¹åº”ä¸€ä¸ªå€¼ã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åå‘æŸ¥è¯¢ï¼Œæ¯”å¦‚é€šè¿‡æŸä¸€ä¸ªå€¼æ¥æŸ¥æ‰¾å®ƒçš„é”®ï¼Œè¿™ç§æ•°æ®ç»“æ„è¢«ç§°ä¸ºbidirectional mapï¼Œé—æ†¾çš„æ˜¯JDKå¹¶æ²¡æœ‰å¯¹å…¶æ”¯æŒã€‚</p>
<p>Apacheå’ŒGuava å…±åŒæä¾›äº†è¿™ç§bidirectional mapå®ç°ï¼Œå®ƒåœ¨å®ç°ä¸­å®ƒè§„å®šäº†é”®å’Œå€¼éƒ½æ˜¯å¿…é¡»æ˜¯1:1çš„å…³ç³»ã€‚</p>
<h2 id="7ã€å¯¹Mapçš„å¤åˆ¶"><a href="#7ã€å¯¹Mapçš„å¤åˆ¶" class="headerlink" title="7ã€å¯¹Mapçš„å¤åˆ¶"></a>7ã€å¯¹Mapçš„å¤åˆ¶</h2><p>javaä¸­æä¾›äº†å¾ˆå¤šæ–¹æ³•éƒ½å¯ä»¥å®ç°å¯¹ä¸€ä¸ªMapçš„å¤åˆ¶ï¼Œä½†æ˜¯é‚£äº›æ–¹æ³•ä¸è§å¾—ä¼šæ—¶æ—¶åŒæ­¥ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªMapå‘ç”Ÿçš„å˜åŒ–ï¼Œè€Œå¤åˆ¶çš„é‚£ä¸ªä¾ç„¶ä¿æŒåŸæ ·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒé«˜æ•ˆçš„å®ç°æ–¹æ³•ï¼š</p>
<pre><code>Map copiedMap = Collections.synchronizedMap(map);
</code></pre><p>å½“ç„¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£å°±æ˜¯å…‹éš†ã€‚ä½†æ˜¯æˆ‘ä»¬çš„javaé¼»ç¥–Josh Blochå´ä¸æ¨èè¿™ç§æ–¹å¼ï¼Œä»–æ›¾ç»åœ¨ä¸€æ¬¡è®¿è°ˆä¸­è¯´è¿‡å…³äºMapå…‹éš†çš„é—®é¢˜ï¼šåœ¨å¾ˆå¤šç±»ä¸­éƒ½æä¾›äº†å…‹éš†çš„æ–¹æ³•ï¼Œå› ä¸ºäººä»¬ç¡®å®éœ€è¦ã€‚ä½†æ˜¯å…‹éš†éå¸¸æœ‰å±€é™æ€§ï¼Œè€Œä¸”åœ¨å¾ˆå¤šæ—¶å€™é€ æˆäº†ä¸å¿…è¦çš„å½±å“ã€‚ï¼ˆåŸæ–‡ã€ŠCopy constructor versus cloningã€‹ï¼‰</p>
<h2 id="8ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Map"><a href="#8ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Map" class="headerlink" title="8ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Map"></a>8ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Map</h2><p>å¦‚æœè¿™ä¸ªmapè¢«ç½®ä¸ºä¸å¯ç”¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å®ç°</p>
<pre><code>map = Collections.emptyMap();
</code></pre><p>ç›¸åï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥</p>
<pre><code>map = new HashMap();
</code></pre><p>æ–‡ç« æºè‡ªï¼šITå­¦ä¹ è€…</p>
]]></content>
    
    <summary type="html">
    
      Javaä¸­å…³äºMapçš„ä¹å¤§é—®é¢˜
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆäº”ï¼‰set ç±»å‹</title>
    <link href="http://blog.wglgg.cn/2014/08/10/redis-datatype-set/"/>
    <id>http://blog.wglgg.cn/2014/08/10/redis-datatype-set/</id>
    <published>2014-08-09T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.629Z</updated>
    
    <content type="html"><![CDATA[<h2 id="set-ç±»å‹ç®€ä»‹"><a href="#set-ç±»å‹ç®€ä»‹" class="headerlink" title="set ç±»å‹ç®€ä»‹"></a>set ç±»å‹ç®€ä»‹</h2><p>åœ¨Redisä¸­ï¼Œsetæ˜¯é›†åˆï¼Œå’Œæˆ‘ä»¬æ•°å­¦ä¸­çš„é›†åˆæ¦‚å¿µç›¸ä¼¼ï¼Œå¯¹é›†åˆçš„æ“ä½œæœ‰æ·»åŠ åˆ é™¤å…ƒç´ ï¼Œæœ‰å¯¹å¤šä¸ªå‡ ä¸ªæ±‚äº¤å¹¶å·®ç­‰æ“ä½œï¼Œæ“ä½œä¸­keyç†è§£ä¸ºé›†åˆçš„åå­—ã€‚Redisçš„setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚setå…ƒç´ æœ€å¤§å¯ä»¥åŒ…å«(2çš„32æ¬¡æ–¹)ä¸ªå…ƒç´ ã€‚setçš„åé€šè¿‡hash tableå®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯0ï¼ˆ1ï¼‰ã€‚hash tableä¼šéšç€æ·»åŠ æˆ–è€…åˆ é™¤è‡ªåŠ¨çš„è°ƒæ•´å¤§å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è°ƒæ•´hash tableå¤§å°æ—¶å€™éœ€è¦åŒæ­¥ï¼ˆè·å–å†™é”ï¼‰ä¼šé˜»å¡å…¶ä»–è¯»å†™æ“ä½œï¼Œå¯èƒ½ä¸ä¹…åå°±ä¼šæ”¹ç”¨è·³è¡¨æ¥å®ç°ã€‚å…³äºseté›†åˆç±»å‹é™¤äº†åŸºæœ¬çš„æ·»åŠ åˆ é™¤æ“ä½œï¼Œå…¶ä»–æœ‰ç”¨çš„æ“ä½œè¿˜åŒ…æ‹¬é›†åˆçš„å–å¹¶é›†ï¼ˆunionï¼‰ï¼Œäº¤é›†ï¼ˆintersectionï¼‰ï¼Œå·®é›†ï¼ˆdifferenceï¼‰ã€‚é€šè¿‡è¿™äº›æ“ä½œå¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°snsä¸­çš„å¥½å‹æ¨èå’Œblogçš„tagåŠŸèƒ½ã€‚</p>
<h2 id="set-æ“ä½œ"><a href="#set-æ“ä½œ" class="headerlink" title="set æ“ä½œ"></a>set æ“ä½œ</h2><h3 id="1-sadd"><a href="#1-sadd" class="headerlink" title="1. sadd"></a>1. sadd</h3><p>å‘åç§°ä¸ºkeyçš„setä¸­æ·»åŠ å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; sadd myset &quot;hello&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset &quot;world&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset &quot;world&quot;
(integer) 0
redis 127.0.0.1:6379&gt; smembers myset
1) &quot;world&quot;
2) &quot;hello&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘mysetä¸­æ·»åŠ äº†ä¸‰ä¸ªå…ƒç´ ï¼Œä½†ç”±äºç¬¬ä¸‰ä¸ªå…ƒç´ è·Ÿç¬¬äºŒä¸ªå…ƒç´ åç›¸åŒçš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå…ƒç´ æ²¡æœ‰æ·»åŠ æˆåŠŸï¼Œæœ€åæˆ‘ä»¬ç”¨smembersæ¥æŸ¥çœ‹mysetä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<h3 id="2-srem"><a href="#2-srem" class="headerlink" title="2. srem"></a>2. srem</h3><p>åˆ é™¤åç§°ä¸ºkeyçš„setä¸­çš„å…ƒç´ member</p>
<pre><code>redis 127.0.0.1:6379&gt; sadd myset2 &quot;one&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset2 &quot;two&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset2 &quot;three&quot;
(integer) 1
redis 127.0.0.1:6379&gt; srem myset2 &quot;one&quot;
(integer) 1
redis 127.0.0.1:6379&gt; srem myset2 &quot;four&quot;
(integer) 0
redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘myset2ä¸­æ·»åŠ äº†ä¸‰ä¸ªå…ƒç´ åï¼Œå†è°ƒç”¨sremæ¥åˆ é™¤oneå’Œfourï¼Œä½†ç”±äºå…ƒç´ ä¸­æ²¡æœ‰fourï¼Œæ‰€ä»¥ï¼Œè¯æ¡sremå‘½ä»¤æ‰§è¡Œå¤±è´¥ã€‚</p>
<h3 id="3-spop"><a href="#3-spop" class="headerlink" title="3. spop"></a>3. spop</h3><p>éšå³è¿”å›å¹¶åˆ é™¤åç§°ä¸ºkeyçš„setä¸­ä¸€ä¸ªå…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; sadd myset3 &quot;one&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset3 &quot;two&quot;
(integer) 1
redis 127.0.0.1:6379&gt; sadd myset3 &quot;three&quot;
(integer) 1
redis 127.0.0.1:6379&gt; spop myset3
&quot;three&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘myset3ä¸­æ·»åŠ ä¸‰ä¸ªå…ƒç´ åï¼Œåœ¨è°ƒç”¨spopæ¥éšå³åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°threeå…ƒç´ è¢«åˆ é™¤äº†ã€‚</p>
<h3 id="4-sdiff"><a href="#4-sdiff" class="headerlink" title="4. sdiff"></a>4. sdiff</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyä¸ç¬¬ä¸€ä¸ªkeyçš„å·®é›†</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sdiff myset2 myset3
1) &quot;three&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°myset2ä¸­çš„å…ƒç´ ä¸myset3ä¸­ä¸åŒçš„åªæ˜¯threeï¼Œæ‰€ä»¥åªæœ‰threeè¢«æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œä¸æ˜¯threeå’Œoneï¼Œå› ä¸ºoneæ˜¯myset3çš„å…ƒç´ ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†myset2å’Œmyset3æ¢ä¸ªé¡ºåºæ¥çœ‹ä¸€ä¸‹ç»“æœï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; sdiff myset3 myset2
1) &quot;one&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>è¿™ä¸ªç»“æœä¸­åªæ˜¾ç¤ºäº†ï¼Œmyset3ä¸­çš„å…ƒç´ ä¸myset2ä¸­çš„ä¸åŒçš„å…ƒç´ ã€‚</p>
<h3 id="5-sdiffstore"><a href="#5-sdiffstore" class="headerlink" title="5. sdiffstore"></a>5. sdiffstore</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyä¸ç¬¬ä¸€ä¸ªkeyçš„å·®é›†ï¼Œå¹¶å°†ç»“æœå­˜ä¸ºå¦ä¸€ä¸ªkey</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sdiffstore myset4 myset2 myset3
(integer) 1
redis 127.0.0.1:6379&gt; smembers myset4
1) &quot;three&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="6-sinter"><a href="#6-sinter" class="headerlink" title="6. sinter"></a>6. sinter</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyçš„äº¤é›†</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sinter myset2 myset3
1) &quot;two&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„äº¤é›†twoè¢«æŸ¥å‡ºæ¥äº†</p>
<h3 id="7-sinterstore"><a href="#7-sinterstore" class="headerlink" title="7. sinterstore"></a>7. sinterstore</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyçš„äº¤é›†ï¼Œå¹¶å°†ç»“æœå­˜ä¸ºå¦ä¸€ä¸ªkey</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sinterstore myset5 myset2 myset3
(integer) 1
redis 127.0.0.1:6379&gt;smembers myset5
1) &quot;two&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„äº¤é›†è¢«ä¿å­˜åˆ°myset5ä¸­äº†ã€‚</p>
<h3 id="8-sunion"><a href="#8-sunion" class="headerlink" title="8. sunion"></a>8. sunion</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyçš„å¹¶é›†</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sunion myset2 myset3
1) &quot;three&quot;
2) &quot;one&quot;
3) &quot;two&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„å¹¶é›†è¢«æŸ¥å‡ºæ¥äº†</p>
<h3 id="9-sunionstore"><a href="#9-sunionstore" class="headerlink" title="9. sunionstore"></a>9. sunionstore</h3><p>è¿”å›æ‰€æœ‰ç»™å®škeyçš„å¹¶é›†ï¼Œå¹¶å°†ç»“æœå­˜ä¸ºå¦ä¸€ä¸ªkey</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; sunionstore myset6 myset2 myset3
(integer) 3
redis 127.0.0.1:6379&gt;smembers myset6
1) &quot;three&quot;
2) &quot;one&quot;
3) &quot;two&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œmyset2å’Œmyset3çš„å¹¶é›†è¢«ä¿å­˜åˆ°myset6ä¸­äº†</p>
<h3 id="10-smove"><a href="#10-smove" class="headerlink" title="10. smove"></a>10. smove</h3><p>ä»ç¬¬ä¸€ä¸ªkeyå¯¹åº”çš„setä¸­ä¸€å¤„memberå¹¶æ·»åŠ åˆ°ç¬¬äºŒä¸ªå¯¹åº”setä¸­</p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;three&quot;
2) &quot;two&quot;
redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; smove myset2 myset7 three
(integer) 1
redis 127.0.0.1:6379&gt;smembers myset7
1) &quot;three&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œmyset2çš„threeè¢«ç§»åˆ°myset7ä¸­äº†</p>
<h3 id="11-scard"><a href="#11-scard" class="headerlink" title="11. scard"></a>11. scard</h3><p>è¿”å›åç§°ä¸ºkeyçš„setçš„å…ƒç´ ä¸ªæ•°</p>
<pre><code>redis 127.0.0.1:6379&gt; scard myset2
(integer) 1
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œmyset2çš„æˆå‘˜æ•°é‡ä¸º1</p>
<h3 id="12-sismember"><a href="#12-sismember" class="headerlink" title="12. sismember"></a>12. sismember</h3><p>æµ‹è¯•memberæ˜¯å¦æ˜¯åç§°ä¸ºkeyçš„setçš„å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset2
1) &quot;two&quot;
redis 127.0.0.1:6379&gt; sismembers myset2 two
(integer) 1
redis 127.0.0.1:6379&gt;sismember myset2 one
(integer) 0
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°ï¼Œtwoæ˜¯myset2çš„æˆå‘˜ï¼Œè€Œoneä¸æ˜¯ã€‚</p>
<h3 id="13-srandmember"><a href="#13-srandmember" class="headerlink" title="13. srandmember"></a>13. srandmember</h3><p>éšæœºè¿”å›åç§°ä¸ºkeyçš„setçš„ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä¸åˆ é™¤å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; smembers myset3
1) &quot;two&quot;
2) &quot;one&quot;
redis 127.0.0.1:6379&gt; srandmember myset3
&quot;two&quot;
redis 127.0.0.1:6379&gt;srandmember myset3
&quot;one&quot;
redis 127.0.0.1:6379&gt; 
</code></pre>]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆäº”ï¼‰set ç±»å‹
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆå››ï¼‰List ç±»å‹</title>
    <link href="http://blog.wglgg.cn/2014/08/09/redis-datatype-list/"/>
    <id>http://blog.wglgg.cn/2014/08/09/redis-datatype-list/</id>
    <published>2014-08-08T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.626Z</updated>
    
    <content type="html"><![CDATA[<h2 id="list-ç±»å‹ç®€ä»‹"><a href="#list-ç±»å‹ç®€ä»‹" class="headerlink" title="list ç±»å‹ç®€ä»‹"></a>list ç±»å‹ç®€ä»‹</h2><p>Listæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œä¸»è¦åŠŸèƒ½æ˜¯pushã€popã€è·å–ä¸€ä¸ªèŒƒå›´çš„æ‰€æœ‰å€¼ç­‰ç­‰ï¼Œæ“ä½œä¸­keyç†è§£ä¸ºé“¾è¡¨çš„åå­—ã€‚Redisçš„listç±»å‹å…¶å®å°±æ˜¯ä¸€ä¸ªæ¯ä¸ªå­å…ƒç´ éƒ½æ˜¯stringç±»å‹çš„åŒå‘é“¾è¡¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡pushã€popæ“ä½œä»é“¾è¡¨çš„å¤´éƒ¨æˆ–è€…å°¾éƒ¨æ·»åŠ åˆ é™¤å…ƒç´ ï¼Œè¿™æ ·listæ—¢å¯ä»¥ä½œä¸ºæ ˆï¼Œåˆå¯ä»¥ä½œä¸ºé˜Ÿåˆ—ã€‚</p>
<h2 id="list-æ“ä½œ"><a href="#list-æ“ä½œ" class="headerlink" title="list æ“ä½œ"></a>list æ“ä½œ</h2><h3 id="1-lpush"><a href="#1-lpush" class="headerlink" title="1. lpush"></a>1. lpush</h3><p>åœ¨keyå¯¹åº”listçš„å¤´éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; lpush mylist &quot;world&quot;
(integer) 1
redis 127.0.0.1:6379&gt; lpush mylist &quot;hello&quot;
(integer) 2
redis 127.0.0.1:6379&gt; lrange mylist 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
</code></pre><h3 id="2-rpush"><a href="#2-rpush" class="headerlink" title="2. rpush"></a>2. rpush</h3><p>åœ¨keyå¯¹åº”listçš„å°¾éƒ¨æ·»åŠ å­—ç¬¦ä¸²å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; rpush mylist2 &quot;world&quot;
(integer) 1
redis 127.0.0.1:6379&gt; rpush mylist2 &quot;hello&quot;
(integer) 2
redis 127.0.0.1:6379&gt; lrange mylist2 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
</code></pre><h3 id="3-linsert"><a href="#3-linsert" class="headerlink" title="3. linsert"></a>3. linsert</h3><p>åœ¨keyå¯¹åº”listçš„ç‰¹å®šä½ç½®å‰æˆ–åæ·»åŠ å­—ç¬¦ä¸²</p>
<pre><code>redis 127.0.0.1:6379&gt; rpush mylist3 &quot;world&quot;
(integer) 1
redis 127.0.0.1:6379&gt; linsert mylist3 before &quot;world&quot; &quot;hello&quot;
(integer) 2
redis 127.0.0.1:6379&gt; lrange mylist3 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
</code></pre><h3 id="4-lset"><a href="#4-lset" class="headerlink" title="4. lset"></a>4. lset</h3><p>è®¾ç½®listä¸­æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ å€¼</p>
<pre><code>redis 127.0.0.1:6379&gt; rpush mylist4 &quot;hello&quot;
(integer) 1
redis 127.0.0.1:6379&gt; lset mylist4 0 &quot;world&quot;
OK
redis 127.0.0.1:6379&gt; lrange mylist4 0 -1
1) &quot;world&quot;
</code></pre><h3 id="5-lrem"><a href="#5-lrem" class="headerlink" title="5. lrem"></a>5. lrem</h3><p>ä»keyå¯¹åº”listä¸­åˆ é™¤nä¸ªå’Œvalueç›¸åŒçš„å…ƒç´ ã€‚ï¼ˆn&lt;0ä»å°¾åˆ é™¤ï¼Œn=0å…¨éƒ¨åˆ é™¤ï¼‰</p>
<pre><code>redis 127.0.0.1:6379&gt; rpush mylist5 &quot;hello&quot;
(integer) 1
redis 127.0.0.1:6379&gt; rpush mylist5 &quot;hello&quot;
(integer) 1
redis 127.0.0.1:6379&gt; lrem mylist5 1 &quot;hello&quot;
(integer) 1
</code></pre><h3 id="6-ltrim"><a href="#6-ltrim" class="headerlink" title="6. ltrim"></a>6. ltrim</h3><p>ä¿ç•™æŒ‡å®škeyçš„å€¼èŒƒå›´å†…çš„æ•°æ®</p>
<pre><code>redis 127.0.0.1:6379&gt; rpush mylist8 &quot;one&quot;
(integer) 1
redis 127.0.0.1:6379&gt; rpush mylist8 &quot;two&quot;
(integer) 2
redis 127.0.0.1:6379&gt; ltrim mylist8 1 -1
(integer) 1
redis 127.0.0.1:6379&gt; lrange mylist5 1 &quot;hello&quot;
(integer) 1
</code></pre><h3 id="6-lpop"><a href="#6-lpop" class="headerlink" title="6. lpop"></a>6. lpop</h3><p>ä»listçš„å¤´éƒ¨åˆ é™¤å…ƒç´ ï¼Œå¹¶è¿”å›åˆ é™¤å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; lrange mylist 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
redis 127.0.0.1:6379&gt; lpop mylist
&quot;hello&quot;
redis 127.0.0.1:6379&gt; lrange mylist 0 -1
&quot;world&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="7-rpop"><a href="#7-rpop" class="headerlink" title="7. rpop"></a>7. rpop</h3><p>ä»listçš„å°¾éƒ¨åˆ é™¤å…ƒç´ ï¼Œå¹¶è¿”å›åˆ é™¤å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; lrange mylist2 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
redis 127.0.0.1:6379&gt; rpop mylist2
&quot;world&quot;
redis 127.0.0.1:6379&gt; lrange mylist2 0 -1
1) &quot;hello&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="8-rpoplpush"><a href="#8-rpoplpush" class="headerlink" title="8. rpoplpush"></a>8. rpoplpush</h3><p>ä»ç¬¬ä¸€ä¸ªlistçš„å°¾éƒ¨ç§»é™¤å…ƒç´ å¹¶æ·»åŠ åˆ°ç¬¬äºŒä¸ªlistçš„å¤´éƒ¨</p>
<pre><code>redis 127.0.0.1:6379&gt; lrange mylist2 0 -1
1) &quot;hello&quot;
2) &quot;world&quot;
redis 127.0.0.1:6379&gt; rpop mylist2
&quot;world&quot;
redis 127.0.0.1:6379&gt; lrange mylist2 0 -1
1) &quot;hello&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="9-lindex"><a href="#9-lindex" class="headerlink" title="9. lindex"></a>9. lindex</h3><p>è¿”å›åç§°ä¸ºkeyçš„listä¸­indexä½ç½®çš„å…ƒç´ </p>
<pre><code>redis 127.0.0.1:6379&gt; lrange mylist5 0 -1
1) &quot;three&quot;
2) &quot;foo&quot;
redis 127.0.0.1:6379&gt; lindex mylist5 0
&quot;three&quot;
redis 127.0.0.1:6379&gt; lindex mylist5 1
&quot;foo&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="10-llen"><a href="#10-llen" class="headerlink" title="10. llen"></a>10. llen</h3><p>è¿”å›keyå¯¹åº”listçš„é•¿åº¦</p>
<pre><code>redis 127.0.0.1:6379&gt; llen mylist5
(integer) 2
redis 127.0.0.1:6379&gt;
</code></pre>]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆå››ï¼‰List ç±»å‹
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆä¸‰ï¼‰hash ç±»å‹</title>
    <link href="http://blog.wglgg.cn/2014/08/08/redis-datatype-hash/"/>
    <id>http://blog.wglgg.cn/2014/08/08/redis-datatype-hash/</id>
    <published>2014-08-07T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.624Z</updated>
    
    <content type="html"><![CDATA[<h2 id="hash-ç±»å‹ç®€ä»‹"><a href="#hash-ç±»å‹ç®€ä»‹" class="headerlink" title="hash ç±»å‹ç®€ä»‹"></a>hash ç±»å‹ç®€ä»‹</h2><p>redis hashæ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ã€‚å®ƒçš„æ·»åŠ ã€åˆ é™¤æ“ä½œéƒ½æ˜¯0(1)(å¹³å‡)ã€‚hashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ç›¸è¾ƒäºå°†å¯¹è±¡çš„æ¯ä¸ªå­—æ®µå­˜æˆå•ä¸ªstringç±»å‹ï¼Œå°†ä¸€ä¸ªå¯¹è±¡å­˜å‚¨åœ¨hashç±»å‹ä¸­ä¼šå ç”¨æ›´å°‘çš„å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ–¹ä¾¿çš„å­˜å–æ•´ä¸ªå¯¹è±¡ã€‚çœå†…å­˜çš„åŸå› æ˜¯æ–°å»ºä¸€ä¸ªhashå¯¹è±¡æ—¶å¼€å§‹æ˜¯ç”¨zipmapæ¥å­˜å‚¨çš„ã€‚</p>
<h2 id="hash-æ“ä½œ"><a href="#hash-æ“ä½œ" class="headerlink" title="hash æ“ä½œ"></a>hash æ“ä½œ</h2><h3 id="1-hset"><a href="#1-hset" class="headerlink" title="1. hset"></a>1. hset</h3><p>è®¾ç½®hash fieldä¸ºæŒ‡å®šå€¼ï¼Œå¦‚æœkeyä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hset myhash field1 Hello
(integer) 1
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="2-hsetnx"><a href="#2-hsetnx" class="headerlink" title="2. hsetnx"></a>2. hsetnx</h3><p>è®¾ç½®hash field ä¸ºæŒ‡å®šå€¼ï¼Œå¦‚æœkey ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºã€‚å¦‚æœfield å·²ç»å­˜åœ¨ï¼Œè¿”å›0ï¼Œnx æ˜¯not exist çš„æ„æ€ã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hsetnx myhash field &quot;Hello&quot;
(integer) 1
redis 127.0.0.1:6379&gt; hsetnx myhash field &quot;Hello&quot;
(integer) 0
redis 127.0.0.1:6379&gt;
</code></pre><p>ç¬¬ä¸€æ¬¡æ‰§è¡Œæ˜¯æˆåŠŸçš„ï¼Œä½†ç¬¬äºŒæ¬¡æ‰§è¡Œç›¸åŒçš„å‘½ä»¤å¤±è´¥ï¼ŒåŸå› æ˜¯field å·²ç»å­˜åœ¨äº†ã€‚</p>
<h3 id="3-hmset"><a href="#3-hmset" class="headerlink" title="3. hmset"></a>3. hmset</h3><p>åŒæ—¶è®¾ç½®hashçš„å¤šä¸ªfieldã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hmset myhash field1 Hello field2 World
OK
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="4-hget"><a href="#4-hget" class="headerlink" title="4. hget"></a>4. hget</h3><p>è·å–æŒ‡å®šçš„hash fieldã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hget myhash field1
&quot;Hello&quot;
redis 127.0.0.1:6379&gt; hget myhash field2
&quot;World&quot;
redis 127.0.0.1:6379&gt; hget myhash field3
(nil)
redis 127.0.0.1:6379&gt;
</code></pre><p>ç”±äºæ•°æ®åº“æ²¡æœ‰field3ï¼Œæ‰€ä»¥å–åˆ°çš„æ˜¯ä¸€ä¸ªç©ºå€¼<code>nil</code>ã€‚</p>
<h3 id="5-hmget"><a href="#5-hmget" class="headerlink" title="5. hmget"></a>5. hmget</h3><p>è·å–å…¨éƒ¨æŒ‡å®šçš„hash fieldã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hmget myhash field1 field2 field3
1) &quot;Hello&quot;
2) &quot;World&quot;
3) (nil)
redis 127.0.0.1:6379&gt;
</code></pre><p>ç”±äºæ•°æ®åº“æ²¡æœ‰field3ï¼Œæ‰€ä»¥å–åˆ°çš„æ˜¯ä¸€ä¸ªç©ºå€¼<code>nil</code>ã€‚</p>
<h3 id="6-hincrby"><a href="#6-hincrby" class="headerlink" title="6. hincrby"></a>6. hincrby</h3><p>æŒ‡å®šçš„hash filed åŠ ä¸Šç»™å®šå€¼ã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hset myhash field3 20
(integer) 1
redis 127.0.0.1:6379&gt; hget myhash field3
&quot;20&quot;
redis 127.0.0.1:6379&gt; hincrby myhash field3 -8
(integer) 12
redis 127.0.0.1:6379&gt; hget myhash field3
&quot;12&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>ä¾‹ä¸­å°†field3 çš„å€¼ä»20 é™åˆ°äº†12ï¼Œå³åšäº†ä¸€ä¸ªå‡8 çš„æ“ä½œã€‚</p>
<h3 id="7-hexists"><a href="#7-hexists" class="headerlink" title="7. hexists"></a>7. hexists</h3><p>æµ‹è¯•æŒ‡å®šfield æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hexists myhash field1
(integer) 1
redis 127.0.0.1:6379&gt; hexists myhash field9
(integer) 0
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡ä¸Šä¾‹å¯ä»¥è¯´æ˜field1 å­˜åœ¨ï¼Œä½†field9 æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>
<h3 id="8-hlen"><a href="#8-hlen" class="headerlink" title="8. hlen"></a>8. hlen</h3><p>è¿”å›æŒ‡å®šhash çš„field æ•°é‡ã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hlen myhash
(integer) 4
redis 127.0.0.1:6379&gt;
</code></pre><p>é€šè¿‡ä¸Šä¾‹å¯ä»¥çœ‹åˆ°myhash ä¸­æœ‰4 ä¸ªfieldã€‚</p>
<h3 id="9-hdel"><a href="#9-hdel" class="headerlink" title="9. hdel"></a>9. hdel</h3><p>è¿”å›æŒ‡å®šhash çš„field æ•°é‡ã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hlen myhash
(integer) 4
redis 127.0.0.1:6379&gt; hdel myhash field1
(integer) 1
redis 127.0.0.1:6379&gt; hlen myhash
(integer) 3
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="10-hkeys"><a href="#10-hkeys" class="headerlink" title="10. hkeys"></a>10. hkeys</h3><p>è¿”å›hash çš„æ‰€æœ‰fieldã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hkeys myhash
1) &quot;field2&quot;
2) &quot;field&quot;
3) &quot;field3&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>è¯´æ˜è¿™ä¸ªhash ä¸­æœ‰3 ä¸ªfield</p>
<h3 id="11-hvals"><a href="#11-hvals" class="headerlink" title="11. hvals"></a>11. hvals</h3><p>è¿”å›hash çš„æ‰€æœ‰valueã€‚</p>
<pre><code>redis 127.0.0.1:6379&gt; hvals myhash
1) &quot;World&quot;
2) &quot;Hello&quot;
3) &quot;12&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>è¯´æ˜è¿™ä¸ªhash ä¸­æœ‰3 ä¸ªfield</p>
<h3 id="12-hgetall"><a href="#12-hgetall" class="headerlink" title="12. hgetall"></a>12. hgetall</h3><p>è·å–æŸä¸ªhash ä¸­å…¨éƒ¨çš„filed åŠvalue</p>
<pre><code>redis 127.0.0.1:6379&gt; hgetall myhash
1) &quot;field2&quot;
2) &quot;World&quot;
3) &quot;field&quot;
4) &quot;Hello&quot;
5) &quot;field3&quot;
6) &quot;12&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>å¯è§ï¼Œä¸€ä¸‹å­å°†myhash ä¸­æ‰€æœ‰çš„field åŠå¯¹åº”çš„value éƒ½å–å‡ºæ¥äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆä¸‰ï¼‰hash ç±»å‹
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆäºŒï¼‰Stringç±»å‹</title>
    <link href="http://blog.wglgg.cn/2014/08/07/redis-datatype-string/"/>
    <id>http://blog.wglgg.cn/2014/08/07/redis-datatype-string/</id>
    <published>2014-08-06T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.632Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šæ–‡è¯¦ç»†ä»‹ç»äº†Redisæ•°æ®åº“ä»¥åŠå®ƒçš„å®‰è£…è¿‡ç¨‹ï¼ŒåŠé€‚ç”¨åœºæ™¯ï¼Œå·²ç»äº†è§£ï¼ŒRedisæ•°æ®åº“æ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œé€Ÿåº¦æå¿«ï¼Œæœ¬ç¯‡å°†ä»‹ç»redisæ•°æ®åº“çš„æ“ä½œä½¿ç”¨æ–¹æ³•ï¼ŒRedisæœ‰ä¸ƒç§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œå“ˆå¸Œè¡¨ï¼Œé“¾è¡¨ï¼Œé›†åˆå’Œæœ‰åºé›†åˆ</p>
<h2 id="String-ç±»å‹ç®€ä»‹"><a href="#String-ç±»å‹ç®€ä»‹" class="headerlink" title="String ç±»å‹ç®€ä»‹"></a>String ç±»å‹ç®€ä»‹</h2><p>Stringæ˜¯æœ€ç®€å•çš„ç±»å‹ï¼Œå¯ä»¥ç†è§£æˆä¸Memcachedæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ªKeyå¯¹åº”ä¸€ä¸ªValueï¼Œå¯ä»¥å®Œå…¨å®ç°Memcachedçš„åŠŸèƒ½ï¼Œè€Œä¸”æ•ˆç‡è¦æ¯”Memcachedé«˜å¾ˆå¤šï¼ŒåŒæ—¶å¯ä»¥è®¾ç½®Redisçš„å®šæ—¶æ•°æ®æŒä¹…åŒ–ï¼Œæ“ä½œæ—¥å¿—çš„è®°å½•ä»¥åŠä¸»ä»å¤åˆ¶ç­‰åŠŸèƒ½ï¼</p>
<h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><h3 id="1-set"><a href="#1-set" class="headerlink" title="1. set"></a>1. set</h3><p>è®¾ç½®Keyå¯¹åº”çš„å€¼ä¸ºstringç±»å‹çš„valueã€‚</p>
<p>ä¾‹å¦‚è®¾ç½®ä¸€ä¸ªname = zhangsan çš„é”®å€¼å¯¹ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code>$ redis-cli
redis 127.0.0.1:6379&gt; set name zhangsan
OK
redis 127.0.0.1:6379&gt; get name
&quot;zhangsan&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="2-setnx"><a href="#2-setnx" class="headerlink" title="2. setnx"></a>2. setnx</h3><p>è®¾ç½®key å¯¹åº”çš„å€¼ä¸ºstring ç±»å‹çš„valueã€‚å¦‚æœkey å·²ç»å­˜åœ¨ï¼Œè¿”å›0ï¼Œnx æ˜¯not exist çš„æ„æ€ã€‚</p>
<p>ä¾‹å¦‚æ·»åŠ ä¸€ä¸ªname= lisi çš„é”®å€¼å¯¹ï¼Œå¯ä»¥è¿™æ ·åš:</p>
<pre><code>redis 127.0.0.1:6379&gt; setnx name lisi
(integer) 0
redis 127.0.0.1:6379&gt; get name
&quot;lisi&quot;
redis 127.0.0.1:6379&gt;
</code></pre><p>ç”±äºåŸæ¥name æœ‰ä¸€ä¸ªå¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥æœ¬æ¬¡çš„ä¿®æ”¹ä¸ç”Ÿæ•ˆï¼Œä¸”è¿”å›ç æ˜¯0ã€‚</p>
<h3 id="3-setex"><a href="#3-setex" class="headerlink" title="3. setex"></a>3. setex</h3><p>è®¾ç½®ä¸€ä¸ªé”®å¯¹åº”çš„å€¼ï¼Œå¹¶å¯¹æ­¤é”®å€¼å¯¹è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸã€‚</p>
<p>ä¾‹å¦‚ï¼šæŒ‡å®šä¸€ä¸ªé”®å€¼å¯¹ result = successï¼Œå¹¶ä¸”è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸä¸º10ç§’ï¼Œæˆ‘ä»¬æ¥è¿™æ ·åšï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; set result 10 success
OK
redis 127.0.0.1:6379&gt; get result
&quot;success&quot;
redis 127.0.0.1:6379&gt; get result
(nil)
redis 127.0.0.1:6379&gt;
</code></pre><p>ç”±äºç¬¬äºŒæ¬¡è°ƒç”¨å·²ç»è¶…è¿‡10ç§’ï¼Œæ‰€ä»¥æ— æ³•å–åˆ°resultçš„å€¼äº†ï¼ï¼ï¼</p>
<h3 id="4-setrange"><a href="#4-setrange" class="headerlink" title="4. setrange"></a>4. setrange</h3><p>è®¾ç½®æŒ‡å®šé”®çš„å€¼çš„å­å­—ç¬¦ä¸²ã€‚</p>
<p>ä¾‹å¦‚ï¼šæˆ‘ç°åœ¨è¦æŠŠ gang çš„é‚®ç®± finalsin@foxmail.com æ”¹ä¸º finalsin@sina.com</p>
<pre><code>redis 127.0.0.1:6379&gt; get gang
&quot;finalsin@foxmail.com&quot;
redis 127.0.0.1:6379&gt; setrange gang 9 sina.com
(integer) 21
redis 127.0.0.1:6379&gt; get gang
&quot;finalsin@sina.com&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="5-mset"><a href="#5-mset" class="headerlink" title="5. mset"></a>5. mset</h3><p>åŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ï¼ŒæˆåŠŸè¿”å›okè¡¨ç¤ºæ‰€æœ‰é”®è®¾ç½®æˆåŠŸï¼Œå¤±è´¥åˆ™è¿”å›0è¡¨ç¤ºæ‰€æœ‰é”®è®¾ç½®éƒ½ä¸æˆåŠŸ</p>
<p>ä¾‹å¦‚ï¼šåŒæ—¶è®¾ç½® ç‹åˆš çš„å¤šä¸ªçˆ±å¥½ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; mset hobby1 music hobby2 sport hobby3 girl
OK
redis 127.0.0.1:6379&gt; get hobby1
&quot;music&quot;
redis 127.0.0.1:6379&gt; get hobby3
&quot;girl&quot;
redis 127.0.0.1:6379&gt;
</code></pre><h3 id="6-msetnx"><a href="#6-msetnx" class="headerlink" title="6. msetnx"></a>6. msetnx</h3><p>åŒæ—¶è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ï¼ŒåŒæ ·å¤±è´¥è¿”å›0è¡¨ç¤ºæ‰€æœ‰é”®éƒ½æ²¡æœ‰è®¾ç½®æˆåŠŸï¼ŒæˆåŠŸè¿”å›OKè¡¨ç¤ºæ‰€æœ‰é”®éƒ½è®¾ç½®æˆåŠŸï¼Œä½†ä¸åŒäºmsetçš„æ˜¯æœ¬æ–¹æ³•ä¸ä¼šè®¾ç½®å·²ç»å­˜åœ¨çš„é”®å€¼å¯¹ï¼</p>
<pre><code>redis 127.0.0.1:6379&gt; get hobby1
&quot;music&quot;
redis 127.0.0.1:6379&gt; get hobby3
&quot;girl&quot;
redis 127.0.0.1:6379&gt; msetnx hobby1 tingge hobby4 hejiu
(integer) 0
redis 127.0.0.1:6379&gt; get hobby4
(nil)
redis 127.0.0.1:6379&gt; get hobby3
&quot;girl&quot;
</code></pre><p>å¯ä»¥çœ‹å‡ºå¦‚æœè¿™æ¡å‘½ä»¤è¿”å›0ï¼Œé‚£ä¹ˆé‡Œé¢æ“ä½œéƒ½ä¼šå›æ»šï¼Œéƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<h3 id="7-get"><a href="#7-get" class="headerlink" title="7. get"></a>7. get</h3><p>è·å–æŸä¸ªé”®å¯¹åº”çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å› <code>nil</code></p>
<pre><code>redis 127.0.0.1:6379&gt; get hobby4
(nil)
redis 127.0.0.1:6379&gt; get hobby3
&quot;girl&quot;
</code></pre><p>å¦‚ä¸Šä¾‹ï¼Œhobby3å­˜åœ¨ï¼Œå¹¶ä¸”å€¼ä¸ºâ€girlâ€ï¼Œhobby4ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>nil</code></p>
<h3 id="8-getset"><a href="#8-getset" class="headerlink" title="8. getset"></a>8. getset</h3><p>è®¾ç½®æŸä¸€ä¸ªé”®çš„å€¼ï¼Œå¹¶ä¸”è¿”å›è¯¥é”®çš„æ—§å€¼ï¼Œå¦‚æœè¯¥é”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>nil</code>ï¼Œç„¶åå†è®¾ç½®æ–°çš„å€¼</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; getset hobby4 football
(nil)
redis 127.0.0.1:6379&gt; getset hobby3 basketball
&quot;girl&quot;
redis 127.0.0.1:6379&gt; get hobby4
&quot;football&quot;
redis 127.0.0.1:6379&gt; get hobby3
&quot;basketball&quot;
</code></pre><h3 id="9-getrange"><a href="#9-getrange" class="headerlink" title="9. getrange"></a>9. getrange</h3><p>è·å–æŒ‡å®šé”®çš„å€¼çš„å­å­—ç¬¦ä¸²</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; getrange gang 0 7
&quot;finalsin&quot;
redis 127.0.0.1:6379&gt; getrange gang -8 -1
&quot;sina.com&quot;
redis 127.0.0.1:6379&gt; getrange gang 0 100
&quot;finalsin@sina.com&quot;
</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œgetrange jiege 0 4 è¡¨ç¤ºè·å– jiege è¿™ä¸ªé”®çš„å€¼çš„ä¸‹æ ‡ä¸º 0~4 çš„æ‰€æœ‰å­—ç¬¦</p>
<p>åŒæ ·ï¼Œgetrange jiege -15 -1 è¡¨ç¤ºè·å– jiege è¿™ä¸ªé”®çš„å€¼çš„ä¸‹æ ‡ä»åæ•°ç¬¬15ä¸ªåˆ°æœ€åä¸€ä¸ªçš„æ‰€æœ‰å­—ç¬¦</p>
<p>è€Œ getrange jiege 0 100 åˆ™è¡¨ç¤ºå…¨éƒ¨è¾“å‡º jiege è¿™ä¸ªé”®çš„å€¼çš„æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºæœ€åä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡ å°äº 100ï¼Œ</p>
<p>å½“ä¸‹æ ‡è¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œå°†é»˜è®¤ä¸ºæ˜¯åŒæ–¹å‘çš„æœ€å¤§ä¸‹æ ‡ã€‚</p>
<h3 id="10-mget"><a href="#10-mget" class="headerlink" title="10. mget"></a>10. mget</h3><p>ä¸€æ¬¡æ€§è·å–å¤šä¸ªé”®çš„å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>nil</code></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; mget hobby1 hobby2 hobby5
1) &quot;music&quot;
2) &quot;sport&quot;
3) (nil)
redis 127.0.0.1:6379&gt;
</code></pre><p>hobby5ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è¿”å›<code>nil</code>ã€‚</p>
<h3 id="11-incr"><a href="#11-incr" class="headerlink" title="11. incr"></a>11. incr</h3><p>å¯¹ä¸€ä¸ªé”®çš„å€¼åšåŠ åŠ æ“ä½œï¼Œå¹¶è¿”å›æ–°çš„å€¼ï¼Œå¦‚æœè¯¥é”®çš„å€¼ç±»å‹ä¸æ˜¯intç±»å‹ï¼Œå°†ä¼šæŠ¥é”™ï¼Œå¦‚æœè¯¥é”®ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®è¯¥é”®ä¸º1</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; set age 20
OK
redis 127.0.0.1:6379&gt; incr age
(integer) 21
redis 127.0.0.1:6379&gt; get age
&quot;21&quot;
redis 127.0.0.1:6379&gt; get age1
(nil)
redis 127.0.0.1:6379&gt; incr age1
(integer) 1
redis 127.0.0.1:6379&gt; get age1
&quot;1&quot;
</code></pre><h3 id="12-incrby"><a href="#12-incrby" class="headerlink" title="12. incrby"></a>12. incrby</h3><p>ç±»ä¼¼äºincrï¼Œä½†æ˜¯incrbyå¯ä»¥æŒ‡å®šå¢åŠ çš„å€¼</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; incrby age 5
(integer) 26
redis 127.0.0.1:6379&gt; get age
&quot;26&quot;
redis 127.0.0.1:6379&gt; incrby age -1
(integer) 25
redis 127.0.0.1:6379&gt; get age
&quot;25&quot;
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ5ä»£è¡¨ç»™ageé”®å¢åŠ 5ï¼Œè€Œ-1è¡¨ç¤ºç»™ageé”®å‡1ï¼Œå³æ­£æ•°ä¸ºåŠ ï¼Œè´Ÿæ•°ä¸ºå‡</p>
<h3 id="13-decr"><a href="#13-decr" class="headerlink" title="13. decr"></a>13. decr</h3><p>å¯¹æŸä¸€ä¸ªé”®åšå‡å‡æ“ä½œï¼ŒåŒincr</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; set age 20
OK
redis 127.0.0.1:6379&gt; decr age
(integer) 19
redis 127.0.0.1:6379&gt; get age
&quot;19&quot;
redis 127.0.0.1:6379&gt; get age1
(nil)
redis 127.0.0.1:6379&gt; decr age1
(integer) -1
redis 127.0.0.1:6379&gt; get age1
&quot;-1&quot;
</code></pre><h3 id="14-decrby"><a href="#14-decrby" class="headerlink" title="14. decrby"></a>14. decrby</h3><p>åŒincrbyï¼Œç»™æŸä¸€é”®å‡å»æŒ‡å®šçš„å€¼</p>
<pre><code>redis 127.0.0.1:6379&gt; decrby age 5
(integer) 14
redis 127.0.0.1:6379&gt; get age
&quot;14&quot;
</code></pre><p>decrby å®Œå…¨æ˜¯ä¸ºäº†å¯è¯»æ€§ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡incrby ä¸€ä¸ªè´Ÿå€¼æ¥å®ç°åŒæ ·æ•ˆæœï¼Œåä¹‹ä¸€æ ·ã€‚</p>
<h3 id="15-append"><a href="#15-append" class="headerlink" title="15. append"></a>15. append</h3><p>ç»™æŒ‡å®škey çš„å­—ç¬¦ä¸²å€¼è¿½åŠ value,è¿”å›æ–°å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; set name wanggang
OK
redis 127.0.0.1:6379&gt; get name
&quot;wanggang&quot;
redis 127.0.0.1:6379&gt; append name @wg.org
(integer) 15
redis 127.0.0.1:6379&gt; get name
&quot;wanggang@wg.org&quot;
</code></pre><h3 id="16-strlen"><a href="#16-strlen" class="headerlink" title="16. strlen"></a>16. strlen</h3><p>å–æŒ‡å®škey çš„value å€¼çš„é•¿åº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>redis 127.0.0.1:6379&gt; get name
&quot;wanggang@wg.org&quot;  
redis 127.0.0.1:6379&gt; strlen name
(integer) 15
redis 127.0.0.1:6379&gt; get age
&quot;20&quot;
redis 127.0.0.1:6379&gt; strlen age
(integer) 2
</code></pre><p>å¥½äº†ï¼Œè¿™å°±æ˜¯Stringç±»å‹çš„æ‰€æœ‰æ“ä½œ</p>
]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆäºŒï¼‰Stringç±»å‹
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>redis æ•´ç†ï¼ˆä¸€ï¼‰ç®€ä»‹åŠå®‰è£…</title>
    <link href="http://blog.wglgg.cn/2014/08/06/redis-introduction-install/"/>
    <id>http://blog.wglgg.cn/2014/08/06/redis-introduction-install/</id>
    <published>2014-08-05T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.639Z</updated>
    
    <content type="html"><![CDATA[<h2 id="NoSQL-ç®€ä»‹"><a href="#NoSQL-ç®€ä»‹" class="headerlink" title="NoSQL ç®€ä»‹"></a>NoSQL ç®€ä»‹</h2><p>NoSQLæ›´æ³¨é‡çš„æ˜¯å¯¹æµ·é‡æ•°æ®å­˜å–çš„æ€§èƒ½ã€åˆ†å¸ƒå¼ã€æ‰©å±•æ€§æ”¯æŒä¸Šï¼Œå¹¶ä¸éœ€è¦ä¼ ç»Ÿå…³ç³»æ•°æ®åº“çš„ä¸€äº›ç‰¹å¾ï¼Œä¾‹å¦‚ï¼šSchemaã€äº‹åŠ¡ã€å®Œæ•´SQLæŸ¥è¯¢æ”¯æŒç­‰ç­‰ï¼Œå› æ­¤åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ€§èƒ½ç›¸å¯¹ä¸ä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“æœ‰è¾ƒå¤§çš„æå‡ã€‚<br>Rediså°±æ˜¯NoSQLè¿™ä¸ªå¤§å®¶æ—ä¸­çš„ä¸€ä»½å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜ä¹Ÿå¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p>
<h2 id="Redis-ç®€ä»‹"><a href="#Redis-ç®€ä»‹" class="headerlink" title="Redis ç®€ä»‹"></a>Redis ç®€ä»‹</h2><p><a href="http://redis.io" title="redis" target="_blank" rel="external">Redis</a> is an open source, BSD licensed, advanced key-value cache and store. It is often referred to as a data structure server since keys can contain strings, hashes, lists, sets, sorted sets, bitmaps and hyperloglogs.</p>
<p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œé«˜çº§çš„é”®å€¼å¼å­˜å‚¨æ•°æ®åº“ã€‚å®ƒé€šå¸¸è¢«ç§°ä¸ºä¸€ä¸ªæ•°æ®ç»“æ„æœåŠ¡å™¨å¯ä»¥åŒ…å«å­—ç¬¦ä¸²ï¼Œå“ˆå¸Œè¡¨ï¼Œé“¾è¡¨ï¼Œé›†åˆå’Œæœ‰åºé›†åˆã€‚</p>
<p>ä¸ºäº†å®ç°å…¶å‡ºè‰²çš„è¡¨ç°ï¼ŒRedisæ˜¯å·¥ä½œåœ¨å†…å­˜ä¸­çš„æ•°æ®é›†ã€‚æ‚¨è¿˜å¯ä»¥æ ¹æ®æ‚¨çš„å…·ä½“çš„ä½¿ç”¨æƒ…å†µï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æˆ–æ‰§è¡Œå‘½ä»¤æ—¶å°†æ•°æ®é›†å†™å…¥åˆ°ç£ç›˜ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æ—¥å¿—ä¸­ã€‚Redisè¿˜æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œå¹¶ä¸”é…ç½®èµ·æ¥å¾ˆç®€å•ï¼Œç¬¬ä¸€æ¬¡åŒæ­¥å°±å¯ä»¥æ— é˜»å¡çš„è¾¾åˆ°æå¿«çš„é€Ÿåº¦ï¼Œåœ¨ç½‘ç»œæ–­å¼€çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨é‡è¿ç­‰ç­‰ã€‚å¦å¤–å®ƒçš„ç®€å•çš„æ£€æŸ¥ä¸è®¾ç½®æœºåˆ¶ï¼Œå‘å¸ƒ(Publish)ä¸è®¢é˜…(Subscribe)å’Œé…ç½®è®¾ç½®çš„ç‰¹æ€§ä½¿å®ƒçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªç¼“å­˜ã€‚</p>
<h2 id="Redis-é€‚ç”¨åœºæ™¯"><a href="#Redis-é€‚ç”¨åœºæ™¯" class="headerlink" title="Redis é€‚ç”¨åœºæ™¯"></a>Redis é€‚ç”¨åœºæ™¯</h2><h3 id="1ã€å–æœ€æ–°N-ä¸ªæ•°æ®çš„æ“ä½œ"><a href="#1ã€å–æœ€æ–°N-ä¸ªæ•°æ®çš„æ“ä½œ" class="headerlink" title="1ã€å–æœ€æ–°N ä¸ªæ•°æ®çš„æ“ä½œ"></a>1ã€å–æœ€æ–°N ä¸ªæ•°æ®çš„æ“ä½œ</h3><p>æ¯”å¦‚å…¸å‹çš„å–ä½ ç½‘ç«™çš„æœ€æ–°æ–‡ç« ï¼Œé€šè¿‡ä¸‹é¢æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€æ–°çš„5000 æ¡è¯„è®ºçš„ID æ”¾åœ¨Redis çš„List é›†åˆä¸­ï¼Œ<br>å¹¶å°†è¶…å‡ºé›†åˆéƒ¨åˆ†ä»æ•°æ®åº“è·å–ã€‚</p>
<h3 id="2ã€æ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP-N-æ“ä½œ"><a href="#2ã€æ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP-N-æ“ä½œ" class="headerlink" title="2ã€æ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP N æ“ä½œ"></a>2ã€æ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP N æ“ä½œ</h3><p>è¿™ä¸ªéœ€æ±‚ä¸ä¸Šé¢éœ€æ±‚çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå‰é¢æ“ä½œä»¥æ—¶é—´ä¸ºæƒé‡ï¼Œè¿™ä¸ªæ˜¯ä»¥æŸä¸ªæ¡ä»¶ä¸ºæƒé‡ï¼Œæ¯”å¦‚æŒ‰é¡¶çš„æ¬¡æ•°æ’åºï¼Œ<br>è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„sorted set å‡ºé©¬äº†ï¼Œå°†ä½ è¦æ’åºçš„å€¼è®¾ç½®æˆsorted set çš„scoreï¼Œå°†å…·ä½“çš„æ•°æ®è®¾ç½®æˆç›¸åº”çš„valueï¼Œ<br>æ¯æ¬¡åªéœ€è¦æ‰§è¡Œä¸€æ¡ZADD å‘½ä»¤å³å¯ã€‚</p>
<h3 id="3ã€éœ€è¦ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨"><a href="#3ã€éœ€è¦ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨" class="headerlink" title="3ã€éœ€è¦ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨"></a>3ã€éœ€è¦ç²¾å‡†è®¾å®šè¿‡æœŸæ—¶é—´çš„åº”ç”¨</h3><p>æ¯”å¦‚ä½ å¯ä»¥æŠŠä¸Šé¢è¯´åˆ°çš„sorted set çš„score å€¼è®¾ç½®æˆè¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€å•åœ°é€šè¿‡è¿‡æœŸæ—¶é—´æ’åºï¼Œ<br>å®šæ—¶æ¸…é™¤è¿‡æœŸæ•°æ®äº†ï¼Œä¸ä»…æ˜¯æ¸…é™¤Redis ä¸­çš„è¿‡æœŸæ•°æ®ï¼Œä½ å®Œå…¨å¯ä»¥æŠŠRedis é‡Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å½“æˆæ˜¯å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„ç´¢å¼•ï¼Œ<br>ç”¨Redis æ¥æ‰¾å‡ºå“ªäº›æ•°æ®éœ€è¦è¿‡æœŸåˆ é™¤ï¼Œç„¶åå†ç²¾å‡†åœ°ä»æ•°æ®åº“ä¸­åˆ é™¤ç›¸åº”çš„è®°å½•ã€‚</p>
<h3 id="4ã€è®¡æ•°å™¨åº”ç”¨"><a href="#4ã€è®¡æ•°å™¨åº”ç”¨" class="headerlink" title="4ã€è®¡æ•°å™¨åº”ç”¨"></a>4ã€è®¡æ•°å™¨åº”ç”¨</h3><p>Redis çš„å‘½ä»¤éƒ½æ˜¯åŸå­æ€§çš„ï¼Œä½ å¯ä»¥è½»æ¾åœ°åˆ©ç”¨INCRï¼ŒDECR å‘½ä»¤æ¥æ„å»ºè®¡æ•°å™¨ç³»ç»Ÿã€‚</p>
<h3 id="5ã€Uniq-æ“ä½œï¼Œè·å–æŸæ®µæ—¶é—´æ‰€æœ‰æ•°æ®æ’é‡å€¼"><a href="#5ã€Uniq-æ“ä½œï¼Œè·å–æŸæ®µæ—¶é—´æ‰€æœ‰æ•°æ®æ’é‡å€¼" class="headerlink" title="5ã€Uniq æ“ä½œï¼Œè·å–æŸæ®µæ—¶é—´æ‰€æœ‰æ•°æ®æ’é‡å€¼"></a>5ã€Uniq æ“ä½œï¼Œè·å–æŸæ®µæ—¶é—´æ‰€æœ‰æ•°æ®æ’é‡å€¼</h3><p>è¿™ä¸ªä½¿ç”¨Redis çš„set æ•°æ®ç»“æ„æœ€åˆé€‚äº†ï¼Œåªéœ€è¦ä¸æ–­åœ°å°†æ•°æ®å¾€set ä¸­æ‰”å°±è¡Œäº†ï¼Œset æ„ä¸ºé›†åˆï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨æ’é‡ã€‚</p>
<h3 id="6ã€å®æ—¶ç³»ç»Ÿï¼Œååƒåœ¾ç³»ç»Ÿ"><a href="#6ã€å®æ—¶ç³»ç»Ÿï¼Œååƒåœ¾ç³»ç»Ÿ" class="headerlink" title="6ã€å®æ—¶ç³»ç»Ÿï¼Œååƒåœ¾ç³»ç»Ÿ"></a>6ã€å®æ—¶ç³»ç»Ÿï¼Œååƒåœ¾ç³»ç»Ÿ</h3><p>é€šè¿‡ä¸Šé¢è¯´åˆ°çš„set åŠŸèƒ½ï¼Œä½ å¯ä»¥çŸ¥é“ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·æ˜¯å¦è¿›è¡Œäº†æŸä¸ªæ“ä½œï¼Œå¯ä»¥æ‰¾åˆ°å…¶æ“ä½œçš„é›†åˆå¹¶è¿›è¡Œåˆ†æç»Ÿè®¡å¯¹æ¯”ç­‰ã€‚<br>æ²¡æœ‰åšä¸åˆ°ï¼Œåªæœ‰æƒ³ä¸åˆ°ã€‚</p>
<h3 id="7ã€Pub-Sub-æ„å»ºå®æ—¶æ¶ˆæ¯ç³»ç»Ÿ"><a href="#7ã€Pub-Sub-æ„å»ºå®æ—¶æ¶ˆæ¯ç³»ç»Ÿ" class="headerlink" title="7ã€Pub/Sub æ„å»ºå®æ—¶æ¶ˆæ¯ç³»ç»Ÿ"></a>7ã€Pub/Sub æ„å»ºå®æ—¶æ¶ˆæ¯ç³»ç»Ÿ</h3><p>Redis çš„Pub/Sub ç³»ç»Ÿå¯ä»¥æ„å»ºå®æ—¶çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚å¾ˆå¤šç”¨Pub/Sub æ„å»ºçš„å®æ—¶èŠå¤©ç³»ç»Ÿçš„ä¾‹å­ã€‚</p>
<h3 id="8ã€æ„å»ºé˜Ÿåˆ—ç³»ç»Ÿ"><a href="#8ã€æ„å»ºé˜Ÿåˆ—ç³»ç»Ÿ" class="headerlink" title="8ã€æ„å»ºé˜Ÿåˆ—ç³»ç»Ÿ"></a>8ã€æ„å»ºé˜Ÿåˆ—ç³»ç»Ÿ</h3><p>ä½¿ç”¨list å¯ä»¥æ„å»ºé˜Ÿåˆ—ç³»ç»Ÿï¼Œä½¿ç”¨sorted set ç”šè‡³å¯ä»¥æ„å»ºæœ‰ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ç³»ç»Ÿã€‚</p>
<h3 id="9ã€ç¼“å­˜"><a href="#9ã€ç¼“å­˜" class="headerlink" title="9ã€ç¼“å­˜"></a>9ã€ç¼“å­˜</h3><p>è¿™ä¸ªä¸å¿…è¯´äº†ï¼Œæ€§èƒ½ä¼˜äºMemcachedï¼Œæ•°æ®ç»“æ„æ›´å¤šæ ·åŒ–ã€‚</p>
<h2 id="Redis-å®‰è£…"><a href="#Redis-å®‰è£…" class="headerlink" title="Redis å®‰è£…"></a>Redis å®‰è£…</h2><h3 id="ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½Redisï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç åŒ…"><a href="#ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½Redisï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç åŒ…" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½Redisï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç åŒ…"></a>ç¬¬ä¸€æ­¥ï¼Œä¸‹è½½Redisï¼Œå¯ä»¥é€šè¿‡å®˜ç½‘<a href="http://redis.io/download" title="redis download" target="_blank" rel="external">ä¸‹è½½</a>æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç åŒ…</h3><h3 id="ç¬¬äºŒæ­¥ï¼Œå°†ä¸‹è½½å¥½çš„æºä»£ç åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Linuxä¸»æœºä¸­ï¼Œè§£å‹ï¼Œç¼–è¯‘å®‰è£…"><a href="#ç¬¬äºŒæ­¥ï¼Œå°†ä¸‹è½½å¥½çš„æºä»£ç åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Linuxä¸»æœºä¸­ï¼Œè§£å‹ï¼Œç¼–è¯‘å®‰è£…" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œå°†ä¸‹è½½å¥½çš„æºä»£ç åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Linuxä¸»æœºä¸­ï¼Œè§£å‹ï¼Œç¼–è¯‘å®‰è£…"></a>ç¬¬äºŒæ­¥ï¼Œå°†ä¸‹è½½å¥½çš„æºä»£ç åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Linuxä¸»æœºä¸­ï¼Œè§£å‹ï¼Œç¼–è¯‘å®‰è£…</h3><pre><code>$ tar zxf redis-2.8.13.tar.gz
$ cd redis-2.8.13
$ make
$ cd src &amp;&amp; make all
</code></pre><h3 id="ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨redisæœåŠ¡"><a href="#ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨redisæœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨redisæœåŠ¡"></a>ç¬¬ä¸‰æ­¥ï¼Œå¯åŠ¨redisæœåŠ¡</h3><pre><code>$ src/redis-server
</code></pre><h3 id="ç¬¬å››æ­¥ï¼Œæµ‹è¯•redis"><a href="#ç¬¬å››æ­¥ï¼Œæµ‹è¯•redis" class="headerlink" title="ç¬¬å››æ­¥ï¼Œæµ‹è¯•redis"></a>ç¬¬å››æ­¥ï¼Œæµ‹è¯•redis</h3><pre><code>$ redisï¼cli
redis 127.0.0.1:6379&gt; set foo 123
redis 127.0.0.1:6379&gt; get foo  
&quot;123&quot;
redis 127.0.0.1:6379&gt; exit
</code></pre><p>RedisæœåŠ¡å™¨çš„ç«¯å£é»˜è®¤æ˜¯6379ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°RedisæœåŠ¡ä¼šä¸€ç›´å ç”¨æˆ‘ä»¬å½“å‰ç™»å½•Linuxçš„SESSIONï¼Œé‚£èƒ½å¦åƒMysqlæˆ–è€…æ˜¯MongoDBä¸€æ ·åœ¨åå°æ‰§è¡ŒRedisè¿›ç¨‹å‘¢ï¼Œå½“ç„¶å¯ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ”¹Redisçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”å¯åŠ¨çš„æ—¶å€™æŒ‡å®šé…ç½®æ–‡ä»¶å³å¯ï¼</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªä¸“ä¸šçš„DBAï¼Œé‚£ä¹ˆå®ä¾‹å¯åŠ¨æ—¶ä¼šåŠ å¾ˆå¤šå‚æ•°ä»¥ä¾¿æ˜¯ç³»ç»Ÿè¿è¡Œçš„éå¸¸ç¨³å®šï¼Œè¿™æ ·å°±å¯èƒ½åœ¨å¯åŠ¨æ—¶åœ¨Redisåé¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œä»¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œå°±åƒmysqlä¸€æ ·çš„è¯»å–å¯åŠ¨é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥å¯åŠ¨æ•°æ®åº“ã€‚</p>
<p>Redisçš„é…ç½®æ–‡ä»¶redis.confé‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼š</p>
<pre><code>#æ˜¯å¦ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œ  
daemonize yes  
#é…ç½® pid çš„å­˜æ”¾è·¯å¾„åŠæ–‡ä»¶å,é»˜è®¤ä¸ºå½“å‰è·¯å¾„ä¸‹  
pidfile redis.pid  
#Redis é»˜è®¤ç›‘å¬ç«¯å£  
port 6379  
#å®¢æˆ·ç«¯é—²ç½®å¤šå°‘ç§’å,æ–­å¼€è¿æ¥  
timeout 300  
#æ—¥å¿—æ˜¾ç¤ºçº§åˆ«  
loglevel verbose  
#æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„æ–‡ä»¶å,ä¹Ÿå¯æŒ‡å®šåˆ°æ ‡å‡†è¾“å‡ºç«¯å£  
logfile stdout  
#è®¾ç½®æ•°æ®åº“çš„æ•°é‡,é»˜è®¤è¿æ¥çš„æ•°æ®åº“æ˜¯ 0,å¯ä»¥é€šè¿‡ select N æ¥è¿æ¥ä¸åŒçš„æ•°æ®åº“  
databases 16  
#ä¿å­˜æ•°æ®åˆ° disk çš„ç­–ç•¥  
#å½“æœ‰ä¸€æ¡ Keys æ•°æ®è¢«æ”¹å˜æ˜¯,900 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡  
save 900 1  
#å½“æœ‰ 10 æ¡ Keys æ•°æ®è¢«æ”¹å˜æ—¶,300 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡  
save 300 10  
#å½“æœ‰ 1w æ¡ keys æ•°æ®è¢«æ”¹å˜æ—¶,60 ç§’åˆ·æ–°åˆ° disk ä¸€æ¬¡  
save 60 10000  
#å½“ dump .rdb æ•°æ®åº“çš„æ—¶å€™æ˜¯å¦å‹ç¼©æ•°æ®å¯¹è±¡  
rdbcompression yes  
#dump æ•°æ®åº“çš„æ•°æ®ä¿å­˜çš„æ–‡ä»¶å  
dbfilename dump.rdb  
#Redis çš„å·¥ä½œç›®å½•  
dir /home/falcon/redis-2.0.0/  
########### Replication #####################  
#Redis çš„å¤åˆ¶é…ç½®  
# slaveof &lt;masterip&gt; &lt;masterport&gt;  
# masterauth &lt;master-password&gt;  
############## SECURITY ###########  
# requirepass foobared  
############### LIMITS ##############  
#æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°  
# maxclients 128  
#æœ€å¤§å†…å­˜ä½¿ç”¨ç‡  
# maxmemory &lt;bytes&gt;  
########## APPEND ONLY MODE #########  
#æ˜¯å¦å¼€å¯æ—¥å¿—åŠŸèƒ½  
appendonly no  
# åˆ·æ–°æ—¥å¿—åˆ° disk çš„è§„åˆ™  
# appendfsync always  
appendfsync everysec  
# appendfsync no  
################ VIRTUAL MEMORY ###########  
#æ˜¯å¦å¼€å¯ VM åŠŸèƒ½  
vm-enabled no  
# vm-enabled yes  
vm-swap-file logs/redis.swap  
vm-max-memory 0  
vm-page-size 32  
vm-pages 134217728  
vm-max-threads 4  
############# ADVANCED CONFIG ###############  
glueoutputbuf yes  
hash-max-zipmap-entries 64  
hash-max-zipmap-value 512  
#æ˜¯å¦é‡ç½® Hash è¡¨  
activerehashing yes
</code></pre><p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¡å°±æ˜¯å¯åŠ¨åå°è¿›ç¨‹å¯åŠ¨RedisæœåŠ¡ï¼Œå°†å…¶è®¾ç½®ä¸ºyesï¼Œå°±ä¼šåœ¨åå°è¿è¡ŒRedisæœåŠ¡ï¼</p>
<p>å¯åŠ¨çš„æ—¶å€™æ¥æŒ‡å®šredisçš„é…ç½®æ–‡ä»¶</p>
<pre><code>$ /usr/local/redis/bin/redis-server /usr/local/redis/redis.conf
</code></pre><h2 id="å¼€æœºå¯åŠ¨"><a href="#å¼€æœºå¯åŠ¨" class="headerlink" title="å¼€æœºå¯åŠ¨"></a>å¼€æœºå¯åŠ¨</h2><h3 id="1-é…ç½®"><a href="#1-é…ç½®" class="headerlink" title="1.é…ç½®"></a>1.é…ç½®</h3><p>å°†ä»¥ä¸‹ä»£ç å­˜ä¸ºredis,æ”¾åˆ°/etc/init.d/ä¸‹é¢,æ³¨æ„ä¿®æ”¹ç›¸åº”çš„è·¯å¾„</p>
<pre><code>#
# chkconfig: - 90 10
# description: Redis is an open source, advanced key-value store. 
#
# processname: redis-server
# config: /etc/redis.conf
# pidfile: /var/run/redis.pid

PATH=/usr/local/bin:/sbin:/usr/bin:/bin

REDISPORT=6379
EXEC=/usr/local/bin/redis-server
REDIS_CLI=/usr/local/bin/redis-cli

PIDFILE=/var/run/redis.pid
CONF=&quot;/etc/redis.conf&quot;

case &quot;$1&quot; in
    start)
        if [ -f $PIDFILE ]
        then
                echo -n &quot;$PIDFILE exists, process is already running or crashed\n&quot;
        else
                echo -n &quot;Starting Redis server...\n&quot;
                $EXEC $CONF
        fi
        ;;
    stop)
        if [ ! -f $PIDFILE ]
        then
                echo -n &quot;$PIDFILE does not exist, process is not running\n&quot;
        else
        PID=$(cat $PIDFILE)
                echo -n &quot;Stopping ...\n&quot;
                $REDIS_CLI -p $REDISPORT SHUTDOWN
                while [ -x ${PIDFILE} ]
                do
                    echo &quot;Waiting for Redis to shutdown ...&quot;
                    sleep 1
                done
                echo &quot;Redis stopped&quot;
        fi
        ;;
esac
</code></pre><h3 id="2-ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™"><a href="#2-ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™" class="headerlink" title="2.ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™"></a>2.ä¿®æ”¹é…ç½®æ–‡ä»¶æƒé™</h3><pre><code>$ chmod a+x /etc/init.d/redis
</code></pre><h3 id="3-è®¾å®šå¼€æœºå¯åŠ¨"><a href="#3-è®¾å®šå¼€æœºå¯åŠ¨" class="headerlink" title="3.è®¾å®šå¼€æœºå¯åŠ¨"></a>3.è®¾å®šå¼€æœºå¯åŠ¨</h3><pre><code>$ chkconfig redis on
</code></pre><h3 id="4-å¯åŠ¨ï¼Œåœæ­¢redisæœåŠ¡"><a href="#4-å¯åŠ¨ï¼Œåœæ­¢redisæœåŠ¡" class="headerlink" title="4.å¯åŠ¨ï¼Œåœæ­¢redisæœåŠ¡"></a>4.å¯åŠ¨ï¼Œåœæ­¢redisæœåŠ¡</h3><pre><code>$ service redis start   #æˆ–è€… /etc/init.d/redis start  
$ service redis stop    #æˆ–è€… /etc/init.d/redis stop 
</code></pre>]]></content>
    
    <summary type="html">
    
      redis ç›¸å…³æ•´ç†ï¼ˆä¸€ï¼‰ç®€ä»‹åŠå®‰è£…
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>CAS æœåŠ¡å™¨ç«¯å–æ¶ˆ httpsçš„é…ç½® æ–¹æ³•</title>
    <link href="http://blog.wglgg.cn/2014/07/14/cas-disable-ssl/"/>
    <id>http://blog.wglgg.cn/2014/07/14/cas-disable-ssl/</id>
    <published>2014-07-13T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.583Z</updated>
    
    <content type="html"><![CDATA[<p>éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶æœ‰ï¼š<br>WEB-INF/deployerConfigContext.xml ã€ WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml ã€<br>WEB-INF\spring-configuration\warnCookieGenerator.xml</p>
<p>è¯¦ç»†é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<h3 id="1-ã€-WEB-INF-deployerConfigContext-xml-åœ¨"><a href="#1-ã€-WEB-INF-deployerConfigContext-xml-åœ¨" class="headerlink" title="1 ã€ WEB-INF/deployerConfigContext.xml åœ¨"></a>1 ã€ WEB-INF/deployerConfigContext.xml åœ¨</h3><pre><code>&lt; bean class = &quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot;     p:httpClient-ref = &quot;httpClient&quot; /&gt;
</code></pre><p>å¢åŠ å‚æ•° p:requireSecure=â€falseâ€ ï¼Œæ˜¯å¦éœ€è¦å®‰å…¨éªŒè¯ï¼Œå³ HTTPS ï¼Œ false ä¸ºä¸é‡‡ç”¨ å¦‚ä¸‹ï¼š</p>
<pre><code>&lt; bean class = &quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; p:httpClient-ref = &quot;httpClient&quot; p:requireSecure= &quot;false&quot; /&gt;
</code></pre><h3 id="2-ã€-WEB-INF-spring-configuration-ticketGrantingTicketCookieGenerator-xml-ä¿®æ”¹-p-cookieSecure-â€trueâ€-ä¸º-p-cookieSecure-â€-false-â€œ-ï¼Œ-å³ä¸éœ€è¦å®‰å…¨-cookie-å¦‚ä¸‹éƒ¨åˆ†ï¼š"><a href="#2-ã€-WEB-INF-spring-configuration-ticketGrantingTicketCookieGenerator-xml-ä¿®æ”¹-p-cookieSecure-â€trueâ€-ä¸º-p-cookieSecure-â€-false-â€œ-ï¼Œ-å³ä¸éœ€è¦å®‰å…¨-cookie-å¦‚ä¸‹éƒ¨åˆ†ï¼š" class="headerlink" title="2 ã€ WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml ä¿®æ”¹ p:cookieSecure=â€trueâ€ ä¸º p:cookieSecure=â€ false â€œ ï¼Œ å³ä¸éœ€è¦å®‰å…¨ cookie å¦‚ä¸‹éƒ¨åˆ†ï¼š"></a>2 ã€ WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml ä¿®æ”¹ p:cookieSecure=â€trueâ€ ä¸º p:cookieSecure=â€ false â€œ ï¼Œ å³ä¸éœ€è¦å®‰å…¨ cookie å¦‚ä¸‹éƒ¨åˆ†ï¼š</h3><pre><code>&lt; bean id = &quot;ticketGrantingTicketCookieGenerator&quot; class = &quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&quot;
   p:cookieSecure = &quot; false &quot;
   p:cookieMaxAge = &quot;-1&quot;
   p:cookieName = &quot;CASTGC&quot;
   p:cookiePath = &quot;/cas&quot; /&gt;
</code></pre><h3 id="3-ã€-WEB-INF-spring-configuration-warnCookieGenerator-xml"><a href="#3-ã€-WEB-INF-spring-configuration-warnCookieGenerator-xml" class="headerlink" title="3 ã€ WEB-INF\spring-configuration\warnCookieGenerator.xml"></a>3 ã€ WEB-INF\spring-configuration\warnCookieGenerator.xml</h3><p>ä¿®æ”¹ p:cookieSecure=â€trueâ€ ä¸º p:cookieSecure=â€ false â€œ ï¼Œ å³ä¸éœ€è¦å®‰å…¨ cookie ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>&lt; bean id = &quot;warnCookieGenerator&quot; class = &quot;org.jasig.cas.web.support.CookieRetrievingCookieGenerator&quot;
   p:cookieSecure = &quot; false &quot;
   p:cookieMaxAge = &quot;-1&quot;
   p:cookieName = &quot;CASPRIVACY&quot;
   p:cookiePath = &quot;/cas&quot; /&gt;
</code></pre>]]></content>
    
    <summary type="html">
    
      CAS æœåŠ¡å™¨ç«¯å–æ¶ˆ httpsçš„é…ç½® æ–¹æ³•
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>CAS logout æ³¨é”€</title>
    <link href="http://blog.wglgg.cn/2014/07/12/cas-logout/"/>
    <id>http://blog.wglgg.cn/2014/07/12/cas-logout/</id>
    <published>2014-07-11T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.591Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç½‘å‹ä¸åœé—®ä¸ºä»€ä¹ˆCAS-Logoutåï¼Œä»ç„¶èƒ½å¤Ÿè®¿é—®åº”ç”¨ï¼Ÿ"><a href="#ç½‘å‹ä¸åœé—®ä¸ºä»€ä¹ˆCAS-Logoutåï¼Œä»ç„¶èƒ½å¤Ÿè®¿é—®åº”ç”¨ï¼Ÿ" class="headerlink" title="ç½‘å‹ä¸åœé—®ä¸ºä»€ä¹ˆCAS Logoutåï¼Œä»ç„¶èƒ½å¤Ÿè®¿é—®åº”ç”¨ï¼Ÿ"></a>ç½‘å‹ä¸åœé—®ä¸ºä»€ä¹ˆCAS Logoutåï¼Œä»ç„¶èƒ½å¤Ÿè®¿é—®åº”ç”¨ï¼Ÿ</h3><p><a href="http://dev2dev.bea.com.cn/bbs/thread.jspa?forumID=29304&amp;threadID=37715&amp;messageID=221727#221727" target="_blank" rel="external">http://dev2dev.bea.com.cn/bbs/thread.jspa?forumID=29304&amp;threadID=37715&amp;messageID=221727#221727</a> å‡è®¾æœ‰webapp1, webapp2, cas serverï¼Œwebapp1, webapp2å‡å—cas serverä¿æŠ¤ï¼Œé¦–å…ˆï¼Œåœ¨è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼š </p>
<ul>
<li><p>ç¬¬1ç§ä¸èƒ½logoutçš„æƒ…å†µï¼š</p>
<ol>
<li>ç™»å½•äº†WebApp1ï¼Œredirectåˆ°caserverï¼Œcasserverè®¤è¯åï¼Œå†redirectåˆ°webapp1ï¼Œokï¼</li>
<li>httpæ–¹å¼ lougout casserver1ï¼Œå³<a href="http://yale_casserver:8080/cas/lougout" target="_blank" rel="external">http://yale_casserver:8080/cas/lougout</a> æ˜¾ç¤ºlogoutæˆåŠŸ</li>
<li>è®¿é—®webapp2ï¼Œè¿˜èƒ½è®¿é—®ï¼è¿™æ˜¯éå¸¸æ­£å¸¸çš„ä¸€ç§æƒ…å†µï¼Œå› ä¸ºä½ ä¸é€šè¿‡httpsæ¥æ³¨é”€ï¼Œcasserveræ€ä¹ˆâ€æ€â€æ‰å®ƒé€šè¿‡httpså‘ç»™ä½ çš„TGC Cookie? </li>
</ol>
</li>
<li><p>ç¬¬2ç§ä¸èƒ½logoutçš„æƒ…å†µï¼š </p>
<ol>
<li>ç™»å½•äº†WebApp1ï¼Œredirectåˆ°caserver,casserverè®¤è¯åï¼Œå†redirectåˆ°webapp1ï¼Œokï¼</li>
<li>httpsæ–¹å¼ lougout casserver1ï¼Œå³<a href="https://yale_casserver:8443/cas/lougout" target="_blank" rel="external">https://yale_casserver:8443/cas/lougout</a> æ˜¾ç¤ºlogoutæˆåŠŸ</li>
<li>è®¿é—®webapp1ï¼Œè¿˜èƒ½è®¿é—®ï¼è®¿é—®webapp2ï¼Œä¸èƒ½è®¿é—®ï¼Œé‡å®šå‘åˆ°casserverè¦æ±‚ç™»å½•ï¼è¿™ä¹Ÿæ˜¯éå¸¸æ­£å¸¸çš„ä¸€ç§æƒ…å†µï¼Œå› ä¸ºä½ å·²ç»èƒ½å¤Ÿè®¿é—®ï¼Œä½ ç»§ç»­å¯ä»¥ç»§ç»­è®¿é—®ï¼Œ<br>CASLogoutä¸èƒ½é˜»æ­¢ä½ è®¿é—®webapp1ï¼Œå®ƒåªèƒ½é˜»æ­¢ä½ è®¿é—®webapp2ï¼Œå› ä¸ºä½ å·²ç»è¢«å…è®¸è®¿é—®webapp1ï¼Œè€Œwebapp2åˆ™è¿˜æ²¡æœ‰ï¼Œå¦‚æœä½ åœ¨(1)çš„æ—¶å€™ï¼Œé¡ºå¸¦ä¹Ÿè®¿é—®webapp2ï¼Œé‚£ä¹ˆä½ çš„æ³¨é”€å°†æ¯«æ— ä½œç”¨äº†ï¼ŒCASæ— æ³•é˜»æ­¢ä½ è®¿é—®è¿™ä¸¤ä¸ªwebappï¼Œå› ä¸ºä½ æœ‰Service Ticketã€‚ </li>
</ol>
</li>
</ul>
<p>å¦‚æœä½ å¯¹æ­¤è´¹è§£ï¼Œé‚£æ—¶å› ä¸ºä½ å·²ä¸ºLogoutå°±æ˜¯é€€å‡ºç³»ç»Ÿï¼Œé‚£æˆ‘åªèƒ½è¡¨ç¤ºé—æ†¾ï¼Œå› ä¸ºCAS Logoutçš„ä½œç”¨ä¸æ˜¯è¿™æ ·ï¼Œå®ƒçš„ä½œç”¨æ˜¯é˜»æ­¢ä½ ç»§ç»­é€šè¿‡TGCï¼ˆå®ƒç®€å•åœ°æ¸…æ¥šäº†IEçš„TGC Cookieï¼‰æ¥è·å–STï¼Œé˜»æ­¢ä½ è·å–é€šå‘å…¶ä»–webåº”ç”¨çš„Ticketã€‚ </p>
<p>æ‰€ä»¥ï¼Œç”¨å®Œwebapp1çš„æ—¶å€™ï¼Œæ³¨é”€ï¼Œç„¶åå†å…³é—­æ‰IEå°±å½»åº•Logoutäº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      CAS ç™»å‡º æ³¨é”€
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>SSOå®ç°æœºåˆ¶:Cookieæœºåˆ¶å’ŒSessionæœºåˆ¶</title>
    <link href="http://blog.wglgg.cn/2014/07/11/cas-implementation-mechanism-cookie-session/"/>
    <id>http://blog.wglgg.cn/2014/07/11/cas-implementation-mechanism-cookie-session/</id>
    <published>2014-07-10T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.586Z</updated>
    
    <content type="html"><![CDATA[<p>SSO çš„å®ç°æœºåˆ¶ä¸å°½ç›¸åŒï¼Œå¤§ä½“åˆ†å¯ä¸º Cookie æœºåˆ¶å’Œ Session æœºåˆ¶ä¸¤å¤§ç±»ã€‚</p>
<ul>
<li>WebLogic é€šè¿‡ Session å…±äº«è®¤è¯ä¿¡æ¯ã€‚ Session æ˜¯ä¸€ç§æœåŠ¡å™¨ç«¯æœºåˆ¶ï¼Œå½“å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¸ºå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæƒŸä¸€çš„ SessionID ï¼Œä»¥ä½¿åœ¨æ•´ä¸ªäº¤äº’è¿‡ç¨‹ä¸­å§‹ç»ˆä¿æŒçŠ¶æ€ï¼Œè€Œäº¤äº’çš„ä¿¡æ¯åˆ™å¯ç”±åº”ç”¨è‡ªè¡ŒæŒ‡å®šï¼Œå› æ­¤ ç”¨ Session æ–¹å¼å®ç° SSO ï¼Œä¸èƒ½åœ¨å¤šä¸ªæµè§ˆå™¨ä¹‹é—´å®ç°å•ç‚¹ç™»å½•ï¼Œä½†å´å¯ä»¥è·¨åŸŸ ã€‚</li>
<li>WebSphere é€šè¿‡ Cookie è®°å½•è®¤è¯ä¿¡æ¯ã€‚ Cookie æ˜¯ä¸€ç§å®¢æˆ·ç«¯æœºåˆ¶ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹ä¸»è¦åŒ…æ‹¬ : åå­—ã€å€¼ã€è¿‡æœŸæ—¶é—´ã€è·¯å¾„å’ŒåŸŸï¼Œè·¯å¾„ä¸åŸŸåˆåœ¨ä¸€èµ·å°±æ„æˆäº† Cookie çš„ä½œç”¨èŒƒå›´ï¼Œå› æ­¤ ç”¨ Cookie æ–¹å¼å¯å®ç° SSO ï¼Œä½†åŸŸåå¿…é¡»ç›¸åŒ ã€‚</li>
</ul>
<p>ç›®å‰ å¤§éƒ¨åˆ† SSO äº§å“é‡‡ç”¨çš„æ˜¯ Cookie æœºåˆ¶ã€‚ ç›®å‰èƒ½å¤Ÿæ‰¾åˆ°çš„æœ€å¥½çš„å¼€æºå•ç‚¹ç™»å½•äº§å“ CAS ä¹Ÿæ˜¯é‡‡ç”¨ Cookie æœºåˆ¶ã€‚ CAS å•ç‚¹ç™»å½•ç³»ç»Ÿæœ€æ—©ç”±è€¶é²å¤§å­¦å¼€å‘ã€‚ 2004 å¹´ 12 æœˆï¼Œ CAS æˆä¸º JA-SIG ä¸­çš„ä¸€ä¸ªé¡¹ç›®ã€‚ JA-SIG çš„å…¨ç§°æ˜¯ Java Architectures Special Interest Group ï¼Œæ˜¯åœ¨é«˜æ ¡ä¸­æ¨å¹¿å’Œæ¢è®¨åŸºäº Java çš„å¼€æºæŠ€æœ¯çš„ä¸€ä¸ªç»„ç»‡ã€‚ CAS çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚è®¾è®¡ç†å¿µå…ˆè¿›ã€ä½“ç³»ç»“æ„åˆç†ã€é…ç½®ç®€å•ã€å®¢æˆ·ç«¯æ”¯æŒå¹¿æ³›ã€æŠ€æœ¯æˆç†Ÿç­‰ç­‰ã€‚</p>
]]></content>
    
    <summary type="html">
    
      SSOå®ç°æœºåˆ¶:Cookieæœºåˆ¶å’ŒSessionæœºåˆ¶
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>CAS ç™»å½•æµç¨‹httpwatchè§£æ</title>
    <link href="http://blog.wglgg.cn/2014/07/10/cas-login-flow-httpwatch/"/>
    <id>http://blog.wglgg.cn/2014/07/10/cas-login-flow-httpwatch/</id>
    <published>2014-07-09T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.588Z</updated>
    
    <content type="html"><![CDATA[<p>cas sso ç™»å½•æµç¨‹è§£æï¼Œä½¿ç”¨httpwatchæŸ¥çœ‹</p>
<h2 id="1-ç¬¬ä¸€æ¬¡è®¿é—®-http-localhost-8080-a"><a href="#1-ç¬¬ä¸€æ¬¡è®¿é—®-http-localhost-8080-a" class="headerlink" title="1. ç¬¬ä¸€æ¬¡è®¿é—® http://localhost:8080/a"></a>1. ç¬¬ä¸€æ¬¡è®¿é—® <a href="http://localhost:8080/a" target="_blank" rel="external">http://localhost:8080/a</a></h2><p>CLIENTï¼šæ²¡ç¥¨æ®ä¸”SESSIONä¸­æ²¡æœ‰Assertionæ‰€ä»¥è·³è½¬è‡³CAS </p>
<p>CASï¼šæ‹¿ä¸åˆ°TGCæ•…è¦æ±‚ç”¨æˆ·ç™»å½•<br><img src="/images/cas/cas_clip_image008.jpg" alt="image8"> </p>
<h2 id="2-è®¤è¯æˆåŠŸåå›è·³"><a href="#2-è®¤è¯æˆåŠŸåå›è·³" class="headerlink" title="2. è®¤è¯æˆåŠŸåå›è·³"></a>2. è®¤è¯æˆåŠŸåå›è·³</h2><p>CASï¼šé€šè¿‡TGTç”ŸæˆSTå‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¿å­˜TGCï¼Œå¹¶é‡å®šå‘åˆ°<a href="http://localhost:8080/a" target="_blank" rel="external">http://localhost:8080/a</a> </p>
<p>CLIENTï¼šå¸¦æœ‰ç¥¨æ®æ‰€ä»¥ä¸è·³è½¬åªæ˜¯åå°å‘ç»™CASéªŒè¯ç¥¨æ®ï¼ˆæµè§ˆå™¨ä¸­æ— æ³•çœ‹åˆ°è¿™ä¸€è¿‡ç¨‹ï¼‰<br><img src="/images/cas/cas_clip_image009.jpg" alt="image9"></p>
<h2 id="3-ç¬¬ä¸€æ¬¡è®¿é—®-http-localhost-8080-b"><a href="#3-ç¬¬ä¸€æ¬¡è®¿é—®-http-localhost-8080-b" class="headerlink" title="3. ç¬¬ä¸€æ¬¡è®¿é—® http://localhost:8080/b"></a>3. ç¬¬ä¸€æ¬¡è®¿é—® <a href="http://localhost:8080/b" target="_blank" rel="external">http://localhost:8080/b</a></h2><p>CLIENTï¼šæ²¡ç¥¨æ®ä¸”SESSIONä¸­æ²¡æœ‰æ¶ˆæ¯æ‰€ä»¥è·³è½¬è‡³CAS </p>
<p>CASï¼šä»å®¢æˆ·ç«¯å–å‡ºTGCï¼Œå¦‚æœTGCæœ‰æ•ˆåˆ™ç»™ç”¨æˆ·STå¹¶åå°éªŒè¯STï¼Œä»è€ŒSSOã€‚ã€å¦‚æœå¤±æ•ˆé‡ç™»å½•æˆ–æ³¨é”€æ—¶ï¼Œæ€ä¹ˆé€šçŸ¥å…¶å®ƒç³»ç»Ÿæ›´æ–°SESSIONä¿¡æ¯å‘¢ï¼Ÿï¼ŸTicketGrantingTicketImplç±»grantServiceTicketæ–¹æ³•é‡Œthis.services.put(id, service);å¯è§CASç«¯å·²ç»è®°å½•äº†å½“å‰ç™»å½•çš„å­ç³»ç»Ÿã€‘<br><img src="/images/cas/cas_clip_image010.jpg" alt="image010"></p>
<h2 id="4-å†æ¬¡è®¿é—®-http-localhost-8080-a"><a href="#4-å†æ¬¡è®¿é—®-http-localhost-8080-a" class="headerlink" title="4. å†æ¬¡è®¿é—® http://localhost:8080/a"></a>4. å†æ¬¡è®¿é—® <a href="http://localhost:8080/a" target="_blank" rel="external">http://localhost:8080/a</a></h2><p>CLIENTï¼šæ²¡ç¥¨æ®ä½†æ˜¯SESSIONä¸­æœ‰(Assertion)æ¶ˆæ¯æ•…ä¸è·³è½¬ä¹Ÿä¸ç”¨å‘CASéªŒè¯ç¥¨æ®ï¼Œå…è®¸ç”¨æˆ·è®¿é—®<br><img src="/images/cas/cas_clip_image011.jpg" alt="image011"></p>
<p>CAS Authentication Filterè®¤è¯ï¼š</p>
<pre><code>if (CommonUtils.isBlank(ticket) &amp;&amp; request.setAttribute(CONST_CAS_ASSERTION, assertion)== null &amp;&amp; !wasGatewayed) { 
 //å³æ²¡æœ‰ç¥¨æ®ä¸”æ²¡æœ‰SESSIONé€šè¿‡ä¿¡æ¯åˆ™è·³è½¬ 
}
</code></pre><p>CAS Validation Filterè®¤è¯ï¼š </p>
<pre><code>if (CommonUtils.isNotBlank(ticket)) { 
    //å³å¦‚æœå‘ç°STåˆ™å‘ç»™CASè®¤è¯ï¼Œå¦åˆ™ä¸è®¤è¯ã€‚ 
    final Assertion assertion = this.ticketValidator.validate( 
                    ticket, constructServiceUrl(request, response)); 
    request.setAttribute(CONST_CAS_ASSERTION, assertion);//è®¤è¯é€šè¿‡åå°†ä¿¡æ¯ä¿å­˜SESSIONä¸­
}
</code></pre>]]></content>
    
    <summary type="html">
    
      CAS ç™»å½•æµç¨‹httpwatchè§£æ
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
  <entry>
    <title>CAS æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶</title>
    <link href="http://blog.wglgg.cn/2014/07/08/cas-server-config/"/>
    <id>http://blog.wglgg.cn/2014/07/08/cas-server-config/</id>
    <published>2014-07-07T16:00:00.000Z</published>
    <updated>2017-04-07T06:51:33.593Z</updated>
    
    <content type="html"><![CDATA[<p>CAS æœåŠ¡å™¨ç«¯ä¸»è¦é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<ul>
<li>login-webflow.xmlï¼šå…¶ä¸­å†…å®¹æŒ‡å®šäº†å½“è®¿é—®cas/loginæ—¶çš„ç¨‹åºæµç¨‹ï¼Œåˆå§‹â€œinitialFlowSetupâ€</li>
<li>cas-servlet.xmlï¼šservletä¸classå¯¹åº”å…³ç³»</li>
<li>deployerConfigContext.xmlï¼šè®¤è¯ç®¡ç†å™¨ç›¸å…³</li>
<li>cas.propertiesï¼šç³»ç»Ÿå±æ€§è®¾ç½®</li>
<li>applicationContext.xmlï¼šç³»ç»Ÿå±æ€§ç›¸å…³</li>
<li>argumentExtractorsConfiguration.xmlï¼šä¸æ˜¯å¾ˆäº†è§£å®ƒçš„ç”¨é€”</li>
<li>ticketExpirationPolicies.xmlï¼šticketè¿‡æœŸæ—¶é—´è®¾ç½®</li>
<li>ticketGrantingTicketCookieGenerator.xmlï¼šTGT cookieå±æ€§ç›¸å…³ï¼Œæ˜¯å¦æ”¯æŒhttpä¹Ÿåœ¨è¿™å„¿ä¿®æ”¹</li>
<li>ticketRegistry.xmlï¼šä¿å­˜ticketçš„ç±»ç›¸å…³è®¾ç½®</li>
<li>uniqueIdGenerators.xmlï¼šticketè‡ªåŠ¨ç”Ÿæˆç±»è®¾ç½®</li>
<li>warnCookieGenerator.xmlï¼šåŒticketGrantingTicketCookieGenerator.xmlï¼Œç”Ÿæˆçš„ cookieåä¸ºCASPRIVACY</li>
</ul>
<h2 id="login-ï¼š"><a href="#login-ï¼š" class="headerlink" title="/login ï¼š"></a>/login ï¼š</h2><p>å½“è®¿é—®/loginæ—¶ï¼Œä¼šè°ƒç”¨login-webflow.xmlä¸­çš„æµç¨‹å›¾ï¼š<br><img src="/images/cas/cas_clip_image006.jpg" alt="cas flow">    </p>
<p>##/serviceValidate:<br>å¯¹åº”çš„å¤„ç†ç±»æ˜¯org.jasig.cas.web.ServiceValidateControllerï¼Œä¸»è¦è´Ÿè´£å¯¹service ticketçš„éªŒè¯ï¼Œå¤±è´¥è¿”å›casServiceValidationFailure.jspï¼ŒæˆåŠŸè¿”å›casServiceValidationSuccess.jspå¯¹service ticketçš„éªŒè¯æ˜¯é€šè¿‡clientç«¯å‘serverç«¯å‘é€httpï¼ˆæˆ–httpsï¼‰å®ç°çš„é€»è¾‘ï¼š </p>
<ol>
<li>é€šè¿‡ç”±clientç«¯ä¼ æ¥çš„ticketåˆ°DefaultTicketRegistryä¸­è·å–ç¼“å­˜çš„ServiceTicketImplå¯¹è±¡ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦å·²ç»è¿‡æœŸï¼ˆSTè¿‡æœŸæ—¶é—´é»˜è®¤æ˜¯5åˆ†é’Ÿï¼ŒTGTé»˜è®¤æ˜¯2ä¸ªå°æ—¶ï¼Œå¯ä»¥åœ¨ticketExpirationPolicies.xmlä¸­è¿›è¡Œä¿®æ”¹ï¼‰ä»¥åŠä¸å½“å‰serviceçš„idæ˜¯å¦ç›¸ä¸€ï¼Œä»¥ä¸Šéƒ½æ»¡è¶³åˆ™è¡¨ç¤ºéªŒè¯é€šè¿‡ã€‚</li>
<li>é€šè¿‡ServiceTicketImplå¯¹è±¡è·å–åˆ°ç™»å½•ä¹‹åçš„Authenticationå¯¹è±¡ï¼Œå€ŸåŠ©äºå®ƒç”ŸæˆImmutableAssertionImplå¯¹è±¡å¹¶è¿”å›</li>
<li>æˆåŠŸè¿”å›</li>
</ol>
<h2 id="CASæ•°æ®æµç¨‹"><a href="#CASæ•°æ®æµç¨‹" class="headerlink" title="CASæ•°æ®æµç¨‹"></a>CASæ•°æ®æµç¨‹</h2><p>Credentialsâ€“&gt;Principalâ€“&gt;Authentication </p>
<h2 id="å®šä¹‰è‡ªå·±çš„AuthenticationHandler"><a href="#å®šä¹‰è‡ªå·±çš„AuthenticationHandler" class="headerlink" title="å®šä¹‰è‡ªå·±çš„AuthenticationHandler"></a>å®šä¹‰è‡ªå·±çš„AuthenticationHandler</h2><p>åœ¨ä¸­å¿ƒè®¤è¯è¿›è¡Œè®¤è¯çš„è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨deployerConfigContext.xmlä¸­è®¾ç½®çš„AuthenticationHandleræ¥è¿›è¡Œè®¤è¯å·¥ä½œã€‚ </p>
<pre><code>&lt;property name=&quot;authenticationHandlers&quot;&gt;   
    &lt;list&gt;   
        &lt;!--  
            This is the authentication handler that authenticates services by means of callback via SSL, thereby validating a server side SSL certificate.   
        --&gt;   
        &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot;  
            p:httpClient-ref=&quot;httpClient&quot; /&gt;   
        &lt;!--   
             This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS    
             into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials   
             where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your   
             local authentication strategy.  You might accomplish this by coding a new such handler and declaring   
             edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.   
            --&gt;   
        &lt;bean   
            class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot; /&gt;   
        &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasAuthenticationHandler&quot;&gt;   
            &lt;property name=&quot;dataSource&quot; ref=&quot;casDataSource&quot; /&gt;   
        &lt;/bean&gt;   
    &lt;/list   
&lt;/property&gt; 
&lt;property name=&quot;authenticationHandlers&quot;&gt; 
    &lt;list&gt; 
        &lt;!--
        This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
        a server side SSL certificate. 
        --&gt; 
        &lt;bean class=&quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot; 
        p:httpClient-ref=&quot;httpClient&quot; /&gt; 
        &lt;!-- 
        This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS 
        into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials 
        where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your 
        local authentication strategy.  You might accomplish this by coding a new such handler and declaring
        edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules. 
        --&gt; 
        &lt;bean 
        class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot; /&gt; 
        &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasAuthenticationHandler&quot;&gt; 
        &lt;property name=&quot;dataSource&quot; ref=&quot;casDataSource&quot; /&gt; 
        &lt;/bean&gt; 
    &lt;/list&gt; 
&lt;/property&gt; 
</code></pre><p>å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†3ä¸ªAuthenticationHandlerï¼Œè¿™æ­£æ˜¯CASçš„ä¸€ä¸ªï¼Œé€šè¿‡é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°é’ˆå¯¹ä¸åŒçš„åº”ç”¨æä¾›ä¸åŒçš„è®¤è¯æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥å®ç°ä»»æ„çš„ä¸­å¿ƒè®¤è¯ã€‚å†æ¥çœ‹çœ‹AuthenticationHandlerçš„ä»£ç </p>
<pre><code>/**  
* Method to determine if the credentials supplied are valid.  
*   
* @param credentials The credentials to validate.  
* @return true if valid, return false otherwise.  
* @throws AuthenticationException An AuthenticationException can contain  
* details about why a particular authentication request failed.  
*/  

boolean authenticate(Credentials credentials)   
    throws AuthenticationException;   

/**  
* Method to check if the handler knows how to handle the credentials  
* provided. It may be a simple check of the Credentials class or something  
* more complicated such as scanning the information contained in the  
* Credentials object.  
*   
* @param credentials The credentials to check.  
* @return true if the handler supports the Credentials, false othewrise.  
*/  
boolean supports(Credentials credentials); 
/** 
 * Method to determine if the credentials supplied are valid. 
 * 
 * @param credentials The credentials to validate. 
 * @return true if valid, return false otherwise. 
 * @throws AuthenticationException An AuthenticationException can contain 
 * details about why a particular authentication request failed. 
 */
boolean authenticate(Credentials credentials) 
    throws AuthenticationException;
/** 
 * Method to check if the handler knows how to handle the credentials 
 * provided. It may be a simple check of the Credentials class or something 
 * more complicated such as scanning the information contained in the 
 * Credentials object. 
 * 
 * @param credentials The credentials to check. 
 * @return true if the handler supports the Credentials, false othewrise. 
 */ 
boolean supports(Credentials credentials); 
</code></pre><p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯å®ç°è¿™ä¿©ä¸ªæ–¹æ³•è€Œå·²ï¼Œç‰¹åˆ«æé†’ï¼šå¯ä»¥åœ¨cas-servlet.xmlä¸­è®¾ç½®ä½ æ‰€ä½¿ç”¨çš„Credentialsï¼Œå¦‚ä¸‹ï¼šï¼ˆå…¶ä¸­çš„p:formObjectClasså€¼ï¼Œå¦‚æœä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨UsernamePasswordCredentialsï¼‰</p>
<pre><code>&lt;bean id=&quot;authenticationViaFormAction&quot; class=&quot;org.jasig.cas.web.flow.AuthenticationViaFormAction&quot;  
    p:formObjectClass=&quot;com.goldarmor.live800.cas.Live800CasCredentials&quot;  
    p:centralAuthenticationService-ref=&quot;centralAuthenticationService&quot;  
    p:warnCookieGenerator-ref=&quot;warnCookieGenerator&quot; /&gt; 
&lt;bean id=&quot;authenticationViaFormAction&quot; class=&quot;org.jasig.cas.web.flow.AuthenticationViaFormAction&quot; 
    p:formObjectClass=&quot;com.goldarmor.live800.cas.Live800CasCredentials&quot; 
    p:centralAuthenticationService-ref=&quot;centralAuthenticationService&quot; 
    p:warnCookieGenerator-ref=&quot;warnCookieGenerator&quot; /&gt;
</code></pre><h2 id="å®šä¹‰è‡ªå·±çš„credentialsToPrincipalResolvers"><a href="#å®šä¹‰è‡ªå·±çš„credentialsToPrincipalResolvers" class="headerlink" title="å®šä¹‰è‡ªå·±çš„credentialsToPrincipalResolvers"></a>å®šä¹‰è‡ªå·±çš„credentialsToPrincipalResolvers</h2><p>é€šè¿‡AuthenticationHandlerçš„è®¤è¯åï¼Œä¼šè°ƒç”¨åœ¨deployerConfigContext.xmlä¸­é…ç½®çš„credentialsToPrincipalResolversæ¥å¤„ç†Credentialsï¼Œç”ŸæˆPrincipalå¯¹è±¡ï¼š</p>
<pre><code>&lt;property name=&quot;credentialsToPrincipalResolvers&quot;&gt;   
    &lt;list&gt;   
        &lt;!--   
            UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login    
            by default and produces SimplePrincipal instances conveying the username from the credentials.   
            If you&apos;ve changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also   
            need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the   
            Credentials you are using.   
        --&gt;              
        &lt;bean   
            class=&quot;org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver&quot; /&gt;   
        &lt;!--   
            HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials.  It supports the CAS 2.0 approach of   
            authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a   
            SimpleService identified by that callback URL.   
            If you are representing services by something more or other than an HTTPS URL whereat they are able to   
            receive a proxy callback, you will need to change this bean declaration (or add additional declarations).   
            --&gt;   
        &lt;bean   
            class=&quot;org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver&quot; /&gt;   
        &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver&quot;/&gt;   
    &lt;/list&gt;   
&lt;/property&gt; 
&lt;property name=&quot;credentialsToPrincipalResolvers&quot;&gt; 
    &lt;list&gt; 
        &lt;!-- 
        UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login 
        by default and produces SimplePrincipal instances conveying the username from the credentials. 
        If you&apos;ve changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also 
        need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the 
        Credentials you are using. 
        --&gt; 
        &lt;bean class=&quot;org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver&quot; /&gt; 
        &lt;!-- 
        HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials.  It supports the CAS 2.0 approach of 
        authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a 
        SimpleService identified by that callback URL. 
        If you are representing services by something more or other than an HTTPS URL whereat they are able to 
        receive a proxy callback, you will need to change this bean declaration (or add additional declarations). 
        --&gt; 
        &lt;bean class=&quot;org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver&quot; /&gt; 
        &lt;bean class=&quot;com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver&quot;/&gt; 
    &lt;/list&gt; 
&lt;/property&gt; 
</code></pre><p>å¦‚ä¸Šï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒå®šä¹‰AuthenticationHandlerä¸€æ ·ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªcredentialsToPrincipalResolversæ¥å¤„ç†Credentialsï¼Œè¿”å›ä½ æ‰€éœ€è¦çš„Principalå¯¹è±¡ï¼Œä¸‹é¢æ¥çœ‹çœ‹credentialsToPrincipalResolversçš„æ–¹æ³•ï¼š</p>
<pre><code>/**  
* Turn Credentials into a Principal object by analyzing the information  
* provided in the Credentials and constructing a Principal object based on  
* that information or information derived from the Credentials object.  
*   
* @param credentials from which to resolve Principal  
* @return resolved Principal, or null if the principal could not be resolved.  
*/  
Principal resolvePrincipal(Credentials credentials);   

/**  
* Determine if a credentials type is supported by this resolver. This is  
* checked before calling resolve principal.  
*   
* @param credentials The credentials to check if we support.  
* @return true if we support these credentials, false otherwise.  
*/  


boolean supports(Credentials credentials); 
/** 
 * Turn Credentials into a Principal object by analyzing the information 
 * provided in the Credentials and constructing a Principal object based on 
 * that information or information derived from the Credentials object. 
 * 
 * @param credentials from which to resolve Principal 
 * @return resolved Principal, or null if the principal could not be resolved. 
 */ 
Principal resolvePrincipal(Credentials credentials);
/** 
 * Determine if a credentials type is supported by this resolver. This is 
 * checked before calling resolve principal. 
 * 
 * @param credentials The credentials to check if we support. 
 * @return true if we support these credentials, false otherwise. 
 */

boolean supports(Credentials credentials);  
</code></pre><p>åœ¨CASéªŒè¯çš„æ—¶å€™ï¼Œé€šè¿‡è®¿é—®/serviceValidateå¯çŸ¥ï¼šéªŒè¯æˆåŠŸä¹‹åè¿”å›çš„casServiceValidationSuccess.jspä¸­çš„æ•°æ®æ¥æºäºAssertionï¼Œä¸‹é¢æ¥çœ‹çœ‹å®ƒçš„ä»£ç ï¼š</p>
<pre><code>List&lt;Authentication&gt; getChainedAuthentications();   

/**  
* True if the validated ticket was granted in the same transaction as that  
* in which its grantor GrantingTicket was originally issued.  
*   
* @return true if validated ticket was granted simultaneous with its  
* grantor&apos;s issuance  
*/  

boolean isFromNewLogin();   


/**  
* Method to obtain the service for which we are asserting this ticket is  
* valid for.  
*   
* @return the service for which we are asserting this ticket is valid for.  
*/  

Service getService(); 
List&lt;Authentication&gt; getChainedAuthentications();
/** 
 * True if the validated ticket was granted in the same transaction as that 
 * in which its grantor GrantingTicket was originally issued. 
 * 
 * @return true if validated ticket was granted simultaneous with its 
 * grantor&apos;s issuance 
 */
boolean isFromNewLogin();

/** 
 * Method to obtain the service for which we are asserting this ticket is 
 * valid for. 
 * 
 * @return the service for which we are asserting this ticket is valid for. 
 */
Service getService(); 
</code></pre><p>é€šè¿‡getChainedAuthentications()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°Authenticationå¯¹è±¡åˆ—è¡¨ï¼Œå†çœ‹çœ‹Authenticationçš„ä»£ç ï¼š</p>
<pre><code>/**  
* Method to obtain the Principal.  
*   
* @return a Principal implementation  
*/  

Principal getPrincipal();   

/**  
* Method to retrieve the timestamp of when this Authentication object was  
* created.  
*   
* @return the date/time the authentication occurred.  
*/  

Date getAuthenticatedDate();   

/**  
* Attributes of the authentication (not the Principal).  
* @return the map of attributes.  
*/  
Map&lt;String, Object&gt; getAttributes(); 
/** 
 * Method to obtain the Principal. 
 * 
 * @return a Principal implementation 
 */
Principal getPrincipal();
/** 
 * Method to retrieve the timestamp of when this Authentication object was 
 * created. 
 * 
 * @return the date/time the authentication occurred. 
 */
Date getAuthenticatedDate();
/** 
 * Attributes of the authentication (not the Principal). 
 * @return the map of attributes. 
 */ 
Map&lt;String, Object&gt; getAttributes(); 
</code></pre><p>è€Œè¿™å…¶ä¸­çš„Principalå°±æ¥æºäºä¸Šé¢æåˆ°çš„ç”±credentialsToPrincipalResolverså¤„ç†å¾—åˆ°çš„Principalå¯¹è±¡ï¼Œæœ€åçœ‹ä¸€ä¸‹Principalçš„ä»£ç ï¼Œæˆ‘ä»¬åªè¦å†åšä¸€ä¸ªå®ç°ä»–çš„ä»£ç ï¼Œæ•´ä¸ªCAS Serverå°±å¯ä»¥ä¿¡æ‰‹æ‹ˆæ¥äº†ï¼Œå‘µå‘µ</p>
<pre><code>/**  
* Returns the unique id for the Principal  
* @return the unique id for the Principal.  
*/  

String getId();   


/**  
 *   
 * @return  
 */  

Map&lt;String, Object&gt; getAttributes(); 
/** 
 * Returns the unique id for the Principal 
 * @return the unique id for the Principal. 
 */
String getId();

 /** 
 * 
 * @return 
 */
Map&lt;String, Object&gt; getAttributes();
</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„casServiceValidationSuccess.jspå’ŒcasLoginView.jspé¡µé¢ç­‰ï¼Œå…·ä½“çš„æ“ä½œåŠæ³•ä¹Ÿæ˜¯æœ€ç®€å•çš„åŠæ³•å°±æ˜¯å¤‡ä»½ä»¥å‰çš„é¡µé¢ä¹‹åä¿®æ”¹æˆè‡ªå·±éœ€è¦çš„é¡µé¢ã€‚ </p>
]]></content>
    
    <summary type="html">
    
      CAS æœåŠ¡å™¨ç«¯é…ç½®æ–‡ä»¶
    
    </summary>
    
      <category term="blog" scheme="http://blog.wglgg.cn/categories/blog/"/>
    
    
  </entry>
  
</feed>
